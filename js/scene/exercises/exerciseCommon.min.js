var exerciseCommon={means:{getNowTime:function(){var e=new Date,t="",s=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0"+e.getDate():e.getDate(),a=e.getHours()<10?"0"+e.getHours():e.getHours(),i=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),o=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return t+=e.getFullYear()+"-"+s+"-"+r+" "+a+":"+i+":"+o},bury:function(e){switch(e.type){case"recommend":switch(exerciseCommon.parameter.exercisesOptions.type.page){case 1:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 0:commLog.creatEvent({id:163,url:location.href,keyword:"顺序练习相关推荐",browseType:"34",trackLocation:e.indexNum});break;case 1:"0"==exerciseCommon.parameter.treeleve?commLog.creatEvent({id:164,url:location.href,keyword:"专项练习(亚专业) 相关推荐",browseType:"34",trackLocation:e.indexNum}):commLog.creatEvent({id:165,url:location.href,keyword:"专项练习(亚专业下章节) 相关推荐",browseType:"34",trackLocation:e.indexNum})}break;case 3:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 3:commLog.creatEvent({id:169,url:location.href,keyword:"错题本相关推荐",browseType:"73",trackLocation:e.indexNum});break;case 4:commLog.creatEvent({id:170,url:location.href,keyword:"收藏相关推荐",browseType:"74",trackLocation:e.indexNum})}}break;case"exercise":var t=$(".queIteam").attr("data-id");switch(exerciseCommon.parameter.exercisesOptions.type.page){case 1:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 0:commLog.createBrowse(68,"顺序练习&"+exerciseCommon.parameter.testId+"&"+t);break;case 1:commLog.createBrowse(69,"专项练习&"+exerciseCommon.parameter.testId+"&"+t)}}break;case"page":switch(exerciseCommon.parameter.exercisesOptions.type.page){case 0:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 0:commLog.createBrowse(32,"习题-顺序练习列表页");break;case 1:commLog.createBrowse(31,"习题-专项练习列表页")}break;case 1:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 0:case 1:commLog.createBrowse(34,"习题-习题资源页")}break;case 2:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 0:case 1:commLog.createBrowse(35,"习题-答题结果页")}break;case 3:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 3:commLog.createBrowse(73,"错题本");break;case 4:commLog.createBrowse(74,"收藏习题")}}break;case"share":switch(exerciseCommon.parameter.exercisesOptions.type.page){case 1:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 0:commLog.creatEvent({id:92,url:location.href,keyword:"顺序练习答题页分享",browseType:"34"});break;case 1:commLog.creatEvent({id:94,url:location.href,keyword:"专项练习答题页分享",browseType:"34"})}break;case 2:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 0:commLog.creatEvent({id:93,url:location.href,keyword:"顺序练习结果页分享",browseType:"35"});break;case 1:commLog.creatEvent({id:95,url:location.href,keyword:"专项练习答题页分享",browseType:"35"})}}break;case"openRecord":switch(exerciseCommon.parameter.exercisesOptions.type.page){case 1:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 0:commLog.creatEvent({id:108,url:location.href,keyword:"顺序练习答题卡呼出",browseType:"34",browseTypeSourceUrl:location.href});break;case 1:commLog.creatEvent({id:109,url:location.href,keyword:"专项练习答题卡呼出",browseType:"34",browseTypeSourceUrl:location.href})}}break;case"closeRecord":switch(exerciseCommon.parameter.exercisesOptions.type.page){case 1:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 0:commLog.creatEvent({id:112,url:location.href,keyword:"顺序练习关闭答题卡",browseType:"34",browseTypeSourceUrl:location.href});break;case 1:commLog.creatEvent({id:113,url:location.href,keyword:"专项练习关闭答题卡",browseType:"34",browseTypeSourceUrl:location.href})}}break;case"handin":switch(exerciseCommon.parameter.exercisesOptions.type.page){case 1:switch(exerciseCommon.parameter.exercisesOptions.type.exam){case 0:commLog.creatEvent({id:110,url:location.href,keyword:"顺序练习交卷",browseType:"34",browseTypeSourceUrl:location.href});break;case 1:commLog.creatEvent({id:111,url:location.href,keyword:"专项练习交卷",browseType:"34",browseTypeSourceUrl:location.href})}}}},initProgress:function(e){$(".queResultProgress").radialIndicator({barColor:"#fff",barWidth:18,radius:117,initValue:e,roundCorner:!0,percentage:!0}),$("canvas").attr({style:"filter:alpha(opacity=75);-moz-opacity:0.75; opacity:0.75;margin-left: 15px;margin-top: 14px;"})},applyData:function(e){var t=e.get?"GET":"POST",s={paramJson:$.toJSON(e.postData)};$.ajax({url:e.port,dataType:"json",async:!0,data:s,type:t,beforeSend:function(){},success:function(t){var s="NO DATA"==t.responseObject.responseMessage,r=t.responseObject.responseStatus;s||!r?e.failed&&e.failed():e.success&&e.success(t)},complete:function(){},error:function(){}})},toggleHeight:function(e){return e.toggleClass("courseHidden"),e.hasClass("courseHidden")?e.next().html("<i ></i><span>展开</span>").addClass("icon-upMore").removeClass("packUp"):e.next().html("<i ></i><span>收起</span>").addClass("packUp").removeClass("icon-upMore"),!1},demoData:function(e){switch(e.type){case"before":e.judge&&e.container.before(e.str);break;case"after":e.judge&&e.container.after(e.str);break;case"append":e.judge&&e.container.append(e.str);break;case"html":e.judge&&e.container.html(e.str)}e.strCallBack&&e.strCallBack()},clearHtml:function(){$(window).off("scroll"),$(".queShiTiDisNothing").hide(),$(".discussAllList").html("").removeAttr("scrollpagination").removeAttr("data-page"),$(".discuss-content").hide(),$("#quesContainer").addClass("none"),$(".course-footer").hide(),$(".exercisesAnalysis").hide()},share:function(){var e={};if(2==exerciseCommon.parameter.exercisesOptions.type.page&&(e=0==exerciseCommon.parameter.exercisesOptions.type.exam?{sceneType:"4",resourceType:"2",refId:"",visitSiteId:"13",shareSence:"4",isPass:"1",exercisesTollgate:exerciseCommon.parameter.testId}:{sceneType:"5",resourceType:"2",refId:"",visitSiteId:"13",shareSence:"5",isPass:"1",seriesDirId:exerciseCommon.parameter.testId,treeLevel:exerciseCommon.parameter.treeleve},exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.share,postData:e,success:function(e){var t=e.responseObject.responseData.data_list[0].share_channel[0].shareUrl,s=e.responseObject.responseData.data_list[0].share_channel[2].shareTitle,r=e.responseObject.responseData.data_list[0].share_channel[3].shareTitle,a=e.responseObject.responseData.data_list[0].share_channel[4].shareDesc,i=e.responseObject.responseData.data_list[0].share_channel[2].shareDesc,o=e.responseObject.responseData.data_list[0].share_channel[4].shareDesc,n=e.responseObject.responseData.data_list[0].share_channel[3].shareDesc,c='<div class="share rightNav" id="share"><i class="icon-share" style="display: block;"></i><p class="shareTxt" style="display: none;">分享</p><article class="sharePic ev-shareBox" id="yd-shareBox"><b class="yd-weixin ev-tweixin"><i class="icon-weixin"></i><em>微信</em></b><section class="Ev-shareWeixinCode" style="display: none;position: absolute;bottom: 100%;"><h3>使用微信扫描二维码</h3></section><b class="yd-qqFriends ev-tqq"><i class="icon-qq"></i><em>QQ</em></b><b class="yd-qZone ev-tqzone"><i class="icon-zone"></i><em>QQ空间</em></b><b class="yd-weibo ev-tsina"><i class="icon-weibo"></i><em>微博</em></b></article></div>';pcShare({container:$(".al-rightNav"),type:6,hrefTemplate:c,h5Url:t,shareTrend:0,url:t,qqTitle:r,qqZoneSummary:i,sinaTitle:a,sinaSummary:o,qqZoneTitle:s,qqSummary:n,h5Url:t,hasH5:!0,shareQQSuc:function(){commLog.creatEvent({id:102,url:window.location.href,keyword:"QQ分享"})},shareQzoneSuc:function(){commLog.creatEvent({id:103,url:window.location.href,keyword:"QQ空间分享"})},shareWeixinSuc:function(){commLog.creatEvent({id:100,url:window.location.href,keyword:"微信分享"})},shareSinaSuc:function(){commLog.creatEvent({id:104,url:window.location.href,keyword:"微博分享"})},clickCallback:function(){exerciseCommon.means.bury({type:"share"})}})},failed:function(){}})),1==exerciseCommon.parameter.exercisesOptions.type.page||3==exerciseCommon.parameter.exercisesOptions.type.page){var t='<div class="share rightNav" id="share"><i class="icon-share" style="display: block;"></i><p class="shareTxt" style="display: none;">分享</p><article class="sharePic ev-shareBox" id="yd-shareBox"><b class="yd-weixin ev-tweixin"><i class="icon-weixin"></i><em>微信</em></b><section class="Ev-shareWeixinCode" style="display: none;position: absolute;bottom: 100%;"><h3>使用微信扫描二维码</h3></section><b class="yd-qqFriends ev-tqq"><i class="icon-qq"></i><em>QQ</em></b><b class="yd-qZone ev-tqzone"><i class="icon-zone"></i><em>QQ空间</em></b><b class="yd-weibo ev-tsina"><i class="icon-weibo"></i><em>微博</em></b></article></div>';pcShare({container:$(".al-rightNav"),type:6,hrefTemplate:t,h5Url:window.location.href,shareTrend:0,url:window.location.href,qqTitle:"",qqZoneSummary:"",sinaTitle:"",sinaSummary:"",qqZoneTitle:"",qqSummary:"",hasH5:!0,shareQQSuc:function(){commLog.creatEvent({id:102,url:window.location.href,keyword:"QQ分享"})},shareQzoneSuc:function(){commLog.creatEvent({id:103,url:window.location.href,keyword:"QQ空间分享"})},shareWeixinSuc:function(){commLog.creatEvent({id:100,url:window.location.href,keyword:"微信分享"})},shareSinaSuc:function(){commLog.creatEvent({id:104,url:window.location.href,keyword:"微博分享"})},clickCallback:function(){exerciseCommon.means.bury({type:"share"});var e=this,t={sceneType:3,resourceType:2,refId:$(".queIteam").attr("data-id"),visitSiteId:13};exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.share,postData:t,success:function(t){var s=t.responseObject.responseData.data_list[0].share_channel[0].shareUrl,r=t.responseObject.responseData.data_list[0].share_channel[2].shareTitle,a=t.responseObject.responseData.data_list[0].share_channel[3].shareTitle,i=t.responseObject.responseData.data_list[0].share_channel[4].shareDesc,o=t.responseObject.responseData.data_list[0].share_channel[2].shareDesc,n=t.responseObject.responseData.data_list[0].share_channel[4].shareDesc,c=t.responseObject.responseData.data_list[0].share_channel[3].shareDesc;e.url=s,e.h5Url=s,e.qqTitle=a,e.qqZoneSummary=o,e.sinaTitle=i,e.sinaSummary=n,e.qqZoneTitle=r,e.qqSummary=c,e.hasH5=!0},failed:function(){}})}})}},getUrlName:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),s=window.location.search.substr(1).match(t);return null!=s?unescape(s[2]):null},updataExercise:function(e){var t=exerciseCommon.parameter.index==exerciseCommon.parameter.exerciseInfo.length-1;if(e&&3==exerciseCommon.parameter.exercisesOptions.type.exam){var s=$(".queIteam").attr("data-errorid"),r={id:s,isValid:"0"};exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.removeWrong,postData:r,success:function(e){},failed:function(){}})}var a=exerciseCommon.means.deleteData($(".queIteam").attr("data-id"));exerciseCommon.parameter.exerciseInfo=a,0==a.length?3==exerciseCommon.parameter.exercisesOptions.type.exam?window.location.href="//www.yi-ding.net.cn/pages/personal/personal_wrongList.html":4==exerciseCommon.parameter.exercisesOptions.type.exam&&(window.location.href="//www.yi-ding.net.cn/pages/personal/personal_collection.html"):(t&&(exerciseCommon.parameter.index=0),exerciseCommon.means.clearHtml(),exerciseCommon.means.showNowExercise())},checkExerciseData:function(e){for(var t=[],s=e.responseObject.responseData.data_list,r=0;r<s.length;r++){var a=Number(s[r].exercisesType),i=e.responseObject.responseData.target_exercises==s[r].exercisesId;if(4!=a){var o=s[r].exercisesName,n=s[r].exercisesDesc,c=s[r].exercisesId,m=s[r].exercisesType,l=s[r].correctName,p=s[r].exercisesSort,d=s[r].answerId,u=s[r].knowledgeList,x=s[r].optionCorrect,h=s[r].customerOption,C=parseInt(s[r].collection),g=s[r].collectionId,f=s[r].exercisesNameAtt,w=s[r].exercisesDescAtt,y="";y=h.length>0?s[r].isRight:"2";var v="";s[r].errorId&&(v=s[r].errorId);var I=!1;I=0!=C;for(var k=[],q=0;q<s[r].optionList.length;q++)k[q]={},k[q].optionDesc=s[r].optionList[q].optionDesc,k[q].optionTitle=s[r].optionList[q].optionName,k[q].optionId=s[r].optionList[q].optionId,k[q].optionDescAtt=s[r].optionList[q].optionDescAtt,l.indexOf(s[r].optionList[q].optionName)!=-1?k[q].isAnswer=1:k[q].isAnswer=0;var b={nowIndex:i,title:o,type:m,options:k,exeSortId:p,exerciseId:c,answerId:d,ansExp:n,correctName:l,optionCorrect:x,konwledgeDot:u,customerOption:h,collection:I,errorId:v,collectionId:g,exercisesNameAtt:f,exercisesDescAtt:w,status:y,related:!1};t.push(b)}else for(var $=s[r].exercisesName,D=s[r].exercisesNameAtt,S=0;S<s[r].exercisesList.length;S++){var T=s[r].exercisesList[S].exercisesName,O=s[r].exercisesList[S].exercisesDesc,L=s[r].exercisesList[S].exercisesId,N=s[r].exercisesList[S].exercisesType,R=s[r].exercisesList[S].correctName,A=s[r].exercisesList[S].exercisesSort,B=s[r].exercisesList[S].answerId,E=s[r].exercisesList[S].knowledgeList,j=s[r].exercisesList[S].optionCorrect,_=s[r].exercisesList[S].customerOption,P=s[r].exercisesList[S].collection,H=s[r].exercisesList[S].collectionId,Q=s[r].exercisesList[S].exercisesNameAtt,J=s[r].exercisesList[S].exercisesDescAtt,U="";U=_.length>0?s[r].exercisesList[S].isRight:"2",s[r].exercisesList[S].errorId&&(v=s[r].exercisesList[S].errorId);var G=[],W=!1;W=0!=P;for(var M=0;M<s[r].exercisesList[S].optionList.length;M++)G[M]={},G[M].optionDesc=s[r].exercisesList[S].optionList[M].optionDesc,G[M].optionTitle=s[r].exercisesList[S].optionList[M].optionName,G[M].optionId=s[r].exercisesList[S].optionList[M].optionId,G[M].optionDescAtt=s[r].exercisesList[S].optionList[M].optionDescAtt,R.indexOf(s[r].exercisesList[S].optionList[M].optionName)!=-1?G[M].isAnswer=1:G[M].isAnswer=0;var z={nowIndex:i,material:$,materialImg:D,title:T,type:N,options:G,exeSortId:A,exerciseId:L,answerId:B,ansExp:O,correctName:R,konwledgeDot:E,optionCorrect:j,customerOption:_,collection:W,errorId:v,collectionId:H,exercisesNameAtt:Q,exercisesDescAtt:J,status:U,related:!1};t.push(z)}}return t},inheritExerciseData:function(){$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){exerciseCommon.parameter.exerciseBook[e+""]={customerOption:this.customerOption,answerTime:exerciseCommon.means.getNowTime(),exercisesId:this.exercisesId,optionCorrect:this.optionCorrect,answerId:this.answerId,status:this.status}})},filterWrongData:function(e){var t=[];return $.each(e,function(e,s){"0"==this.status&&t.push(this)}),t},checkLocalData:function(e,t){return!!localStorage.getItem(e+t)&&JSON.parse(localStorage.getItem(e+t))},recommend:function(){exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.recommend,postData:{exercisesId:$(".queIteam").attr("data-id")},success:function(e){exerciseCommon.means.demoData({type:"html",container:$(".recommendCont ul"),judge:!0,str:exerciseCommon.template.recommend(e),strCallBack:function(){var e=$(".recommendCont");e.find("ul li").length>0&&($(".course-footer").show(),exerciseCommon.means.swipe(e,$(".recommendCont  .recommend"),"210px",$(".recommendCont  .recommend li"),"200px"))}})}})},postError:function(){var e=exerciseCommon.means.statistics.filterExeBook(),t={customerId:loginAbout.login.status().userId,exercisesList:JSON.stringify(e.isThisResult),seriesDirId:exerciseCommon.parameter.testId,type:"7",treeLevel:exerciseCommon.parameter.treeleve};exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.updateResult,postData:t,success:function(e){}})},updataResult:function(){exerciseCommon.parameter.isHand=!1;var e=exerciseCommon.means.statistics.filterExeBook(),t={};t=1==exerciseCommon.parameter.exercisesOptions.type.page&&0==exerciseCommon.parameter.exercisesOptions.type.exam?{customerId:localStorage.getItem("userId"),exercisesList:JSON.stringify(e.lastResult),tollgate:exerciseCommon.parameter.testId,type:"1",isHand:"1"}:{customerId:loginAbout.login.status().userId,exercisesList:JSON.stringify(e.lastResult),seriesDirId:exerciseCommon.parameter.testId,type:"2",treeLevel:exerciseCommon.parameter.treeleve,isHand:"1"},exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.updateResult,postData:t,success:function(e){exerciseCommon.means.bury({type:"handin"});var t=e.responseObject.responseData.data_list[0],s="",r="",a="",i="",o="",n="",c="",m="",l="";1==exerciseCommon.parameter.exercisesOptions.type.page&&0==exerciseCommon.parameter.exercisesOptions.type.exam?(l=JSON.parse(localStorage.getItem("order"+exerciseCommon.parameter.testId)),localStorage.setItem("review"+exerciseCommon.parameter.testId,JSON.stringify(l)),localStorage.removeItem("order"+exerciseCommon.parameter.testId)):(l=JSON.parse(localStorage.getItem("project"+exerciseCommon.parameter.testId)),localStorage.setItem("review"+exerciseCommon.parameter.testId,JSON.stringify(l)),localStorage.removeItem("project"+exerciseCommon.parameter.testId)),1==exerciseCommon.parameter.exercisesOptions.type.page&&1==exerciseCommon.parameter.exercisesOptions.type.exam?(s=t.totalNum,a=t.correctNum,r=t.notAnswerNum,c=t.tollgateStatus,i=parseInt(s)-parseInt(r)-parseInt(a),o=exerciseCommon.parameter.testId,n=t.seriesDirId,m=t.treeLevel,window.location.href="//www.yi-ding.net.cn/pages/exercises/exercise_project_result.html?&sum="+s+"&rightNum="+a+"&wrongNum="+i+"&noneNum="+r+"&status="+c+"&nowGate="+o+"&nextGate="+n+"&nextTreeLevel="+m+"&nowTreeLevel="+exerciseCommon.parameter.treeleve):(s=t.totalNum,a=t.correctNum,r=t.notAnswerNum,c=t.tollgateStatus,i=parseInt(s)-parseInt(r)-parseInt(a),o=exerciseCommon.parameter.testId,n=t.tollgate,window.location.href="//www.yi-ding.net.cn/pages/exercises/exercise_order_result.html?&sum="+s+"&rightNum="+a+"&wrongNum="+i+"&noneNum="+r+"&status="+c+"&nowGate="+o+"&nextGate="+n)}})},handin:function(){var e=exerciseCommon.means.statistics.filterExeBook(),t=e.lastNum.none;t>0?(comm.confirmBox({title:"您还有"+t+"道题没完成，确定现在交卷吗？",cancel:"继续答题",ensure:"交卷",ensureCallback:function(){exerciseCommon.means.updataResult()},cancelCallback:function(){}}),$(".yd-confirmModalContent article h2").html("您还有"+t+"道题没完成，确定现在交卷吗？"),$(".yd-confirmModalContent article p").html("")):exerciseCommon.means.updataResult()},swipe:function(e,t,s,r,a){var i=r.length-3;e.css({position:"relative",height:a}),t.css({position:"absolute"});var o=e.parent(),n=' <figure class="slide">                                <i class="slideLeft"></i>                                <i class="slideRight"></i>                            </figure>';o.prepend(n),r.length>3?(e.siblings(".slide").find(".slideLeft").on("mouseover",function(){$(this).addClass("activation")}),e.siblings(".slide").find(".slideLeft").on("mouseout",function(){$(this).removeClass("activation")}),e.siblings(".slide").find(".slideRight").on("mouseover",function(){$(this).addClass("activation")}),e.siblings(".slide").find(".slideRight").on("mouseout",function(){$(this).removeClass("activation")}),t.css("left","30px"),e.siblings(".slide").find(".slideRight").click(function(){-(r.length-4)*parseInt(s);i>0?(t.animate({left:"-="+s},1e3),i--):i=0}),e.siblings(".slide").find(".slideLeft").click(function(){i++,i<=r.length-3?t.animate({left:"+="+s},1e3):i=r.length-3})):(o.find(".slide").remove(),e.css({position:"",height:""}),t.css({position:""}))},talk:function(){var e=$(".queIteam"),t={about:0,refId:e.attr("data-id"),type:"disscuss",sortType:"7",container:$(".discussAllList"),scene:"0",reviewType:"2",postData:{reviewType:"2",refId:e.attr("data-id"),reviewId:"",sortType:"7",scene:"0",logoUseFlag:"2",pageIndex:"1",pageSize:"10",customerId:localStorage.getItem("userId"),attUseFlag:"16"},onOperat:function(){},success:function(t){var s=$(".discussAllList"),r=s.find("li").length>0;r?s.append(t):s.html(t).attr("data-page","1");var a="考题讨论&nbsp;&nbsp;("+talk.discussLen+')<span class="queShiTiPart fr">参与讨论</span>';$(".queShiTiDisTitle .width92").html(a),$(".discuss-content").show(),talk.partInDiss(),talk.scrollPage(s,e.attr("data-id"))},failed:function(){var e=$(".discussAllList"),t=e.find("li").length>0;if(t)e.attr("scrollpagination","disabled");else{$(".queShiTiDisNothing").show();var s='考题讨论&nbsp;&nbsp;(0)<span class="queShiTiPart fr">参与讨论</span>';$(".discuss-content").find(".queShiTiDisTitle .width92").html(s)}$(".discuss-content").show(),talk.partInDiss()}};talk.init(t)},openRecommend:function(e){var t=e.attr("data-videosrc"),s=e.parents("ul li").index()+1;exerciseCommon.means.bury({type:"recommend",indexNum:s}),window.open("https://"+t,"_blank")},openRecommend:function(e){var t=e.attr("data-videosrc"),s=e.parents("ul li").index()+1;exerciseCommon.means.bury({type:"recommend",indexNum:s}),window.open("https://"+t,"_blank")},solution:function(){exerciseCommon.means.demoData({container:$(".exercisesAnalysis"),type:"html",judge:!0,str:exerciseCommon.template.solution(),strCallBack:function(){$(".exercisesAnalysis").show()}})},related:function(){exerciseCommon.means.solution(),exerciseCommon.means.recommend(),exerciseCommon.means.talk()},statistics:{record:function(e){var t=exerciseCommon.parameter.index;$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.nowIndex=!1}),exerciseCommon.parameter.exerciseInfo[t].customerOption=e.customerOption,exerciseCommon.parameter.exerciseInfo[t].nowIndex=!0,exerciseCommon.parameter.exerciseInfo[t].status=e.status,exerciseCommon.parameter.exerciseInfo[t].answerTime=e.answerTime,1==exerciseCommon.parameter.exercisesOptions.type.page&&0==exerciseCommon.parameter.exercisesOptions.type.exam?localStorage.setItem("order"+exerciseCommon.parameter.testId,JSON.stringify(exerciseCommon.parameter.exerciseInfo)):localStorage.setItem("project"+exerciseCommon.parameter.testId,JSON.stringify(exerciseCommon.parameter.exerciseInfo))},filterExeBook:function(){var e={};return e.lastResult=[],e.saveResult=[],e.isThisResult=[],e.resultStr="",e.resultNum={right:0,wrong:0,none:0},e.lastNum={right:0,wrong:0,none:0},$.each(exerciseCommon.parameter.exerciseInfo,function(t,s){var r=parseInt(t)+1,a=this.nowIndex?"queShiTiReLiT":"",i=this.status,o={answerId:this.answerId,optionCorrect:this.optionCorrect,customerOption:this.customerOption,answerTime:this.answerTime?this.answerTime:"",exercisesId:this.exerciseId,state:this.status};switch(this.nowIndex&&e.isThisResult.push(o),e.lastResult[t]=o,"2"!=o.state&&e.saveResult.push(o),i){case"1":e.resultStr+='<a href="javascript:;" data-shitiid="'+t+'" class="queShiTiReLi queShiTiReLiR '+a+'">'+r+"</a>",e.resultNum.right++,e.lastNum.right++;break;case"0":this.customerOption.length>0?(e.resultStr+='<a href="javascript:;" data-shitiid="'+t+'" class="queShiTiReLi queShiTiReLiW '+a+'">'+r+"</a>",e.resultNum.wrong++):(e.resultStr+='<a href="javascript:;" data-shitiid="'+t+'" class="queShiTiReLi queShiTiReLiN '+a+'">'+r+"</a>",e.resultNum.none++),e.lastNum.wrong++;break;case"2":e.resultStr+='<a href="javascript:;" data-shitiid="'+t+'" class="queShiTiReLi queShiTiReLiN '+a+'">'+r+"</a>",e.resultNum.none++,e.lastNum.none++}}),1==exerciseCommon.parameter.exercisesOptions.type.page?e.resultStr='<div class="queShiTiReTitle"><span class="queShiTiReIte queShiTiReIteR">对<i class="queShiTiReR">'+e.resultNum.right+'</i></span><span class="queShiTiReIte queShiTiReIteW">错<i class="queShiTiReW">'+e.resultNum.wrong+'</i></span><span class="queShiTiReIte queShiTiReIteN">未答<i class="queShiTiReN">'+e.resultNum.none+'</i></span><span class="queShiTiReIte queShiTiReIteC">交卷<i class="queShiTiReN"></i></span><span class="queShiTiReIte"></span></div><div class="queShiTiReContent">'+e.resultStr+"</div></div>":e.resultStr='<div class="queShiTiReTitle"><span class="queShiTiReIte queShiTiReIteR">对<i class="queShiTiReR">'+e.resultNum.right+'</i></span><span class="queShiTiReIte queShiTiReIteW">错<i class="queShiTiReW">'+e.resultNum.wrong+'</i></span><span class="queShiTiReIte queShiTiReIteN">未答<i class="queShiTiReN">'+e.resultNum.none+'</i></span><span class="queShiTiReIte"></span></div><div class="queShiTiReContent">'+e.resultStr+"</div></div>",e}},deleteData:function(e){var t=[];return $.each(exerciseCommon.parameter.exerciseInfo,function(s,r){this.exerciseId!=e&&t.push(this)}),t},compareData:function(e,t){var s=0,r=0,a=0,i={};return i.goOn=!1,$.each(e,function(e,t){this.customerOption.length>0&&s++}),$.each(t,function(e,t){this.customerOption.length>0&&r++,2!=this.status&&a++}),s>=r&&0==a?(i.exerciseData=e,0==s?t?i.goOn=!0:i.goOn=!1:i.goOn=!0):(i.exerciseData=t,i.goOn=!0),i},clearHistoryData:function(){1==exerciseCommon.parameter.exercisesOptions.type.page&&0==exerciseCommon.parameter.exercisesOptions.type.exam?localStorage.removeItem("order"+exerciseCommon.parameter.testId):localStorage.removeItem("project"+exerciseCommon.parameter.testId),$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.nowIndex=!1,this.status="2",this.customerOption="",this.related=!1})},continueTest:function(e){comm.confirmBox({title:"您有上次未完成的练习，是否继续？",cancel:"重新开始",ensure:"继续",ensureCallback:function(){exerciseCommon.parameter.index=0,exerciseCommon.means.inheritExerciseData(),$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.nowIndex&&(exerciseCommon.parameter.index=e)}),$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.nowIndex=!1}),exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].nowIndex=!0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){$("#quesContainer").removeClass("none"),$("#queBehavior").removeClass("none"),exerciseCommon.work.changeIndex(),exerciseCommon.work.checkExp(),exerciseCommon.work.lookAtQueReco.productRecord(),exerciseCommon.means.showNowExercise(),"2"!=$(".queIteam").attr("data-status")?(exerciseCommon.work.answerAbout.forbidTest(),"0"!=$(".queIteam").attr("data-status")&&exerciseCommon.means.related()):exerciseCommon.work.answerAbout.test()}})},cancelCallback:function(){exerciseCommon.parameter.index=0,exerciseCommon.means.clearHistoryData(),$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.nowIndex=!1,this.answerId="0"}),exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].nowIndex=!0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){$("#quesContainer").removeClass("none"),$("#queBehavior").removeClass("none"),exerciseCommon.work.changeIndex(),exerciseCommon.work.checkExp(),exerciseCommon.work.lookAtQueReco.productRecord(),exerciseCommon.means.showNowExercise(),exerciseCommon.work.answerAbout.test()}})}})},showNowExercise:function(){var e=exerciseCommon.parameter.index+1,t=exerciseCommon.parameter.exerciseInfo.length;$(".queBehNow .queName").html(e+"/"+t),$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.nowIndex=!1}),exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].nowIndex=!0,1==exerciseCommon.parameter.exercisesOptions.type.page&&0==exerciseCommon.parameter.exercisesOptions.type.exam?localStorage.setItem("order"+exerciseCommon.parameter.testId,JSON.stringify(exerciseCommon.parameter.exerciseInfo)):localStorage.setItem("project"+exerciseCommon.parameter.testId,JSON.stringify(exerciseCommon.parameter.exerciseInfo));var s=$("#queShiTiRecord");s.hasClass("none")||exerciseCommon.work.lookAtQueReco.showRecord(),exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){exerciseCommon.means.bury({type:"exercise"}),$("#quesContainer").removeClass("none"),exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].related?(exerciseCommon.work.answerAbout.forbidTest(),exerciseCommon.means.related()):exerciseCommon.work.answerAbout.test(),"2"!=exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].status&&exerciseCommon.work.answerAbout.forbidTest()}}),1==e?$(".queBehPre").addClass("queBehPreGray"):$(".queBehPre").removeClass("queBehPreGray");var r=$(".queIcoNextQue");e==t?1==exerciseCommon.parameter.exercisesOptions.type.page?r.html('<i></i><span class="queName">交卷</span>').attr("data-handin",!0):r.addClass("queBehNextGray").attr("data-handin",!0):r.html('<i></i><span class="queName">下一题</span>').attr("data-handin",!1).removeClass("queBehNextGray")}},work:{answerAbout:{test:function(){var e=$(".queIteam"),t=e.find("#queAffirmButton").length>0;e.find(".queShitiOptions").each(function(){$(this).unbind("click").bind("click",function(s){if("img"===s.target.tagName.toLowerCase())return!1;if(t)$(this).toggleClass("queShitiOptionsN"),exerciseCommon.work.answerAbout.toggleAffirm(),exerciseCommon.work.answerAbout.affirmTest();else{var r="",a=!0;if(r+=$(this).attr("data-opid"),JSON.parse($(this).attr("data-judge"))){$(this).addClass("queShitiOptionsR"),exerciseCommon.work.answerAbout.forbidTest(),clearTimeout(i);var i=setTimeout(function(){if(3==exerciseCommon.parameter.exercisesOptions.type.exam&&3==exerciseCommon.parameter.exercisesOptions.type.page)return exerciseCommon.means.postError(),exerciseCommon.means.updataExercise(!1),!1;if(exerciseCommon.parameter.index==exerciseCommon.parameter.exerciseInfo.length-1){var e=$("#queShiTiRecord");e.hasClass("none")&&$(".queBehNow").trigger("click");var t=$("#queBehavior"),s=$("#quesContainer").height();$("html,body").animate({scrollTop:t.offset().top+s},1e3)}else $(".queBehNext").trigger("click")},400)}else{a=!1,$(this).addClass("queShitiOptionsW"),exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].related=!0,exerciseCommon.means.related(),exerciseCommon.work.answerAbout.forbidTest();var o={customerId:localStorage.getItem("userId"),exercisesId:e.attr("data-id"),type:"2",customerOption:r};exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.errorExercise,postData:o,success:function(e){}}),1==exerciseCommon.parameter.exercisesOptions.type.page&&comm.guideUser(0),3==exerciseCommon.parameter.exercisesOptions.type.exam&&3==exerciseCommon.parameter.exercisesOptions.type.page&&exerciseCommon.means.postError()}var n={customerOption:r,answerTime:exerciseCommon.means.getNowTime(),exercisesId:e.attr("data-id"),optionCorrect:e.attr("data-correct"),answerId:e.attr("data-ansid"),status:""};a?n.status="1":n.status="0",exerciseCommon.means.statistics.record(n)}})})},forbidTest:function(){$(".queShitiOptions").each(function(){$(this).unbind("click")})},affirmTest:function(){var e=$(".queButtonBeen"),t=$(".queIteam");e.unbind("click").bind("click",function(){var e="",s=!0;$(this).hide(),$(".queShitiOptionsN").each(function(){e+=$(this).attr("data-opid")+",",JSON.parse($(this).attr("data-judge"))?$(this).addClass("queShitiOptionsR"):(s=!1,$(this).addClass("queShitiOptionsW"))}),$(".queShitiOptions").each(function(){!JSON.parse($(this).attr("data-judge"))&&$(this).hasClass("queShitiOptionsN")&&(s=!1,exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].related=!0),JSON.parse($(this).attr("data-judge"))&&!$(this).hasClass("queShitiOptionsN")&&(s=!1)}),e=e.substring(0,e.length-1);var r={customerOption:e,answerTime:exerciseCommon.means.getNowTime(),exercisesId:t.attr("data-id"),optionCorrect:t.attr("data-correct"),answerId:t.attr("data-ansid"),status:""};if(s){r.status="1",exerciseCommon.work.answerAbout.forbidTest(),clearTimeout(a);var a=setTimeout(function(){if(3==exerciseCommon.parameter.exercisesOptions.type.exam&&3==exerciseCommon.parameter.exercisesOptions.type.page)return exerciseCommon.means.postError(),exerciseCommon.means.updataExercise(!1),!1;if(exerciseCommon.parameter.index==exerciseCommon.parameter.exerciseInfo.length-1){var e=$("#queShiTiRecord");e.hasClass("none")&&$(".queBehNow").trigger("click");var t=$("#queBehavior"),s=$("#quesContainer").height();$("html,body").animate({scrollTop:t.offset().top+s},1e3)}else $(".queBehNext").trigger("click")},400)}else{r.status="0",exerciseCommon.means.related(),exerciseCommon.work.answerAbout.forbidTest();var i={customerId:localStorage.getItem("userId"),exercisesId:t.attr("data-id"),type:"2",customerOption:e};exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.errorExercise,postData:i,success:function(e){}}),comm.guideUser(0),3==exerciseCommon.parameter.exercisesOptions.type.exam&&3==exerciseCommon.parameter.exercisesOptions.type.page&&exerciseCommon.means.postError();
}exerciseCommon.means.statistics.record(r)})},toggleAffirm:function(){var e=$(".queShitiOptionsN").length>0,t=$("#queAffirmButton");e?t.addClass("queButtonBeen"):t.removeClass("queButtonBeen")}},lookAtQueReco:{showRecord:function(){var e=$("#queShiTiRecord"),t=exerciseCommon.means.statistics.filterExeBook().resultStr;e.html(t);var s=$(".queShiTiReLi"),r=$(".queShiTiReIteC");s.each(function(){$(this).unbind("click").bind("click",function(){exerciseCommon.means.clearHtml(),exerciseCommon.parameter.index=parseInt($(this).attr("data-shitiid")),$(".queShiTiReLiT").removeClass("queShiTiReLiT"),s.eq(exerciseCommon.parameter.index).addClass("queShiTiReLiT"),$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.nowIndex=!1}),exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].nowIndex=!0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){exerciseCommon.means.bury({type:"exercise"}),$("#quesContainer").removeClass("none"),$("#queBehavior").removeClass("none"),exerciseCommon.work.changeIndex(),exerciseCommon.work.checkExp(),exerciseCommon.work.lookAtQueReco.productRecord(),exerciseCommon.work.answerAbout.test(),exerciseCommon.means.showNowExercise()}})})}),r.unbind("click").bind("click",function(){exerciseCommon.means.handin()})},productRecord:function(){var e=$("#queShiTiRecord"),t=$(".queBehNow");t.unbind("click").bind("click",function(){e.toggleClass("none"),e.hasClass("none")?exerciseCommon.means.bury({type:"closeRecord"}):(exerciseCommon.means.bury({type:"openRecord"}),exerciseCommon.work.lookAtQueReco.showRecord())})}},removeExercise:function(){$(".queIcoExeriseDel").unbind("click").bind("click",function(){exerciseCommon.means.updataExercise(!0)})},enshrine:function(e){e.find("i").toggleClass("active");var t=e,s=$(".queIteam"),r=e.attr("data-collectid");e.find("i").hasClass("active")?exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.confirmCollect,postData:{refId:s.attr("data-id"),collectionType:"2",customerId:localStorage.getItem("userId"),collectionAnswer:exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].customerOption},success:function(e){var s=e.responseObject.responsePk;t.attr("data-collectid",s),1==exerciseCommon.parameter.exercisesOptions.type.page&&comm.guideUser(1),exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].collectionId=s,exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].collection=!0}}):(t.removeAttr("data-collectid"),s.removeAttr("data-collectid").attr("data-collect",!1),exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].collection=!1,exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.abolishCollect,postData:{id:r},success:function(e){4==exerciseCommon.parameter.exercisesOptions.type.exam&&3==exerciseCommon.parameter.exercisesOptions.type.page&&exerciseCommon.means.updataExercise(!1)}}))},saveProgress:function(e){var t=exerciseCommon.means.statistics.filterExeBook(),s=$(".queIteam"),r={};1==exerciseCommon.parameter.exercisesOptions.type.page&&(r=0==exerciseCommon.parameter.exercisesOptions.type.exam?{customerId:localStorage.getItem("userId"),exercisesList:JSON.stringify(t.saveResult),tollgate:exerciseCommon.parameter.testId,type:"1",isHand:"0",targetExercises:s.attr("data-id")}:{customerId:localStorage.getItem("userId"),exercisesList:JSON.stringify(t.saveResult),seriesDirId:exerciseCommon.parameter.testId,treeLevel:exerciseCommon.parameter.treeleve,type:"2",isHand:"0",targetExercises:s.attr("data-id")}),exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.updateResult,postData:r,success:function(e){}})},checkExp:function(){$(".queBehExp").unbind("click").bind("click",function(){if("none"==$(".discuss-content").css("display")){exerciseCommon.means.related();var e=exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index];if(e.related=!0,"2"==e.status){e.status="0";var t=$(".queIteam"),s={customerId:localStorage.getItem("userId"),exercisesId:t.attr("data-id"),type:"2",customerOption:""},r={customerOption:"",answerTime:exerciseCommon.means.getNowTime(),exercisesId:t.attr("data-id"),optionCorrect:t.attr("data-correct"),answerId:t.attr("data-ansid"),status:"0"};exerciseCommon.means.statistics.record(r),exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.errorExercise,postData:s,success:function(e){t.attr({"data-status":"0"}),exerciseCommon.work.answerAbout.forbidTest(),1==$(".queIteam #queAffirmButton").length&&$(".queIteam #queAffirmButton").hide()}})}}else exerciseCommon.parameter.exerciseInfo[exerciseCommon.parameter.index].related=!1,$(".discussAllList").html("").removeAttr("scrollpagination").removeAttr("data-page"),$(".discuss-content").hide(),$(".course-footer").hide().find(".recommendCont ul").html(""),$(".exercisesAnalysis").hide().html("")})},changeIndex:function(){var e=$(".queBehPre"),t=$(".queBehNext"),s=exerciseCommon.parameter.exerciseInfo.length;e.unbind("click").bind("click",function(){return"block"==$("#yd-shareBox").css("display")&&$("#share").trigger("click"),!$(this).hasClass("queBehPreGray")&&(exerciseCommon.parameter.index--,exerciseCommon.parameter.index<0&&(exerciseCommon.parameter.index=0),exerciseCommon.means.clearHtml(),void exerciseCommon.means.showNowExercise())}),t.unbind("click").bind("click",function(){if("block"==$("#yd-shareBox").css("display")&&$("#share").trigger("click"),exerciseCommon.parameter.index++,exerciseCommon.parameter.index>s-1&&(exerciseCommon.parameter.index=s-1),$(this).attr("data-handin")&&JSON.parse($(this).attr("data-handin"))){if(1!=exerciseCommon.parameter.exercisesOptions.type.page)return!1;exerciseCommon.means.handin()}exerciseCommon.means.clearHtml(),exerciseCommon.means.showNowExercise()})},alertImg:function(e){var t=JSON.parse(e.parent().attr("data-imgbox")),s=parseInt(e.index())+1;return creatCarousel.creatHtml(t,s,"0"),$(".swiper_right").hide(),!1},openOrderBegin:function(){var e=$(".doneNone");if(e.length>0){var t=e.eq(0).prev().offset().top-$(window).scrollTop()-88;$("html,body").animate({scrollTop:$("#quePracticeBegin").offset().top+t},1e3)}$(".ordergate").each(function(){$(this).unbind("click").bind("click",function(){var e=JSON.parse($(this).attr("data-lock")),t=$(this).attr("data-orderid");e?comm.jump($(this),"//www.yi-ding.net.cn/pages/exercises/exercise_order.html?gateId="+t):popup({text:"关卡未解锁，请先完成之前关卡"})})}),$("#quePracticeBegin").removeClass("none")},projectBegin:function(){var e=$(".queSpeciallyIteamTi");$(".queSpeciallyIteamInner").each(function(){$(this).hide()}),$("#queSpecially").removeClass("none"),e.each(function(){$(this).unbind("click").bind("click",function(){$(this).next().toggle(0,function(){$(this).prev().find(".queSpeciallyLiIco").toggleClass("queSpeciallyLiIcoTo"),$(this).prev().find(".queSpeciallyLiIco").hasClass("queSpeciallyLiIcoTo")?commLog.creatEvent({id:199,url:location.href,keyword:"专项练习列表页-课程拓展列表展开",browseType:"31"}):commLog.creatEvent({id:198,url:location.href,keyword:"专项练习列表页-课程拓展列表收起",browseType:"31"})})})});var t=$(".projectToggleHeight");t.length>0?t.trigger("click"):e.eq(0).trigger("click"),$(".queSpeciAnsIteam").each(function(){$(this).unbind("click").bind("click",function(e){e.stopPropagation();var t=$(this).attr("data-seriesid"),s=$(this).attr("data-treeLevel");"0"==$(this).attr("data-treelevel")?commLog.creatEvent({id:196,url:location.href,keyword:"专项练习列表页-系列课回答",browseType:"31"}):commLog.creatEvent({id:197,url:location.href,keyword:"专项练习列表页-章节回答",browseType:"31"}),comm.jump($(this),"//www.yi-ding.net.cn/pages/exercises/exercise_project.html?&gateId="+t+"&treeLevel="+s)})})}},template:{exercise:function(){var e=exerciseCommon.parameter.index,t=exerciseCommon.parameter.exerciseInfo[e],s="",r=t.exerciseId,a=t.title+exerciseCommon.template.richImg(t.exercisesNameAtt),i=t.optionCorrect,o=t.collectionId.length>0,n=t.collectionId,c=t.customerOption,m=t.type,l=t.answerId,p=t.errorId,d="",u="",x="",h="queOneCheck",C="queNoStatus",g="",f="",w="2",y=t.collection;if(1==m?(d="1",x="单"):2==m?(d="2",x="多",h="queMoreCheck",C="queNoStatus queMultiple",1==exerciseCommon.parameter.exercisesOptions.type.page&&2==t.status&&(f="<section id='queAffirm'class='queAffirmContainer'><div id='queAffirmButton'class='queButton queButtonReady'style='display: block;'>确认答案</div></section>"),3==exerciseCommon.parameter.exercisesOptions.type.page&&3==exerciseCommon.parameter.exercisesOptions.type.exam&&(f="<section id='queAffirm'class='queAffirmContainer'><div id='queAffirmButton'class='queButton queButtonReady'style='display: block;'>确认答案</div></section>")):3==m&&(d="3",x="判"),t.material&&(u+="<article class='queMaterial'>"+t.material+exerciseCommon.template.richImg(t.materialImg)+"</article>"),c.length>0){w="1";var v=c.split(",")}$.each(t.options,function(e,t){var s=this,r=1==s.isAnswer,a=s.optionTitle,i=s.optionId,o="";"1"==w&&$.each(v,function(e,t){i==t&&(r?o="queShitiOptionsR":(w="0",o="queShitiOptionsW"))});var n=s.optionDesc+exerciseCommon.template.richImg(s.optionDescAtt);g+='<div class="queShitiOptions '+o+'" data-opId="'+i+'" data-judge="'+r+'" data-arrange="'+a+'"><i class="'+C+'">'+a+"</i><div class='anwercont'><div class='answercontText'>"+n+"</div></div></div>"});var I="",k="";y&&(I="active",k=n);var q="";q="none";var b="<header id='questionsHd'class='questionsHeader'><span class='queIcoClose mobileMobule'><i></i></span><span class='queHdIteam   queIcoTitle'>"+exerciseCommon.parameter.exercisesOptions.type.name+"</span><span class=' queIcoShare mobileMobule'><i></i></span><span class='queIcoCollect' data-collectId='"+k+"'  onclick='exerciseCommon.work.enshrine($(this))'><i class='"+I+"'></i><span class='queName'>收藏</span></span><div class='saveTime "+q+"' onclick='exerciseCommon.work.saveProgress();'><i></i><span>保存</span><span>进度</span></div></header>";return s="<li class='queIteam "+h+"' data-collectid='"+n+"' data-correct='"+i+"' data-status='"+w+"' data-errorid='"+p+"' data-collect='"+o+"' data-customeroption='"+c+"' data-ansid='"+l+"' data-type='"+d+"' data-id='"+r+"' data-nowqueindex='"+exerciseCommon.parameter.index+"'>"+b+u+"<article class='quesSingle'><div class='queShitiTitle'><span class='queShitiType'>"+x+"</span><div class='queShiticont'><div class='queShiticontText'>"+a+"</div></div></div><div class='queShitiOptionsContent'>"+g+"</div></article>"+f+"</li>"},solution:function(){var e=exerciseCommon.parameter.index,t=exerciseCommon.parameter.exerciseInfo[e],s=t.ansExp.length>184?"<div class='aAnalysis_text'><span class='aAnalysis_textSpan courseHidden'>"+t.ansExp+"</span><p class='coursePic-right icon-upMore' onclick='exerciseCommon.means.toggleHeight($(this).prev());'><i></i><span>展开</span></p></div>":"<div class='aAnalysis_text'><span class='aAnalysis_textSpan'>"+t.ansExp+"</span></div>",r="",a="",i="",o=!1,n=!0;$(".queShitiOptions").each(function(){var e=JSON.parse($(this).attr("data-judge")),t=$(this).hasClass("queShitiOptionsN")||$(this).hasClass("queShitiOptionsW")||$(this).hasClass("queShitiOptionsR"),s=$(this).hasClass("queShitiOptionsW");e&&(a+=$(this).attr("data-arrange")),t&&(o=!0,i+=$(this).attr("data-arrange")),s&&(n=!1)});var c="";o&&(c=n?"<span class='trueAswer'>你的答案："+i+"</span>":"<span class='falseAswer'>你的答案："+i+"</span>"),$.each(t.konwledgeDot,function(e,t){r+='<li data-knoId="'+this.knowledgeId+'">'+this.knowledgeName+"</li>"});var m=t.konwledgeDot.length>0?"":"none";return"<div class='answerATitle'><span>答案解析</span></div><div class='aswerDisplay'><span class='trueAswer'>正确答案："+a+"</span>"+c+"</div>"+s+"<div class='knowledgePoint "+m+"' ><div class='title'>知识点：</div><ul class='knowledgeList clear'>"+r+"</ul></div>"},recommend:function(e){var t=e.responseObject.responseData.data_list,s="";return $.each(t,function(e,t){var r=this.recommendResource.courseId,a=this.recommendResource.videoAttUrl,i=this.recommendResource.playTime,o=this.recommendResource.courseTitle,n=this.recommendResource.pageStoragePath;s+='<li><div class="reImg videoSrc" data-courseid="'+r+'"><img src="'+a+'"><div class="playIcon"  data-videoSrc="'+n+'" onclick=\'exerciseCommon.means.openRecommend($(this))\'></div><div class="timeNum">'+i+'</div></div><div class="reText">'+o+"</div></li>"}),s},richImg:function(e){var t="";if(void 0!=e&&e.length>0){for(var s=[],r=e.split("|"),a=0;a<r.length;a++)s[a]={},s[a].src=r[a],t+='<li class="queImgAlert" style="float: left;margin-right: 10px;" onclick=\'exerciseCommon.work.alertImg($(this));\'><img src="'+r[a]+'" style="width: 200px;height: 200px;"> </li>';t='<ul style="clear: both;" class="clear" data-imgBox=\''+JSON.stringify(s)+"'>"+t+"</ul>"}return t},projectBegin:function(e){var t=e.responseObject.responseData.data_list,s="",r=e.responseObject.responseData.position.seriesDirId;return $.each(t,function(e,t){var a=this.seriesDirTitle,i=this.exercisesNum,o=this.seriesDirId,n=this.treeLevel,c="";r==o&&(c="projectToggleHeight"),s+='<li class="queSpeciallyIteam"><section class="queSpeciallyIteamTi '+c+'"><div class="queSpeciallyIteamNa fl"><span class="queSpeciallyLiName">'+a+'</span><span class="queSpeciallyLiSum">(共'+i+'题)</span></div><div class="queSpeciallyIteamAn fr"><span class="queSpeciallyLiAns queSpeciAnsIteam" data-treeLevel="'+n+"\" data-seriesId='"+o+'\'>答题</span><span class="queSpeciallyLiIco"></span></div></section>';var m="";this.child_map.length>0&&(m='<ul class="queSpeciallyIteamInner" data-alcode-sm=\'content-'+e+"'>",$.each(this.child_map,function(e,t){var s=this,r=s.seriesDirTitle,a=s.exercisesNum,i=s.seriesDirId,o=s.treeLevel;m+='<li class="queSpeciInnerLi"><div class="queSpeciInnerLiNa fl"><span class="queSpeciInnerLiName">'+r+'</span><span class="queSpeciInnerLiSum">(共'+a+'题)</span></div><div class="queSpeciInnerLiAn fr"><span class="queSpeciInnerLiAns queSpeciAnsIteam"  data-treeLevel="'+o+"\"  data-seriesId='"+i+"'>答题</span></div></li>"}),m+="</ul>"),s+=m+"</li>"}),s},orderBegin:function(e){var t=e.responseObject.responseData.data_list,s="";return $.each(t,function(e,t){var r=parseInt(this.tollgateStatus),a="",i=!0,o="ordergate",n=this.tollgateId,c=this.tollgateName;if(0==r)o="ordergate doneNone",i=!1,a+='<figure class="starLight"><img src="/image/categrey/main_lock.png"> </figure>';else{for(var m=0;m<r-1;m++)a+='<figure class="starLight"><img src="/image/categrey/main_star.png"></figure>';for(var l=0;l<4-r;l++)a+='<figure class="starGrey"><img src="/image/categrey/main_star_def.png"></figure>'}s+="<li class='"+o+"'    data-orderid=\""+n+'" data-lock="'+i+'" ><div class="passNum">'+c+'</div><div class="passStar">'+a+'</div><div class="passAnswer"  data-lock="'+i+'" data-orderid="'+n+'">回答</div></li>'}),s}},analysis:function(e){switch(exerciseCommon.parameter.exercisesOptions=e,comm.pcSideModule([{item:"",href:"",active:!1},{item:"",href:"",active:!1},{item:"",href:"",active:!1},{item:"",href:"",active:!1}]),exerciseCommon.means.bury({type:"page"}),e.type.page){case 0:switch(e.type.exam){case 0:exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.orderBegin,postData:e.initData,success:function(e){exerciseCommon.means.demoData({type:"html",container:$("#practiceInnerContainer"),judge:!0,str:exerciseCommon.template.orderBegin(e),strCallBack:function(){exerciseCommon.work.openOrderBegin();var e=$(".ordergate[data-lock='false']").eq(0),t=e.offset().top;$("html,body").animate({scrollTop:t},1e3)}})}});break;case 1:exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.projectBegin,postData:e.initData,success:function(e){exerciseCommon.means.demoData({type:"html",container:$(".queSpeciallyList"),judge:!0,str:exerciseCommon.template.projectBegin(e),strCallBack:function(){exerciseCommon.work.projectBegin()}})}});break;case 2:}break;case 1:switch(window.Onunload=window.onbeforeunload=function(){exerciseCommon.parameter.isHand&&exerciseCommon.work.saveProgress()},e.type.exam){case 0:exerciseCommon.means.share(),exerciseCommon.parameter.testId=e.initData.exercisesTollgate,exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.exercise,postData:e.initData,success:function(t){var s=exerciseCommon.means.checkExerciseData(t),r=exerciseCommon.means.checkLocalData("order",e.initData.exercisesTollgate),a=exerciseCommon.means.compareData(s,r);exerciseCommon.parameter.exerciseInfo=a.exerciseData,localStorage.setItem("order"+e.initData.exercisesTollgate,JSON.stringify(exerciseCommon.parameter.exerciseInfo));var i=a.goOn;i?exerciseCommon.means.continueTest():(exerciseCommon.parameter.index=0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){$("#quesContainer").removeClass("none"),$("#queBehavior").removeClass("none"),exerciseCommon.work.changeIndex(),exerciseCommon.work.checkExp(),exerciseCommon.work.lookAtQueReco.productRecord(),exerciseCommon.means.showNowExercise(),exerciseCommon.work.answerAbout.test()}}))},failed:function(){}});break;case 1:exerciseCommon.means.share(),exerciseCommon.parameter.testId=e.initData.seriesDirId,exerciseCommon.parameter.treeleve=e.initData.treeLevel,exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.exercise,postData:e.initData,success:function(t){var s=exerciseCommon.means.checkExerciseData(t),r=exerciseCommon.means.checkLocalData("project",e.initData.seriesDirId),a=exerciseCommon.means.compareData(s,r);exerciseCommon.parameter.exerciseInfo=a.exerciseData,localStorage.setItem("project"+e.initData.seriesDirId,JSON.stringify(exerciseCommon.parameter.exerciseInfo));var i=a.goOn;i?exerciseCommon.means.continueTest():(exerciseCommon.parameter.index=0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){$("#quesContainer").removeClass("none"),$("#queBehavior").removeClass("none"),exerciseCommon.work.changeIndex(),exerciseCommon.work.checkExp(),exerciseCommon.work.lookAtQueReco.productRecord(),exerciseCommon.means.showNowExercise(),exerciseCommon.work.answerAbout.test()}}))},failed:function(){}});break;case 2:}break;case 2:var t=$(".queResultProCoTitle"),s=$(".resultStar"),r=$(".queResultCareRe"),a=$(".queResultShareMor");switch(e.type.exam){case 0:exerciseCommon.parameter.testId=e.initData.exercisesTollgate,exerciseCommon.means.share(),e.initData.radial.isIe?$(".queResultProCoHd").before('<div class="queResultImg"><img src="/image/exercises/answerresult'+e.initData.radial.ieBack+'.png"> </div>'):exerciseCommon.means.initProgress(e.initData.radial.angle),t.html(e.initData.resUltStr),s.html(e.initData.startStr),a.html(e.initData.nextGate.againStr).attr({"data-url":e.initData.nextGate.nextUrl}).unbind("click").bind("click",function(){comm.jump($(this),$(this).attr("data-url"))}),r.unbind("click").bind("click",function(){comm.jump($(this),"//www.yi-ding.net.cn/pages/exercises/exercise_suit_exhibition.html?gateId="+e.initData.nextGate.nowGate)}),e.initData.wrongOnOff?$(".queResultCareWr").find("img").attr({src:"/image/exercises/main_view_results-def@2x.png"}).unbind("click"):$(".queResultCareWr").unbind("click").bind("click",function(){comm.jump($(this),"//www.yi-ding.net.cn/pages/exercises/exercise_suit_wrong.html?gateId="+e.initData.nextGate.nowGate)}),a.unbind("click").bind("click",function(){e.initData.nextGate.forbid?popup({text:"关卡未解锁，请先完成之前关卡"}):comm.jump($(this),$(this).attr("data-url"))});break;case 1:exerciseCommon.parameter.testId=e.initData.exercisesTollgate,exerciseCommon.parameter.treeleve=e.initData.treeLevel,exerciseCommon.means.share(),e.initData.radial.isIe?$(".queResultProCoHd").before('<div class="queResultImg"><img src="/image/exercises/answerresult'+e.initData.radial.ieBack+'.png"> </div>'):exerciseCommon.means.initProgress(e.initData.radial.angle),t.html(e.initData.resUltStr),a.html(e.initData.nextGate.againStr).attr({"data-url":e.initData.nextGate.nextUrl}).unbind("click").bind("click",function(){comm.jump($(this),$(this).attr("data-url"))}),r.unbind("click").bind("click",function(){comm.jump($(this),"//www.yi-ding.net.cn/pages/exercises/exercise_suit_exhibition.html?gateId="+e.initData.nextGate.nowGate)}),e.initData.wrongOnOff?$(".queResultCareWr").find("img").attr({src:"/image/exercises/main_view_results-def@2x.png"}).unbind("click"):$(".queResultCareWr").unbind("click").bind("click",function(){comm.jump($(this),"//www.yi-ding.net.cn/pages/exercises/exercise_suit_wrong.html?gateId="+e.initData.nextGate.nowGate)}),a.unbind("click").bind("click",function(){comm.jump($(this),$(this).attr("data-url"))});break;case 2:}break;case 3:switch(e.type.exam){case 1:exerciseCommon.means.share(),exerciseCommon.parameter.testId=e.initData.exercisesTollgate,exerciseCommon.parameter.exerciseInfo=exerciseCommon.means.checkLocalData("review",e.initData.exercisesTollgate),$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.related=!0}),exerciseCommon.parameter.index=0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){exerciseCommon.means.bury({type:"exercise"}),$("#quesContainer").removeClass("none"),$("#queBehavior").removeClass("none"),exerciseCommon.work.changeIndex(),exerciseCommon.work.checkExp(),exerciseCommon.work.lookAtQueReco.productRecord(),exerciseCommon.means.showNowExercise(),exerciseCommon.work.answerAbout.forbidTest()}});break;case 2:exerciseCommon.means.share(),exerciseCommon.parameter.testId=e.initData.exercisesTollgate,exerciseCommon.parameter.exerciseInfo=exerciseCommon.means.filterWrongData(exerciseCommon.means.checkLocalData("review",e.initData.exercisesTollgate)),$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.related=!0}),exerciseCommon.parameter.index=0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){exerciseCommon.means.bury({type:"exercise"}),$("#quesContainer").removeClass("none"),$("#queBehavior").removeClass("none"),exerciseCommon.work.changeIndex(),exerciseCommon.work.checkExp(),exerciseCommon.work.lookAtQueReco.productRecord(),exerciseCommon.means.showNowExercise(),exerciseCommon.work.answerAbout.forbidTest()}});break;case 3:exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.exercise,postData:e.initData,success:function(e){exerciseCommon.parameter.exerciseInfo=exerciseCommon.means.checkExerciseData(e),exerciseCommon.parameter.index=0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){exerciseCommon.means.bury({type:"exercise"}),$("#quesContainer").removeClass("none"),$("#queBehavior").removeClass("none"),exerciseCommon.work.changeIndex(),exerciseCommon.work.checkExp(),exerciseCommon.work.lookAtQueReco.productRecord(),exerciseCommon.means.showNowExercise(),exerciseCommon.work.answerAbout.test(),exerciseCommon.work.removeExercise()}})},failed:function(){}});break;case 4:exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.exercise,postData:e.initData,success:function(e){exerciseCommon.parameter.exerciseInfo=exerciseCommon.means.checkExerciseData(e),$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.related=!0}),exerciseCommon.parameter.index=0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){exerciseCommon.means.bury({type:"exercise"}),$("#quesContainer").removeClass("none"),$("#queBehavior").removeClass("none"),exerciseCommon.work.changeIndex(),exerciseCommon.work.checkExp(),exerciseCommon.work.lookAtQueReco.productRecord(),exerciseCommon.means.showNowExercise(),exerciseCommon.work.answerAbout.forbidTest()}})},failed:function(){}});break;case 5:exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.h5exercise,postData:e.initData,success:function(t){exerciseCommon.parameter.exerciseInfo=exerciseCommon.means.checkExerciseData(t),exerciseCommon.parameter.index=0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){return exerciseCommon.means.bury({type:"exercise"}),$("#quesContainer").removeClass("none"),$("#questionsHd").remove(),exerciseCommon.work.answerAbout.forbidTest(),!pcOrH5.pc()&&void $(document).unbind("click").bind("click",function(){var t={el:$(this),ios:"yiding://net.yi-ding.ios",ios9:"https://app.yi-ding.net.cn/applinks.html",android:"yiding://cn.net.yiding"};H5scene.goApp(t,e.appData)})}})},failed:function(){}});break;case 6:exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.h5exercise,postData:e.initData,success:function(t){exerciseCommon.parameter.exerciseInfo=exerciseCommon.means.checkExerciseData(t),exerciseCommon.parameter.index=0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){return exerciseCommon.means.bury({type:"exercise"}),$("#quesContainer").removeClass("none"),$("#questionsHd").remove(),exerciseCommon.work.answerAbout.forbidTest(),!pcOrH5.pc()&&void $(document).unbind("click").bind("click",function(){var t={el:$(this),ios:"yiding://net.yi-ding.ios",ios9:"https://app.yi-ding.net.cn/applinks.html",android:"yiding://cn.net.yiding"};H5scene.goApp(t,e.appData)})}})},failed:function(){}});break;case 9:exerciseCommon.means.applyData({port:exerciseCommon.parameter.applyDataPort.exercise,postData:e.initData,success:function(e){exerciseCommon.parameter.exerciseInfo=exerciseCommon.means.checkExerciseData(e),$.each(exerciseCommon.parameter.exerciseInfo,function(e,t){this.related=!0}),exerciseCommon.parameter.index=0,exerciseCommon.means.demoData({container:$("#queInnerContent"),type:"html",judge:!0,str:exerciseCommon.template.exercise(),strCallBack:function(){exerciseCommon.means.bury({type:"exercise"}),$("#quesContainer").removeClass("none"),exerciseCommon.work.checkExp(),exerciseCommon.means.showNowExercise(),exerciseCommon.work.answerAbout.forbidTest()}})},failed:function(){}})}}},parameter:{applyDataPort:{removeWrong:"//www.yi-ding.net.cn/call/customer/exercises/updateError/",share:"//www.yi-ding.net.cn/call/yiding/comm/data/share/getMapList/",h5exercise:domain.changeUrl("//m.yi-ding.net.cn/mcall/customer/exercises/createExampaper/"),confirmCollect:"//www.yi-ding.net.cn/call/customer/collection/create/",abolishCollect:"//www.yi-ding.net.cn/call/customer/collection/delete/",errorExercise:"//www.yi-ding.net.cn/call/customer/exercises/createError/",projectBegin:"//www.yi-ding.net.cn/call/cms/series/dir/getSpecialMapList/",orderBegin:"//www.yi-ding.net.cn/call/customer/exercises/getSequenceMapList/",exerciseContinue:"//www.yi-ding.net.cn/call/customer/exercises/getCustomerStatus/",recommend:"//www.yi-ding.net.cn/call/customer/exercises/getRecommendList/",exercise:"//www.yi-ding.net.cn/call/customer/exercises/createExampaper/",updateResult:"//www.yi-ding.net.cn/call/customer/exercises/updateResult/",exercisesOptions:{}},isHand:!0,treeleve:"",testId:"",exerciseInfo:[],exerciseBook:{},index:""}};