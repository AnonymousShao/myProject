"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}function this_value(){return this.valueOf()}function quote(t){return rx_escapable.lastIndex=0,rx_escapable.test(t)?'"'+t.replace(rx_escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var r,n,o,u,f,a=gap,i=e[t];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(t)),"function"==typeof rep&&(i=rep.call(e,t,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,f=[],"[object Array]"===Object.prototype.toString.apply(i)){for(u=i.length,r=0;r<u;r+=1)f[r]=str(r,i)||"null";return o=0===f.length?"[]":gap?"[\n"+gap+f.join(",\n"+gap)+"\n"+a+"]":"["+f.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(u=rep.length,r=0;r<u;r+=1)"string"==typeof rep[r]&&(n=rep[r],o=str(n,i),o&&f.push(quote(n)+(gap?": ":":")+o));else for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(o=str(n,i),o&&f.push(quote(n)+(gap?": ":":")+o));return o=0===f.length?"{}":gap?"{\n"+gap+f.join(",\n"+gap)+"\n"+a+"}":"{"+f.join(",")+"}",gap=a,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;n<r;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var r,n,o=t[e];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n=walk(o,r),void 0!==n?o[r]=n:delete o[r]);return reviver.call(t,e,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();
var talk={init:function(e){this.container=e.container,this.postData=e.postData,this.success=e.success,this.failed=e.failed,this.type=e.type,this.onOperate=e.onOperate,this.noApprove=e.approve,this.noLogin=e.login,this.noData=e.nothing,this.sortType=e.sortType,this.initModel=e.initDisscuss,this.reviewType=e.reviewType,this.refId=e.refId,this.scene=e.scene,this.applyData(this.type,this.postData),this.approve=e.approve,this.about=e.about},about:null,type:null,approve:null,publicModel:'<div class="discussPublish pcModule" style=\'display: block\'><textarea placeholder="请输入你想说的话"></textarea><div class="uploadImg" style="display: none;"><ul class="uploadImgContainer"></ul><div class="imgNum">还能添加9张图片</div></div><div class="discussPublishImg"><form class="uploadIcon uploadPic" method="POST" enctype="multipart/form-data">图片<input type="file" class="postPicButton" name="file" style="font-size: 12px; cursor: pointer; position: absolute; left: 0px; opacity: 0; outline: none; width: 50px; height: 30px;"></form><div class="uploadBut"><button class="al-commentCancel evReviewBoxCancel">取消</button><button class="al-commentCommit evReviewBoxSubmit fb_but" >发表</button></div></div></div>',noLogin:"",noApprove:"",noData:"",initModel:"",port:"//www.yi-ding.net.cn/call/customer/review/json_list/",postData:{},container:null,reviewType:"",refId:"",scene:"",discussLen:null,htmlToString:function(e){var t=(e+"").replace(/[<>&]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[e]}),a=t.split("&lt;/a&gt;&lt;a");return t=a.length>=2?a.map(function(e,t){var a=e.replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2');return a=a.replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)&lt\;\/a\&gt\;/gi,' href="$1">$2</a>')}).join("</a><a"):(t+"").replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)\&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>'),t=t.replace(/@@/g,"@")},toWK:function(e){return isNaN(parseInt(e))?0:parseInt(e)<1e4&&parseInt(e)>999?Math.floor(parseInt(e)/1e3)+"千+":parseInt(e)>9999?Math.floor(parseInt(e)/1e4)+"万+":e},applyData:function(e,t){var a={paramJson:$.toJSON(t)};$.ajax({url:talk.port,dataType:"json",async:!0,data:a,type:"POST",beforeSend:function(){comm.loading.show()},success:function(t){comm.loading.hide(),talk.spreadDiscuss(e,t)},complete:function(){},error:function(){}})},scrollOnOff:function(e,t,a){t?e.find(".discussAllList").attr("scrollPagination","disabled").off("scroll"):(e.find(".discussAllList").attr("scrollPagination","enabled"),talk.scrollPage(e.find(".discussAllList"),a))},createDiscuss:function(e){function t(e){return e.length>0}var a=e.responseObject.responseData.data_list,i=("NO DATA"==e.responseObject.responseMessage,e.responseObject.responseStatus,a),s=e.responseObject.responseData.total_count;talk.discussLen=s;for(var n="",r="",o='<div class="time"></div>',l="",c='<div class="userImg"><img src="" alt=""></div>',d="",u="",m="",p="<dt></dt>",g="",f='<dt class="list-name"><i class="icon-vip"></i></dt>',v="",h='<div class="praise"><i></i><span></span></div>',w="",y='<div class="discussThink context"></div>',I="",b="",k="",T={},x=[],D=($(".discuss-content .discussAllList"),0);D<i.length;D++){var S=i[D].reviewStatus;T["imgIte"+D]=[],x[D]={},x[D].imgData=[];for(var O=0;O<i[D].attachment_list.length;O++)x[D].imgData[O]={},x[D].imgData[O].time=i[D].attachment_list[O].attachment.uploadTime,x[D].imgData[O].name="",x[D].imgData[O].src=i[D].attachment_list[O].attachment.reviewAttUrl,T["imgIte"+D][O]=i[D].attachment_list[O].attachment.reviewAttUrl;var C=T["imgIte"+D].length,N="";if("该条评论已被作者删除"!=i[D].reviewContent)switch(T["imgIte"+D].length){case 0:break;case 1:N='<ul class="oneAds" data-imgData=\''+JSON.stringify(x[D].imgData)+"'><li><img src=\""+T["imgIte"+D][0]+'"> </li></ul>';break;case 2:N='<ul class="moreAds" data-imgData=\''+JSON.stringify(x[D].imgData)+"'><li><img src=\""+T["imgIte"+D][0]+'"></li><li><img src="'+T["imgIte"+D][1]+'"></li></ul>';break;case 3:N='<ul class="moreAds" data-imgData=\''+JSON.stringify(x[D].imgData)+"'><li><img src=\""+T["imgIte"+D][0]+'"></li><li><img src="'+T["imgIte"+D][1]+'"></li><li><img src="'+T["imgIte"+D][2]+'"></li></ul>';break;case 4:case 5:case 6:case 7:case 8:case 9:var j=C-3;N='<ul class="moreAds" data-imgData=\''+JSON.stringify(x[D].imgData)+"'><li><img src=\""+T["imgIte"+D][0]+'"></li><li><img src="'+T["imgIte"+D][1]+'"></li><li><img src="'+T["imgIte"+D][2]+'"><div class="numImg"></div><i><span>还有'+j+"张</span></i></li></ul>"}i[D].id&&t(i[D].id)&&(b=i[D].id),i[D].createTime&&t(i[D].createTime)&&(r=comm.date.diffDay_one(i[D].createTime,comm.date.local_time()),o='<div class="time">'+r+"</div>");var A="https://www.yi-ding.net.cn/image/authority/login/normalImg.png";i[D].customerLogoUrl&&t(i[D].customerLogoUrl)?(l=i[D].customerLogoUrl,c='<div class="userImg"><img src="'+l+'" alt=""></div>'):c='<div class="userImg"><img src="'+A+'" alt=""></div>',i[D].customerId&&t(i[D].customerId)&&(d=i[D].customerId);var B="",U="",L="";if(i[D].parentCustomerName.length>0&&(L=i[D].parentCustomerName+":"),"该条评论已被作者删除"==i[D].parentReviewContent&&(L=""),i[D].parentReviewContent)if(t(i[D].parentReviewContent)){k=i[D].parentReviewContent;var P="";P="0"!=i[D].parentId?"":i[D].refBelongId.length>0?i[D].refBelongId:"",B="0"==i[D].parentId?'<div class="previousDiscuss previousDiscussOverflow"  data-refBelongId=\''+P+"' data-review=\""+i[D].id+'">'+L+talk.htmlToString(k)+"</div>":'<div class="previousDiscuss previousDiscussOverflow"  data-refBelongId=\''+P+"' data-review=\""+i[D].parentId+'">'+L+talk.htmlToString(k)+"</div>",U='<div class="checkDiscuss context" data-review="'+b+'">查看讨论</div>'}else B=0==i[D].parentId?'<div class="previousDiscuss  previousDiscussOverflow lucency"  data-refBelongId=\''+P+"' data-review=\""+i[D].id+"\" style='display: none'>"+talk.htmlToString(k)+"</div>":'<div class="previousDiscuss  previousDiscussOverflow lucency"  data-refBelongId=\''+P+"' data-review=\""+i[D].parentId+"\" style='display: none'>"+talk.htmlToString(k)+"</div>",U='<div class="checkDiscuss lucency context" data-review="'+b+'">查看讨论</div>';else B=0==i[D].parentId?'<div class="previousDiscuss previousDiscussOverflow lucency"  data-refBelongId=\''+P+"' data-review=\""+i[D].id+"\" style='display: none'>"+talk.htmlToString(k)+"</div>":'<div class="previousDiscuss previousDiscussOverflow lucency"  data-refBelongId=\''+P+"' data-review=\""+i[D].parentId+"\" style='display: none'>"+talk.htmlToString(k)+"</div>",U='<div class="checkDiscuss lucency context" data-review="'+b+'">查看讨论</div>';i[D].reviewNum&&t(i[D].reviewNum)&&(u=i[D].reviewNum,u="0"==u?"回复":talk.toWK(i[D].reviewNum)),i[D].customerName&&t(i[D].customerName)?(g=i[D].customerName,f=2==i[D].customerState||1==i[D].customerState?'<dt class="list-name">'+g+'<i class="icon-vip"></i></dt>':'<dt class="list-name">'+g+"<i></i></dt>"):f='<dt class="list-name lucency">暂未认证<i></i></dt>',i[D].customerCompany&&t(i[D].customerCompany)?(m=i[D].customerCompany,p="<dt>"+m+"</dt>"):p="<dt class='lucency'>暂未认证</dt>";var _="";"1"==i[D].isPrefer&&(_="selected"),i[D].upNum&&t(i[D].upNum)&&(v=i[D].upNum,v="0"==v?"点赞":talk.toWK(v),"0"==i[D].isPrefer?h='<div class="praise"    data-discussid=\''+b+"'><i></i><span>"+v+"</span></div>":("点赞"==v&&(v=1),h='<div class="praise"    data-discussid=\''+b+"'><i class='"+_+"'  data-praiseid='"+i[D].preferId+"'></i><span>"+v+"</span></div>")),i[D].reviewContent&&t(i[D].reviewContent)?(w=i[D].reviewContent,y='<div class="discussThink context"  data-review="'+b+'">'+talk.htmlToString(w)+"</div>"):y='<div class="discussThink context"  data-review="'+b+'"></div>',i[D].medicalTitle&&t(i[D].medicalTitle)&&(I=i[D].medicalTitle,p="<dt>"+m+"</dt>"),n+='<li class="disscussIteam clear" data-userId=\''+d+"' data-isvalid='"+S+'\'><div class="userTime clear"><div class="userCont clear"  data-cusid=\''+d+"'>"+c+"<dl>"+f+p+"</div>"+o+"</div>"+B+y+'<div class="discussAds"   data-discussid=\''+b+"'>"+N+'</div><div class="clear"><div class="discussDelete none"     data-discussid=\''+b+"'>删除</div>"+U+'<div class="disscussFunction clear"><div class="aswer"    data-discussid=\''+b+"' data-refBelongId='"+i[D].refBelongId+"'><i></i><span>"+u+"</span></div>"+h+"</div></div></li>"}return n},spreadDiscuss:function(e,t){var a=(t.responseObject.responseData.data_list,"NO DATA"==t.responseObject.responseMessage),i=t.responseObject.responseStatus;switch(e){case"disscuss":a||!i?("course"==talk.about?talk.container.find(".discuss-content .discussAllList").attr({scrollpagination:"disabled"}):talk.container.attr({scrollpagination:"disabled"}),this.failed&&this.failed()):t.responseObject.responseData.data_list.length>0&&this.success&&this.success(talk.createDiscuss(t),t.responseObject.responseData.data_list[0].refId);break;case"disscussLine":talk.createDiscussLine(t)}},createDiscussLine:function(e){function t(e){return e.length>0}talk.onOperate&&talk.onOperate(),"course"==talk.about?commLog.creatEvent({id:159,url:window.location.href,keyword:"课程终端页呼出对划线",browseType:"38",browseTypeSourceUrl:window.location.href}):commLog.creatEvent({id:76,url:window.location.href,keyword:"习题讨论呼出对划线",browseType:"34",browseTypeSourceUrl:window.location.href}),comm.maskBackground.show("rgba(0,0,0,.6)");var a=$(".yd-maskBackground"),i=e.responseObject.responseData.data_list,s="",n={},r="",o="",l="",c="",d="",u="",m="",p="",g="",f="",v="",h="",w="",y="",I="",b=[],k="",T="",x=!0;e.responseObject.responseData.head_message&&(T=e.responseObject.responseData.head_message.questionName,x=!1);var D=e.responseObject.responseData.belongTitle||T,S="";e.responseObject.responseData.head_message&&(S=e.responseObject.responseData.head_message.courseTitle);var O=e.responseObject.responseData.title||S,C="";O.length>0&&(C+='<header class="yd-timelineTitle"><h2>'+O+'</h2><a class="btn-primary al-timelineFollow"></a></header>'),0==D.length&&(k="lucency");for(var N=0;N<i.length;N++){i[N].reviewStatus;n["imgIte"+N]=[],b[N]={},b[N].imgData=[];for(var j=0;j<i[N].attachment_list.length;j++)b[N].imgData[j]={},b[N].imgData[j].time=i[N].attachment_list[j].attachment.uploadTime,b[N].imgData[j].name="",b[N].imgData[j].src=i[N].attachment_list[j].attachment.reviewAttUrl,n["imgIte"+N][j]=i[N].attachment_list[j].attachment.reviewAttUrl;var A="",B=n["imgIte"+N].length;if("该条评论已被作者删除"!=i[N].reviewContent)switch(n["imgIte"+N].length){case 0:break;case 1:A='<section class="yd-timelineImgBox" data-discussid=\''+i[N].id+"' data-imgData='"+JSON.stringify(b[N].imgData)+'\'><figure class="yd-timelineImg"><img src="'+n["imgIte"+N][0]+'" alt=""></figure></section>';break;case 2:A='<section class="yd-timelineImgBox" data-discussid=\''+i[N].id+"' data-imgData='"+JSON.stringify(b[N].imgData)+'\'><figure class="yd-timelineImg"><img src="'+n["imgIte"+N][0]+'" alt=""></figure><figure class="yd-timelineImg"><img src="'+n["imgIte"+N][1]+'" alt=""></figure></section>';break;case 3:A='<section class="yd-timelineImgBox" data-discussid=\''+i[N].id+"' data-imgData='"+JSON.stringify(b[N].imgData)+'\'><figure class="yd-timelineImg"><img src="'+n["imgIte"+N][0]+'" alt=""></figure><figure class="yd-timelineImg"><img src="'+n["imgIte"+N][1]+'" alt=""></figure><figure class="yd-timelineImg"><img src="'+n["imgIte"+N][2]+'" alt=""></figure></section>';break;case 4:case 5:case 6:case 7:case 8:case 9:var U=B-3;A='<section class="yd-timelineImgBox" data-discussid=\''+i[N].id+"'     data-imgData='"+JSON.stringify(b[N].imgData)+'\'><figure class="yd-timelineImg"><img src="'+n["imgIte"+N][0]+'" alt=""></figure><figure class="yd-timelineImg"><img src="'+n["imgIte"+N][1]+'" alt=""></figure><figure class="yd-timelineImg"><img src="'+n["imgIte"+N][2]+'" alt=""><figure class="yd-moreImgMask"><p>还有<span>'+U+'</span>张<i class="icon-detailsArrow"></i></p></figure></figure></section>'}i[N].id&&t(i[N].id)&&(r=i[N].id),i[N].createTime&&t(i[N].createTime)&&(o=comm.date.diffDay_one(i[N].createTime,comm.date.local_time()),l='<p class="yd-timelineTime">'+o+"</p>");var L="//www.yi-ding.net.cn/image/authority/login/normalImg.png",P="";if(i[N].customerLogoUrl&&t(i[N].customerLogoUrl)?(c=i[N].customerLogoUrl,P=loginAbout.login.status().userId==i[N].customerId?"javascript:void(0)":"https://www.yi-ding.net.cn//pages/personal/others_index.html?cId="+i[N].customerId,d='<a href="'+P+"\" target='_blank'><img src=\""+c+'" alt=""></a>'):d='<a href="'+P+"\" target='_blank'><img src=\""+L+'" alt=""></a>',i[N].customerId&&t(i[N].customerId)&&(u=i[N].customerId),i[N].reviewContent){if(t(i[N].reviewContent)){var _=i[N].parentCustomerName;m=i[N].reviewContent,s=""!=_?'<article class="yd-timelineContentText"><a href="javascript:void(0)">回复给'+_+"：</a>"+talk.htmlToString(m)+A+"</article>":'<article class="yd-timelineContentText"><a href="javascript:void(0)">'+_+"</a>"+talk.htmlToString(m)+A+"</article>"}}else s='<article class="yd-timelineContentText"><a href="javascript:void(0)"></a>'+A+"</article>";i[i.length-1].reviewNum&&t(i[i.length-1].reviewNum)&&(p=i[i.length-1].reviewNum,p="0"==p?"回复":talk.toWK(i[i.length-1].reviewNum),y=x?'<div class="aswer" data-discussid=\''+i[N].id+"' data-refBelongId='"+i[N].refBelongId+"'><i></i><span>"+p+"</span></div>":"<div class=\"aswer\" data-discussid='0' data-refBelongId='"+i[N].refBelongId+"'><i></i><span>"+e.responseObject.responseData.total_count+"</span></div>"),i[N].customerName&&t(i[N].customerName)?(g=i[N].customerName,f=2==i[N].customerState||1==i[N].customerState?'<a href="javascript:void(0)">'+g+'<i class="yd-vipUser"></i></a>':'<a href="javascript:void(0)">'+g+"<i></i></a>"):f="<a href=\"javascript:void(0)\" class=' lucency'>暂未认证<i></i></a>";var F="";i[N].customerCompany&&t(i[N].customerCompany)?(F=i[N].customerCompany,v="<span>"+F+"</span>"):v="<span  class='lucency'>暂未认证</span>";var J="";x?("1"==i[i.length-1].isPrefer&&(J="selected"),i[i.length-1].upNum&&t(i[i.length-1].upNum)&&(h=i[i.length-1].upNum,h="0"==h?"点赞":talk.toWK(i[i.length-1].upNum),"0"==i[N].isPrefer?w='<div class="praise"    data-discussid=\''+r+"'><i class='"+J+"'  data-praiseid='"+i[i.length-1].preferId+"'></i><span>"+h+"</span></div>":("点赞"==h&&(h=1),w='<div class="praise"    data-discussid=\''+r+"'><i class='"+J+"'  data-praiseid='"+i[i.length-1].preferId+"'></i><span>"+h+"</span></div>"))):("1"==e.responseObject.responseData.head_message.preferStatus&&(J="selected"),e.responseObject.responseData.head_message.questionPreferNum&&t(e.responseObject.responseData.head_message.questionPreferNum)&&(h=e.responseObject.responseData.head_message.questionPreferNum,h="0"==h?"点赞":talk.toWK(e.responseObject.responseData.head_message.questionPreferNum),"0"==i[N].isPrefer?w='<div class="praise"    data-thinkid=\''+i[N].refBelongId+"'><i class='"+J+"'  data-praiseid='"+i[i.length-1].preferId+"'></i><span>"+h+"</span></div>":("点赞"==h&&(h=1),w='<div class="praise"    data-thinkid=\''+i[N].refBelongId+"'><i class='"+J+"'  data-praiseid='"+i[i.length-1].preferId+"'></i><span>"+h+"</span></div>"))),I+='<section class="yd-timelineContentItemBox" ><i class="yd-timeline"></i><article class="yd-timelineContentItem"><figure class="yd-timelineUserImg">'+d+'</figure><article class="yd-timelineContentTextBox"><header class="yd-timelineContentAuthor">'+f+v+l+"</header>"+s+"</article></article></section>"}var M="";if(i[i.length-1].child_list&&i[i.length-1].child_list.length>0)for(var R=i[i.length-1].child_list,E="",q={},z="",K="",Q="",W="",H="",Z="",G="",V="",X="",Y="",ee=[],te=0;te<R.length;te++){R[te].reviewStatus;q["imgIte"+te]=[],ee[te]={},ee[te].imgData=[];for(var ae=0;ae<R[te].attachment_list.length;ae++)ee[te].imgData[ae]={},ee[te].imgData[ae].time=R[te].attachment_list[ae].attachment.uploadTime,ee[te].imgData[ae].name="",ee[te].imgData[ae].src=R[te].attachment_list[ae].attachment.reviewAttUrl,q["imgIte"+te][ae]=R[te].attachment_list[ae].attachment.reviewAttUrl;var ie="",se=q["imgIte"+te].length;if("该条评论已被作者删除"!=R[te].reviewContent)switch(q["imgIte"+te].length){case 0:break;case 1:ie='<section class="yd-timelineImgBox"     data-discussid=\''+R[te].id+"'  data-imgData='"+JSON.stringify(ee[te].imgData)+'\'><figure class="yd-timelineImg"><img src="'+q["imgIte"+te][0]+'" alt=""></figure></section>';break;case 2:ie='<section class="yd-timelineImgBox"    data-discussid=\''+R[te].id+"'   data-imgData='"+JSON.stringify(ee[te].imgData)+'\'><figure class="yd-timelineImg"><img src="'+q["imgIte"+te][0]+'" alt=""></figure><figure class="yd-timelineImg"><img src="'+q["imgIte"+te][1]+'" alt=""></figure></section>';break;case 3:ie='<section class="yd-timelineImgBox"    data-discussid=\''+R[te].id+"'   data-imgData='"+JSON.stringify(ee[te].imgData)+'\'><figure class="yd-timelineImg"><img src="'+q["imgIte"+te][0]+'" alt=""></figure><figure class="yd-timelineImg"><img src="'+q["imgIte"+te][1]+'" alt=""></figure><figure class="yd-timelineImg"><img src="'+q["imgIte"+te][2]+'" alt=""></figure></section>';break;case 4:case 5:case 6:case 7:case 8:case 9:var ne=se-3;ie='<section class="yd-timelineImgBox"    data-discussid=\''+R[te].id+"'  data-imgData='"+JSON.stringify(ee[te].imgData)+'\'><figure class="yd-timelineImg"><img src="'+q["imgIte"+te][0]+'" alt=""></figure><figure class="yd-timelineImg"><img src="'+q["imgIte"+te][1]+'" alt=""></figure><figure class="yd-timelineImg"><img src="'+q["imgIte"+te][2]+'" alt=""><figure class="yd-moreImgMask"><p>还有<span>'+ne+'</span>张<i class="icon-detailsArrow"></i></p></figure></figure></section>'}R[te].id&&t(R[te].id)&&(z=R[te].id),R[te].createTime&&t(R[te].createTime)&&(K=comm.date.diffDay_one(R[te].createTime,comm.date.local_time()),Q='<p class="yd-timelineTime">'+K+"</p>");var re="//www.yi-ding.net.cn/image/authority/login/normalImg.png";if(R[te].customerLogoUrl?t(R[te].customerLogoUrl)?(W=R[te].customerLogoUrl,H='<a href="javascript:void(0)"><img src="'+W+'" alt=""></a>'):d='<a href="javascript:void(0)"><img src="'+re+'" alt=""></a>':H='<a href="javascript:void(0)"><img src="'+re+'" alt=""></a>',R[te].customerId&&t(R[te].customerId)&&(Z=R[te].customerId),R[te].reviewContent&&t(R[te].reviewContent)){var oe=R[te].parentCustomerName;G=R[te].reviewContent,E='<article class="yd-timelineContentText"><a href="javascript:void(0)">回复给'+oe+"：</a>"+talk.htmlToString(G)+"</article>"}R[te].customerName&&t(R[te].customerName)?(V=R[te].customerName,X=2==R[te].customerState||1==R[te].customerState?'<a href="javascript:void(0)">'+V+'<i class="yd-vipUser"></i></a>':'<a href="javascript:void(0)">'+V+"<i></i></a>"):X="<a href=\"javascript:void(0)\" class=' lucency'>暂未认证<i></i></a>";var le="";R[te].customerCompany&&t(R[te].customerCompany)?(le=R[te].customerCompany,Y="<span>"+le+"</span>"):Y="<span  class='lucency'>暂未认证</span>",M+='<section class="yd-timelineContentItemBox"><i class="yd-timeline"></i><article class="yd-timelineContentItem"><figure class="yd-timelineUserImg">'+H+'</figure><article class="yd-timelineContentTextBox"><header class="yd-timelineContentAuthor">'+X+Y+Q+"</header>"+E+ie+"</article></article></section>"}var ce="";x?(ce='<section class="exercise-discuss"><header class="al-commentDetailsTitle ev-title">讨论<i class="al-commentDetailsClose ev-close"></i></header><section class="yd-timelineContent">'+C+'<header class="yd-timelineTitle '+k+'"><h2>'+D+'</h2><a class="btn-primary al-timelineFollow"></a></header>'+I+'<footer class="yd-timelineFooter"><div class="clear"><div class="disscussFunction clear">'+y+w+'</div></div></footer></section><section class="yd-timelineContent al-replayComment">'+M+"</section></section>",a.html(ce)):(ce='<section class="exercise-discuss"><header class="al-commentDetailsTitle ev-title">讨论<i class="al-commentDetailsClose ev-close"></i></header><section class="yd-timelineContent">'+C+'<header class="yd-timelineTitle '+k+'"><h2>'+D+'</h2><a class="btn-primary al-timelineFollow"></a></header><footer class="yd-timelineFooter"><div class="clear"><div class="disscussFunction clear">'+y+w+"</div></div></footer>"+I+'</section><section class="yd-timelineContent al-replayComment">'+M+"</section></section>",a.html(ce),$(".yd-timeline").each(function(){$(this).remove()})),$(".al-commentDetailsTitle").next().addClass("courseTopBg"),a.find(".yd-timelineFooter").prev().find(".yd-timelineContentTextBox").addClass("discussBorNone"),$(".al-commentDetailsClose").unbind("click").bind("click",function(){a.remove()}),talk.partInDiss()},public:function(e){$(".discussPublish").remove();var t='<div class="discussPublish pcModule" data-discussid="'+e.parentid+'" style=\'display: block\'><textarea placeholder="请输入你想说的话"></textarea><div class="uploadImg" style="display: none;"><ul class="uploadImgContainer"></ul><div class="imgNum">还能添加9张图片</div></div><div class="discussPublishImg"><form class="uploadIcon uploadPic" method="POST" enctype="multipart/form-data">图片<input type="file" class="postPicButton" name="file" style="font-size: 12px; cursor: pointer; position: absolute; left: 0px; opacity: 0; outline: none; width: 50px; height: 30px;"></form><div class="uploadBut"><button class="al-commentCancel evReviewBoxCancel">取消</button><button class="al-commentCommit evReviewBoxSubmit fb_but" >发表</button></div></div></div>';switch(e.position){case"before":e.container.before(t);break;case"after":e.container.after(t);break;case"append":e.container.append(t);break;case"inner":e.container.html(t)}var a=e.container.parent().find(".discussPublish"),i=a.find(".postPicButton"),s=a.find(".uploadImgContainer"),n=a.find(".uploadImg"),r=a.find(".imgNum"),o=a.find("textarea"),l="";o.unbind("input propertychange").bind("input propertychange",function(){$(this).val().length>0&&(l=$(this).val())}),n.hide(),i.unbind("change").bind("change",function(){$(".discussPublishImg").click(function(){return!1});var e=($(this),{imageType:"5"}),t=this,o=s.find("li").length;if(o<9){if(a.find(".uploadNow").removeClass("uploadNow"),!comm.browser.msie){s.append("<li class=\"uploadNow\" data-imgid=''><div class='postImgloadingBg'></div><div class='postImgloading'></div><img src=\"\"><button class=\"delePostImg\"></button> </li>");var l=a.find(".uploadNow img"),c=["bmp","gif","png","jpg","jpeg"];if(t.value)if(RegExp(".("+c.join("|")+")$","i").test(t.value.toLowerCase())){var d=commLog.getBrowserInfo(),u="",m="";if(d&&(u=(d+"").replace(/[^0-9.]/gi,""),m=(d+"").replace(/[^a-zA-Z]/gi,"")+","+u),"msie,8.0"==m){if(!comm.browser.msie){if($.browser.version<7)l.attr("src",t.files.item(0).getAsDataURL());else{oFReader=new FileReader,rFilter=/^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i,oFReader.onload=function(e){l.attr({src:e.target.result})};var p=t.files[0];oFReader.readAsDataURL(p)}a.find(".uploadNow").removeClass("uploadNow").attr({"data-status":"success"});var g=parseInt(9-s.find("li").length),f="还能添加"+g+"张图片";r.html(f),a.attr({"data-attach":"1"}),n.show(),a.find(".delePostImg").each(function(){$(this).unbind("click").bind("click",function(){var e=$(this);comm.confirmBox({title:"确认删除已添加的图片吗？",cancel:"取消",ensure:"删除图片",ensureCallback:function(){e.parent().remove();var t=s.find("li").length,o=parseInt(9-t),l="还能添加"+o+"张图片";r.html(l),a.attr({"data-attach":"1"}),0==t&&(n.hide(),a.attr({"data-attach":"0"}),i.val(""))},cancelCallback:function(){$(".yd-confirmModalMask").remove()}})})})}}else{var v=t.files[0].size/1048576;if(v>5){popup({text:"图片不能大于5MB"});for(var h=$(".uploadImgContainer li"),w=0;w<h.length;w++)""==h.eq(w).attr("data-imgid")&&h.eq(w).remove();t.value=""}else if(!comm.browser.msie){if($.browser.version<7)l.attr("src",t.files.item(0).getAsDataURL());else{oFReader=new FileReader,rFilter=/^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i,oFReader.onload=function(e){l.attr({src:e.target.result})};var p=t.files[0];oFReader.readAsDataURL(p)}a.find(".uploadNow").removeClass("uploadNow").attr({"data-status":"success"});var g=parseInt(9-s.find("li").length),f="还能添加"+g+"张图片";r.html(f),a.attr({"data-attach":"1"}),n.show(),a.find(".delePostImg").each(function(){$(this).unbind("click").bind("click",function(){var e=$(this);comm.confirmBox({title:"确认删除已添加的图片吗？",cancel:"取消",ensure:"删除图片",ensureCallback:function(){e.parent().remove();var t=s.find("li").length,o=parseInt(9-t),l="还能添加"+o+"张图片";r.html(l),a.attr({"data-attach":"1"}),0==t&&(n.hide(),a.attr({"data-attach":"0"}),i.val(""))},cancelCallback:function(){$(".yd-confirmModalMask").remove()}})})})}}}else{popup({text:"图片限于bmp,png,gif,jpg,jpeg格式"});for(var h=$(".uploadImgContainer li"),w=0;w<h.length;w++)""==h.eq(w).attr("data-imgid")&&h.eq(w).remove();t.value=""}}}else popup({text:"最多添加9张图片"});e={paramJson:$.toJSON(e)},$(this).parent().ajaxSubmit({url:"//www.yi-ding.net.cn/call/yiding/upload/attachment/upload/",dataType:"text",data:e,type:"POST",clearForm:!0,success:function(e){$(".postImgloadingBg").remove(),$(".postImgloading").remove();var t=$.parseJSON(e.replace(/<.*?>/gi,"")),o=t.responseObject.responseMessage.url;if(0!=t.responseObject.responsePk)var l=t.responseObject.responsePk;var c=s.find("li").length;if(c<10)if(comm.browser.msie){a.find(".uploadNow").removeClass("uploadNow"),s.append('<li class="uploadNow" data-imgid=\''+l+'\'><img src=""><button class="delePostImg"></button> </li>');var d=a.find(".uploadNow img");d.attr({src:o}),a.find(".uploadNow").removeClass("uploadNow").attr({"data-status":"success"});var u=parseInt(9-s.find("li").length),m="还能添加"+u+"张图片";r.html(m),a.attr({"data-attach":"1"}),n.show(),a.find(".delePostImg").each(function(){$(this).unbind("click").bind("click",function(){var e=$(this);comm.confirmBox({title:"确认删除已添加的图片吗？",cancel:"取消",ensure:"删除图片",ensureCallback:function(){e.parent().remove();var t=s.find("li").length,o=parseInt(9-t),l="还能添加"+o+"张图片";r.html(l),a.attr({"data-attach":"1"}),0==t&&(n.hide(),a.attr({"data-attach":"0"}),i.val(""))},cancelCallback:function(){$(".yd-confirmModalMask").remove()}})})})}else{var p=a.find(".uploadImgContainer li").length-1;a.find(".uploadImgContainer li").eq(p).attr({"data-imgid":l})}$(".discussPublishImg").off("click")}})}),a.find(".al-commentCancel").unbind("click").bind("click",function(){comm.confirmBox({title:"确定放弃讨论吗?",cancel:"放弃",ensure:"继续编辑",content:"现在退出已编辑内容将会被删除",ensureCallback:function(){},cancelCallback:function(){"course"==talk.about?commLog.creatEvent({id:72,url:window.location.href,keyword:"取消讨论",browseType:"38",browseTypeSourceUrl:window.location.href}):commLog.creatEvent({id:72,url:window.location.href,keyword:"取消讨论",browseType:"34",browseTypeSourceUrl:window.location.href}),"none"==$(".coursePc-coll").css("display")&&$(".coursePc-coll").show(),$(".discussPublish").remove();var e=talk.container.find(".disscussIteam").length>0;e||talk.container.find(".queShiTiDisNothing").length>0&&talk.container.find(".queShiTiDisNothing").show()}})}),a.find(".al-commentCommit").unbind("click").bind("click",function(){"course"==talk.about?commLog.creatEvent({id:71,url:window.location.href,keyword:"发表讨论",browseType:"38",browseTypeSourceUrl:window.location.href}):commLog.creatEvent({id:71,url:window.location.href,keyword:"发表讨论",browseType:"34",browseTypeSourceUrl:window.location.href});var t=($(".uploadImgContainer li"),$(this).parents(".discussPublish").find("textarea").val()),i=$(this).parents(".discussPublish").find(".uploadImgContainer li").length;if(!(""==t&&0==i||/^[\s]{0,}$/.test(t)&&0==i)){var s=e.refId,n=parseInt(a.attr("data-attach")),r=e.parentid,o={};if(1==n){var l="";a.find(".uploadImgContainer li").each(function(){l+=$(this).attr("data-imgid")+","}),l=l.substring(0,l.length-1),o={customerId:loginAbout.login.status().userId,isUploadAttachment:n,pictureIds:l,reviewContent:a.find("textarea").val(),parentId:r,reviewType:talk.reviewType,refId:s,refBelongId:e.refBelongId}}else n="0",o={customerId:loginAbout.login.status().userId,isUploadAttachment:n,reviewContent:a.find("textarea").val(),parentId:r,reviewType:talk.reviewType,refId:s,refBelongId:e.refBelongId};o={paramJson:$.toJSON(o)},$.ajax({url:"//www.yi-ding.net.cn/call/customer/review/createReview/",dataType:"json",async:!0,data:o,type:"POST",beforeSend:function(){},success:function(e){if(e.responseObject.responseStatus){$(".discussPublish").remove(),"course"==talk.about?talk.container.html("").removeAttr("data-page"):talk.container.html("").removeAttr("scrollpagination").removeAttr("data-page"),$(".courseQution-pc").hasClass("active")&&($(".courseQution-pc").removeClass("active"),$(".courseQution-pc").parent().show());var t={reviewType:talk.reviewType,refId:s,sortType:talk.sortType,scene:talk.scene,logoUseFlag:"2",pageIndex:"1",pageSize:10,customerId:"1481115504920",attUseFlag:"16"};if($(".yd-maskBackground .exercise-discuss").length>0){var a=(parseInt($(".exercise-discuss .yd-timelineContentItemBox").length)+1,"");a=0!=$(".yd-maskBackground .exercise-discuss .aswer").attr("data-discussid")?{reviewId:talk.disscussLineId,sortType:talk.sortType,scene:"4",logoUseFlag:"2",pageIndex:"1",pageSize:10,attUseFlag:"16"}:{visitSiteId:13,scene:"0",logoUseFlag:"3",customerId:loginAbout.login.status().userId,refId:talk.refId,refBelongId:$(".yd-maskBackground .exercise-discuss .aswer").attr("data-refbelongid")},talk.applyData("disscussLine",a)}talk.applyData("disscuss",t)}},complete:function(){},error:function(){}});var t=$(this).parents(".discussPublish").find("textarea").val(),i=$(this).parents(".discussPublish").find(".uploadImgContainer li").length;return""==t&&0==i?void $(".discussPublish").remove():void 0}})},disscussLineId:"",scrollPage:function(e,t){if(t){talk.refId=t}var a={contentPage:"//www.yi-ding.net.cn/call/customer/review/json_list/",contentData:$.extend({reviewType:talk.reviewType,refId:talk.refId,reviewId:"",sortType:talk.sortType,scene:talk.scene,logoUseFlag:"2",pageIndex:"1",pageSize:"10",customerId:loginAbout.login.status().userId},{pageIndex:function(){var t=parseInt(e.attr("data-page"));return t++,e.attr({"data-page":t}),t}}),scrollTarget:$(window),heightOffset:0,delaytime:1e3,type:"post",beforeLoad:function(){comm.loading.show()},afterLoad:function(e){comm.loading.hide()},loader:function(e){talk.spreadDiscuss("disscuss",e)}};$(window).off("scroll"),e.scrollPagination(a)},judge:function(e,t){if("course"==talk.about)if(localStorage.getItem("userId"))if(localStorage.getItem("approveInfo")){var a=JSON.parse(localStorage.getItem("approveInfo"));1==a.state||2==a.state?e&&e():a.state==-1?t?(talk.onOperate&&talk.onOperate(),comm.confirmBox({content:"认证后才能参与课程讨论</br>快去认证，获取完整权限",cancel:"暂不认证",ensure:"去认证",ensureCallback:function(){commLog.creatEvent({id:15,url:window.location.href,keyword:"去认证",browseType:"38",browseTypeSourceUrl:window.location.href}),authentication.init({type:"trigger",success:function(){authentication.exit()}})},cancelCallback:function(){commLog.creatEvent({id:16,url:window.location.href,keyword:"暂不认证",browseType:"38",browseTypeSourceUrl:window.location.href}),$(".yd-confirmModalMask").remove()}})):e&&e():t?(talk.onOperate&&talk.onOperate(),authentication.init({type:"trigger",before:function(){talk.onOperate&&talk.onOperate()},success:function(){authentication.exit()}})):e&&e()}else t?(talk.onOperate&&talk.onOperate(),comm.confirmBox({content:"认证后才能参与课程讨论</br>快去认证，获取完整权限",cancel:"暂不认证",ensure:"去认证",ensureCallback:function(){commLog.creatEvent({id:15,url:window.location.href,keyword:"去认证",browseType:"38",browseTypeSourceUrl:window.location.href}),talk.onOperate&&talk.onOperate(),authentication.init({type:"trigger",before:function(){talk.onOperate&&talk.onOperate()},success:function(){authentication.exit()}})},cancelCallback:function(){commLog.creatEvent({id:16,
url:window.location.href,keyword:"暂不认证",browseType:"38",browseTypeSourceUrl:window.location.href}),$(".yd-confirmModalMask").remove()}})):e&&e();else localStorage.setItem("unActive","1"),talk.onOperate&&talk.onOperate(),loginAbout.login.show({success:function(){loginAbout.init(),talk.onOperate&&talk.onOperate();var a={reviewType:talk.reviewType,refId:talk.refId,reviewId:"",sortType:talk.sortType,scene:"0",logoUseFlag:"2",pageIndex:"1",pageSize:"10",customerId:loginAbout.login.status().userId,attUseFlag:"16"};talk.applyData("disscuss",a),t?(talk.onOperate&&talk.onOperate(),authentication.init({type:"trigger",before:function(){talk.onOperate&&talk.onOperate()},success:function(){authentication.exit()}})):e&&e()}});else localStorage.getItem("userId")?e&&e():(localStorage.setItem("unActive","1"),loginAbout.login.show({success:function(){loginAbout.changeHead(),talk.onOperate&&talk.onOperate();var a={reviewType:talk.reviewType,refId:talk.refId,reviewId:"",sortType:talk.sortType,scene:"0",logoUseFlag:"2",pageIndex:"1",pageSize:"10",customerId:loginAbout.login.status().userId,attUseFlag:"16"};talk.applyData("disscuss",a),t?(talk.onOperate&&talk.onOperate(),authentication.init({type:"trigger",before:function(){talk.onOperate&&talk.onOperate()},success:function(){authentication.exit()}})):e&&e()}}))},partInDiss:function(){$(".discussAllLast li").each(function(){$(this).unbind("click").bind("click",function(){var e=$(this);if(!loginAbout.login.status().state)return!1;$(".discussAllLast").find(".selected").removeClass("selected"),e.addClass("selected");var t=e.attr("data-role"),a=$(".discuss-content .discussAllList");$(".disscussIteam").length;a.removeAttr("data-page");var i={};switch(t){case"recently":"course"==talk.about&&commLog.creatEvent({id:176,url:window.location.href,keyword:"课程终端页-讨论最新",browseType:"38",browseTypeSourceUrl:window.location.href}),talk.sortType="7",a.html("").removeAttr("data-page"),i={reviewType:talk.reviewType,refId:talk.refId,reviewId:"",sortType:talk.sortType,scene:"0",logoUseFlag:"2",pageIndex:"1",pageSize:10,customerId:loginAbout.login.status().userId,attUseFlag:"16"},talk.applyData("disscuss",i);break;case"oldest":"course"==talk.about&&commLog.creatEvent({id:177,url:window.location.href,keyword:"课程终端页-讨论最旧",browseType:"38",browseTypeSourceUrl:window.location.href}),talk.sortType="1",a.html("").removeAttr("data-page"),i={reviewType:talk.reviewType,refId:talk.refId,reviewId:"",sortType:talk.sortType,scene:"0",logoUseFlag:"2",pageIndex:"1",pageSize:10,customerId:loginAbout.login.status().userId,attUseFlag:"16"},talk.applyData("disscuss",i)}})}),$(".discussAllList .aswer").each(function(){$(this).unbind("click").bind("click",function(){"course"==talk.about?commLog.creatEvent({id:73,url:window.location.href,keyword:"课程讨论列表呼出讨论",browseType:"38",browseTypeSourceUrl:window.location.href}):commLog.creatEvent({id:74,url:window.location.href,keyword:"习题讨论列表呼出讨论",browseType:"34",browseTypeSourceUrl:window.location.href});var e=$(this);talk.judge(function(){var t=e.attr("data-discussid"),a=e.attr("data-refBelongId"),i={container:e.parent().parent(),refId:talk.refId,position:"after",parentid:t,refBelongId:a,callBack:function(e,t){}};talk.public(i)},!0)})}),$(".yd-maskBackground  .aswer").each(function(){$(this).unbind("click").bind("click",function(){talk.onOperate&&talk.onOperate(),"course"==talk.about?commLog.creatEvent({id:73,url:window.location.href,keyword:"课程讨论列表呼出讨论",browseType:"38",browseTypeSourceUrl:window.location.href}):commLog.creatEvent({id:74,url:window.location.href,keyword:"习题讨论列表呼出讨论",browseType:"34",browseTypeSourceUrl:window.location.href});var e=$(this);talk.judge(function(){var t=e.attr("data-discussid"),a=e.attr("data-refbelongid"),i={container:e.parent(),refId:talk.refId,position:"after",parentid:t,refBelongId:a,callBack:function(e,t){}};talk.public(i)},!0)})}),$(".praise").each(function(){$(this).unbind("click").bind("click",function(){var e=$(this);talk.judge(function(){var t=e.find("span"),a=0;e.find("i").toggleClass("selected");var i=e.find("i"),s=e.find("i").hasClass("selected"),n="",r="";if(e.attr("data-discussid")?(n=e.attr("data-discussid"),r="8"):(n=e.attr("data-thinkid"),r="4"),s){isNaN(t.text())?a=1:(a=parseInt(t.text()),a++),t.text(a);var o={preferType:r,refId:n,customerId:loginAbout.login.status().userId};o={paramJson:$.toJSON(o)},$.ajax({url:"//www.yi-ding.net.cn/call/customer/prefer/create/",dataType:"json",async:!0,data:o,type:"POST",beforeSend:function(){},success:function(e){if(e.responseObject.responseStatus){var t=e.responseObject.responsePk;i.attr("data-praiseId",t)}},complete:function(){},error:function(){}})}else{var l=i.attr("data-praiseId"),c={id:l};isNaN(t.text())||parseInt(t.text())>0&&(a=parseInt(t.text()),a--,a<1&&(a="点赞")),t.text(a),c={paramJson:$.toJSON(c)},$.ajax({url:"//www.yi-ding.net.cn/call/customer/prefer/cancel/",dataType:"json",async:!0,data:c,type:"POST",beforeSend:function(){},success:function(e){e.responseObject.responseStatus&&i.removeAttr("data-praiseId")},complete:function(){},error:function(){}})}},!0)})}),$(".userCont").each(function(){$(this).unbind("click").bind("click",function(){var e=$(this).attr("data-cusid")==loginAbout.login.status().userId;if(e);else{var t=$(this).attr("data-cusid");window.open("https://www.yi-ding.net.cn//pages/personal/others_index.html?cId="+t,"_blank")}})}),$(".discussAds").each(function(){$(this).find("li").each(function(){$(this).unbind("click").bind("click",function(){talk.onOperate&&talk.onOperate();var e=JSON.parse($(this).parent().attr("data-imgData")),t=parseInt($(this).index())+1,a=$(this).parent().parent().attr("data-discussid");creatCarousel.creatHtml(e,t,a)})})}),$(".yd-timelineImgBox .yd-timelineImg").each(function(){$(this).unbind("click").bind("click",function(){var e=JSON.parse($(this).parent().attr("data-imgData")),t=parseInt($(this).index())+1,a=$(this).parent().attr("data-discussid");creatCarousel.creatHtml(e,t,a)})}),$(".discussAllList .previousDiscuss ").each(function(){$(this).unbind("click").bind("click",function(){var e="",t="",a="";$(this).attr("data-refbelongid").length>0?(talk.onOperate&&talk.onOperate(),e=$(this).attr("data-review"),a=$(this).attr("data-refbelongid"),talk.disscussLineId=talk.refId,t={visitSiteId:13,scene:"0",logoUseFlag:"3",customerId:loginAbout.login.status().userId,refId:talk.refId,refBelongId:a},talk.applyData("disscussLine",t)):(talk.onOperate&&talk.onOperate(),e=$(this).attr("data-review"),talk.disscussLineId=e,t={reviewId:e,sortType:talk.sortType,scene:"4",logoUseFlag:"2",pageIndex:"1",pageSize:"10",attUseFlag:"16"},talk.applyData("disscussLine",t))})}),$(".context").each(function(){$(this).unbind("click").bind("click",function(){"course"==talk.about&&commLog.creatEvent({id:159,url:window.location.href,keyword:"课程终端页呼出对划线",browseType:"38",browseTypeSourceUrl:window.location.href});var e=$(this).attr("data-review");talk.disscussLineId=e;var t={reviewId:e,sortType:talk.sortType,scene:"4",logoUseFlag:"2",pageIndex:"1",pageSize:"10",attUseFlag:"16"};talk.applyData("disscussLine",t)})}),$(".discussAllList").each(function(){$(this).find("li").each(function(){var e=$(this);$(this).unbind("mouseover").bind("mouseover",function(){var t=$(this).attr("data-userid")==loginAbout.login.status().userId,a=3!=e.attr("data-isvalid"),i=t&&a;if(i){var s=$(this).find(".discussDelete");s.show().unbind("click").bind("click",function(){var e=$(this).attr("data-discussid");comm.confirmBox({title:"确认删除该条讨论吗？",cancel:"放弃",ensure:"删除",ensureCallback:function(){var t={id:e};t={paramJson:$.toJSON(t)},$.ajax({url:"//www.yi-ding.net.cn/call/customer/review/delete/",dataType:"json",async:!0,data:t,type:"POST",beforeSend:function(){comm.loading.show()},success:function(e){if(e.responseObject.responseStatus){$(".disscussIteam").length+1;"course"==talk.about?talk.container.html("").removeAttr("data-page"):talk.container.html("").removeAttr("scrollpagination").removeAttr("data-page"),$(".courseQution-pc").hasClass("active")&&($(".courseQution-pc").removeClass("active"),$(".courseQution-pc").parent().show());var t={reviewType:talk.reviewType,refId:talk.refId,reviewId:"",sortType:talk.sortType,scene:"0",logoUseFlag:"2",pageIndex:"1",pageSize:10,customerId:loginAbout.login.status().userId,attUseFlag:"16"};talk.applyData("disscuss",t)}},complete:function(){comm.loading.hide()},error:function(){}})},cancelCallback:function(){"course"==talk.about?commLog.creatEvent({id:72,url:window.location.href,keyword:"取消讨论",browseType:"38",browseTypeSourceUrl:window.location.href}):commLog.creatEvent({id:72,url:window.location.href,keyword:"取消讨论",browseType:"34",browseTypeSourceUrl:window.location.href}),$(".yd-confirmModalMask").remove()}})})}}),$(this).unbind("mouseout").bind("mouseout",function(){var e=$(this).attr("data-userid")==loginAbout.login.status().userId;e&&$(this).find(".discussDelete").hide()})})}),$(".queShiTiPart").each(function(){$(this).unbind("click").bind("click",function(){"course"==talk.about||commLog.creatEvent({id:161,url:location.href,keyword:"习题参与讨论呼出讨论",browseType:"34",browseTypeSourceUrl:location.href}),talk.onOperate&&talk.onOperate(),$(".queShiTiDisNothing").length>0&&$(".queShiTiDisNothing").hide();var e=($(this).attr("data-discussid"),{container:$(this).parent().parent(),refId:$(".queIteamActive").attr("data-id")||talk.refId,position:"after",parentid:"0",callBack:function(){}});talk.public(e)})})}};
var creatCarousel={};$(document).ready(function(){creatCarousel={creatHtml:function(i,s,t){var e=this,n="";n+='<section class="Mask_Layer yd-discussfirst" style="background-color:rgba(0,0,0,0.3); "><div class="width_auto"><div class="yd-discussout"><div class="yd-discussout_pagination"><button class="yd-discusstop_left"></button><div class="pagination"></div><button class="yd-discusstop_right"></button></div></div><div class="yd-discussout_bottom"><div class="yd-discussout_bottom_close"><img src="/image/discuss/close.png" /></div><div class="swiper_top"><span class="swiper_top_left"></span><span class="swiper_top_right"></span></div><div class="swiper_out"><div class="swiper_right"><span class="swiper_right_width">适应窗口</span><span class="swiper_right_big" data-discussid="'+t+'">查看大图</span></div><div class="swiper-container"><div class="swiper-wrapper"><a class="yd-discussarrow-left" href="#"></a><a class="yd-discussarrow-right" href="#"></a><img/></div></div></div></div></div> </section>',0==$(".yd-discussfirst").length?$("body").append(n):$(".yd-discussfirst").show(),t?$(".swiper_right_big").show():$(".swiper_right_big").hide(),e.nowIndexNum=s,e.creatSwitch(i)},nowIndexNum:null,creatSwitch:function(i){for(var s=this,t=0;t<i.length;t++){if(0==t){var e=$("<span class='swiper-pagination-switch swiper-visible-switch swiper-active-switch'><img/></span>");$(".pagination").append(e)}else{var e=$("<span class='swiper-pagination-switch swiper-visible-switch'><img/></span>");$(".pagination").append(e)}e.find("img").attr("src",i[t].src)}$(".swiper_top_left").text(s.nowIndexNum+"/"+i.length),s.rightAddClass(s.nowIndexNum,i),s.bigImg(s.nowIndexNum-1,i),s.moveImg(s.nowIndexNum,i.length),s.elseClick(i),$(".yd-discussarrow-left").on("click",function(){s.leftClick(i)}),$(".yd-discussarrow-right").on("click",function(){s.rightClick(i)}),$(".swiper-pagination-switch").unbind("click").bind("click",function(){s.nowIndexNum=$(this).index()+1,s.moveImg(s.nowIndexNum);for(var t=0;t<i.length;t++)$(".swiper-pagination-switch").removeClass("swiper-active-switch");$(this).addClass("swiper-active-switch"),$(".swiper_top_left").text(s.nowIndexNum+"/"+i.length),s.bigImg(s.nowIndexNum-1,i)}),$(".yd-discusstop_left").on("click",function(){s.leftClick(i)}),$(".yd-discusstop_right").on("click",function(){s.rightClick(i)})},elseClick:function(i){var s=this;$(".yd-discussout_bottom_close").click(function(){document.documentElement.style.overflow="",$(".yd-discussfirst").remove()}),$(".swiper_right_width").click(function(){var i=$(window).height()-308;"适应宽度"==$(".swiper_right_width").text()?($(".swiper_right_width").text("适应窗口"),$(".swiper-container").height(800),$(".swiper-wrapper img").height(800)):($(".swiper_right_width").text("适应宽度"),$(".swiper-container").height(i),$(".swiper-wrapper img").height(i))}),$(".swiper-container").mouseover(function(){$(".yd-discussarrow-left").css("display","block"),$(".yd-discussarrow-right").css("display","block")}),$(".swiper-container").mouseout(function(){$(".yd-discussarrow-left").css("display","none"),$(".yd-discussarrow-right").css("display","none")}),$(".swiper_right_big").click(function(){s.nowIndexNum=$(".swiper-active-switch").index()+1;var i=$(this).attr("data-discussid");window.open("/pages/discuss/big-img2.html?&caseId="+i+"&index="+s.nowIndexNum)})},bigImg:function(i,s){$(".swiper-wrapper img").attr("src",s[i].src),s[i].time?$(".swiper_top_right").text("发布于:"+s[i].time):$(".swiper_top_right").text("")},moveImg:function(i){i>6?$(".pagination").css({left:-105*(i-6),transition:"all 1s"}):$(".pagination").css({left:30,transition:"all 1s"})},rightAddClass:function(i,s){for(var t=0;t<s.length;t++)$(".swiper-pagination-switch").removeClass("swiper-active-switch");$(".swiper-pagination-switch").eq(i-1).addClass("swiper-active-switch")},leftClick:function(i){var s=this;s.nowIndexNum=$(".swiper-active-switch").index()+1,s.nowIndexNum--,s.nowIndexNum>0&&(s.rightAddClass(s.nowIndexNum,i),s.moveImg(s.nowIndexNum),$(".swiper_top_left").text(s.nowIndexNum+"/"+i.length),s.bigImg(s.nowIndexNum-1,i))},rightClick:function(i){var s=this;s.nowIndexNum=$(".swiper-active-switch").index()+1,s.nowIndexNum++,s.nowIndexNum<=i.length&&(s.rightAddClass(s.nowIndexNum,i),s.moveImg(s.nowIndexNum),$(".swiper_top_left").text(s.nowIndexNum+"/"+i.length),s.bigImg(s.nowIndexNum-1,i))}}});
!function(o){var r=function(o){var r,e,s;for(e=1;e<arguments.length;e++){r=arguments[e];for(s in r)r.hasOwnProperty(s)&&(o[s]=r[s])}return o},e={autoDisable:!1},s=function(o){var s=this,n=!1,t=r({},e,o||{});s.disableProgress={disable:function(){n=!0,s.controlBar.progressControl.seekBar.off("mousedown"),s.controlBar.progressControl.seekBar.off("touchstart"),s.controlBar.progressControl.seekBar.off("click")},enable:function(){n=!1,s.controlBar.progressControl.seekBar.on("mousedown",s.controlBar.progressControl.seekBar.handleMouseDown),s.controlBar.progressControl.seekBar.on("touchstart",s.controlBar.progressControl.seekBar.handleMouseDown),s.controlBar.progressControl.seekBar.on("click",s.controlBar.progressControl.seekBar.handleClick)},getState:function(){return n}},t.autoDisable&&s.disableProgress.disable()};o.plugin("disableProgress",s)}(window.videojs);