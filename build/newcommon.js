var domain={getRootPath:function(){var n=window.document.location.href,t=window.document.location.pathname;if(window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),t.indexOf("/")!=-1)return window.location.origin||n;var i=n.indexOf(t),e=n.substring(0,i),c=t.substring(0,t.substr(0).indexOf("/"));return"/yiding_static"==c?e:e+c},charset:"utf-8",get:function(){for(var n=0;n<arguments.length;n++){var t=arguments[n].substring(arguments[n].lastIndexOf(".")+1),i=this.getRootPath();"css"==t?document.write(unescape("%3Clink href='"+i+arguments[n]+"' rel='stylesheet' type='text/css'/%3E")):"js"==t&&document.write(unescape("%3Cscript src='"+i+arguments[n]+"' type='text/javascript' charset='"+this.charset+"'%3E%3C/script%3E"))}}},pcOrH5={pc:function(){for(var n=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPod"),i=!0,e=0;e<t.length;e++)if(n.indexOf(t[e])>0){i=!1;break}return i}};domain.changeUrl=function(n){var t="",i="";return pcOrH5.pc()?(i=/\/\/www.yi-ding.net.cn\/call\//g,t=i.test(n)?n.replace(/\/www.yi-ding.net.cn\/call\//,"//www.yi-ding.net.cn/call/"):n.replace(/\/\/m.yi-ding.net.cn\/mcall\//,"//www.yi-ding.net.cn/call/")):(i=/\/\/m.yi-ding.net.cn\/mcall\//g,t=i.test(n)?n.replace(/\/\/m.yi-ding.net.cn\/mcall\//,"//m.yi-ding.net.cn/mcall/"):n.replace(/\/\/www.yi-ding.net.cn\/call\//,"//m.yi-ding.net.cn/mcall/")),t};
!function(){"use strict";function t(e,o){function i(t,e){return function(){return t.apply(e,arguments)}}var r;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=e,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!t.notNeeded(e)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=this,s=0,u=a.length;s<u;s++)c[a[s]]=i(c[a[s]],c);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,o){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,o):i.call(e,t,n,o)},e.addEventListener=function(t,n,o){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),o):i.call(e,t,n,o)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,i=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=o&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,o;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),o=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],o){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},t.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,a,c,s,u,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(u=t.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=l.tagName.toLowerCase(),"label"===c){if(e=this.findControl(l)){if(this.focus(l),n)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-a>100||o&&window.top!==window&&"input"===c?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),o&&"select"===c||(this.targetElement=null,t.preventDefault()),!1);return!(!o||i||(s=l.fastClickScrollParent,!s||s.fastClickLastScrollTop===s.scrollTop))||(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,o,i,r;if("undefined"==typeof window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(e.content.indexOf("user-scalable=no")!==-1)return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(e.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(r>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(e.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===t.style.touchAction||"manipulation"===t.style.touchAction))},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}();
$(function(){function e(){var e=this;this.suggestion="//www.yi-ding.net.cn/call/yiding/customer/suggestion/create/",$("#suggestion").on("click",function(e){e.preventDefault(),$(".yd-suggestionBox").show()}),$(".yd-suggestionBoxClose").on("click",function(e){e.preventDefault(),$(".yd-suggestionBox").hide()}),$("#Ev-suggestionText").on("keyup",function(){var e=$(this).parent().find("span");e.text($(this).val().length),$(this).val().length>=450?e.show():e.hide(),$(this).val().length>=500&&$(this).val($(this).val().substring(0,500))}),$(".yd-suggestionBtn button").on("click",function(){var t=$("#Ev-suggestionText").val();0!==t.length&&$.ajax({url:e.suggestion,type:"POST",dataType:"json",data:{paramJson:$.toJSON({customerId:localStorage.getItem("userId"),siteId:"13",visitSiteId:"13",suggestion:$("#Ev-suggestionText").val(),suggestionStatus:"0"})},timeout:1e4,beforeSend:function(){comm.loading.show()}}).done(function(e){e.responseObject.responseStatus?popup({text:"提交成功"}):popup({text:"提交失败"}),$("#Ev-suggestionText").val(""),$(".yd-suggestionBox").hide(),comm.loading.hide()}).fail(function(){comm.loading.hide()})})}function t(){$.ajax({url:"//www.yi-ding.net.cn/call/yiding/customer/message/getMapCount/",type:"get",dataType:"json",data:{paramJson:$.toJSON({customerId:localStorage.getItem("userId")})},timeout:1e4,beforeSend:function(){comm.loading.show()}}).done(function(e){if(!$.isEmptyObject(e.responseObject.responseData)){var t=e.responseObject.responseData.data_list[0];$(".Ev-sidebarMessage").append("<span class='yd-newsNum'>"+(parseInt(t.totalNum)>99?"...":t.totalNum)+"</span>")}comm.loading.hide()}).fail(function(){comm.loading.hide()})}"function"==typeof FastClick&&FastClick.attach(document.body),comm.pcSideModule([{item:"首页",href:"//www.yi-ding.net.cn/",active:!0},{item:"课程",href:"//www.yi-ding.net.cn/pages/curriculum/curriculum.html",active:!1},{item:"习题",href:"//www.yi-ding.net.cn/pages/category/question.html",active:!1},{item:"",href:"",active:!1}]);var n=/\S*\index.html$/.test(window.location.href),o=$(".al-mainSidebarList .al-mainSidebarItem").eq(0);n?o.addClass("active"):o.removeClass("active"),comm.pcFooterModule(),comm.hoverSidebarChange(),pcOrH5.pc()&&loginAbout.init({loginPass:function(){location.reload()},registerPass:function(){location.reload()}}),e(),localStorage.getItem("userId")&&t()});
var comm={};comm.loading={show:function(){0==$(".ev-loading").length?($("body").append('<section class="al-middleTipsBox ev-loadingBox" style="z-index: -10"><section class="al-middleTipsModal ev-loading"><figure class="al-middleTipsModalText al-loading"><img src="/image/personal/loading_big@2x.png" alt=""></figure></section></section>'),$(".al-middleTipsBox").css({zIndex:10})):($(".ev-loading").show(),$(".al-middleTipsBox").css({zIndex:10}))},hide:function(){$(".ev-loading").hide(),$(".ev-loadingBox").css({zIndex:-10})}},comm.htmlToString=function(e){var a=(e+"").replace(/[<>&]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[e]}),i=a.split("&lt;/a&gt;&lt;a");return a=i.length>=2?i.map(function(e,a){var i=e.replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2');return i=i.replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)&lt\;\/a\&gt\;/gi,' href="$1">$2</a>')}).join("</a><a"):(a+"").replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)\&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>'),a=a.replace(/@@/g,"@")},comm.redirect=function(e,a,i,t){var o=!0;0==i&&(o=i);var n,s,l=500;null!=a&&"undefined"!=typeof a&&(l=a),e.indexOf("#")>0&&(s=e.split("#"),e=s[0],n=s[1]),l>0?setTimeout(function(){window.location.href=e},l):window.location=e},comm.setCenter=function(e){var a=($(window).height()-e.height())/2,i=($(window).width()-e.width())/2,t=$(window).scrollTop()+a,o=$(window).scrollLeft()+i;e.css({top:t+"px",left:o+"px"})},comm.browser={mozilla:/firefox/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")===-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},comm.setImgSize=function(e,a,i){var t=new Image;t.src=i.src;var o,n,s=1,l=t.width,c=t.height;n=a/l,o=e/c,0===a&&0===e?s=1:0===a?o<1&&(s=o):0===e?n<1&&(s=n):(n<1||o<1)&&(s=n<=o?n:o),s<1&&(l*=s,c*=s),i.height=c,i.width=l},comm.getStrLen=function(e,a){for(var i=0,t="",o=0;o<e.length;o++)if(t+=e.charAt(o),e.charCodeAt(o)>128){if(i+=2,i>=a)return t.substring(0,t.length-1)+"..."}else if(i+=1,i>=a)return t.substring(0,t.length-2)+"...";return t},comm.getStrByteLen=function(e,a){for(var i="",t=0,o=0;o<e.length&&(e.charCodeAt(o)>128?t+=2:t++,t<=a);o++)i=i.concat(e[o]);return t>a&&(i+="..."),i},comm.getByteLen=function(e){for(var a=0,i=0;i<e.length;i++)a+=null!==e[i].match(/[^\x00-\xff]/gi)?2:1;return a},comm.stopBubble=function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},comm.checkAccountType=function(e){var a="";return/^(127|13[0-9]|14[0-9]|15[0-9]|18[0-9]|17[0-9])\d{8}$/.test(e)&&(a="mobile"),/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(e)&&(a="email"),a},comm.getpara=function(e){var a,i,t=document.URL,o={};if(t.lastIndexOf(e?e:"?")>0){a=t.substring(t.lastIndexOf(e?e:"?")+1,t.length);for(var n=a.split("&"),s=0;s<n.length;s++)i=n[s].split("="),o[i[0]]=decodeURIComponent(i[1])}return o},comm.isEmptyObject=function(e){for(var a in e)return!1;return!0},comm.forceHttp=function(){"https:"===location.protocol&&(location.href="http://"+location.hostname+location.pathname+location.search)},comm.getparaNew=function(){var e,a,i=document.URL,t={};if(e=i,i.lastIndexOf("?")>0&&(e=i.substring(i.lastIndexOf("?")+1,i.length)),i.lastIndexOf("#")>0&&(e=e.split("#")[1]),"-1"==i.indexOf("="))return!1;if(e.length>0){var o=e.split("&");if(o.length>0){for(var n=0;n<o.length;n++)a=o[n].split("="),t[a[0]]=decodeURIComponent(a[1]);return t}return!1}return!1},comm.buildAnchor=function(e){if(e&&null!=e&&!$.isEmptyObject(e)){var a=window.location.pathname+location.search;a.indexOf("#")<0&&(a+="#");for(var i in e)a+="&"+i+"="+e[i];if(a.indexOf(!1)&&(a+="&share=app"),a.indexOf("visitSiteId")>0){var t=comm.getparaNew().visitSiteId;a+="&visitSiteId="+t}window.location.href=a}},comm.getData=function(e){var a=CommonJsonData.videoListOptionArr[1],i=[];if(e>=0){for(var t=0,o=a.length;t<o;t++)a[t].parentId==e&&i.push(a[t]);return i}return CommonJsonData.videoListOptionArr[1]},comm.getLength=function(e){for(var a=0,i=e?e.length:0,t=-1,o=0;o<i;o++)t=e.charCodeAt(o),a+=t>=0&&t<=128?1:2;return a},comm.cutstr=function(e,i,t){var o=0,n=0;str_cut=new String,n=e.length;for(var s=0;s<n;s++)if(a=e.charAt(s),o++,escape(a).length>4&&o++,str_cut=str_cut.concat(a),o>=i)return t&&(str_cut=str_cut.concat("...")),str_cut;if(o<i)return e},comm.revCutstr=function(e,i,t){function o(e,i){var o=0,n=0;str_cut=new String,n=e.length-1;for(var s=n;s>=0;s--)if(a=e.charAt(s),o++,escape(a).length>4&&o++,str_cut=str_cut.concat(a),o>=i)return t&&(str_cut=str_cut.concat("...")),str_cut;if(o<i)return e}var e=o(e,i);str_cut1=new String;for(var n=e.length;n>=0;n--)a=e.charAt(n),str_cut1=str_cut1.concat(a);return str_cut1},comm.phoneMask=function(e){return e.substr(0,3)+"****"+e.substr(7,11)},comm.renderLinks=function(){$("a").on("click",function(e){var a=$(this).attr("href");a&&a.indexOf("javascript")<0&&""!=a&&(e.stopPropagation(),e.preventDefault(),setTimeout(function(){comm.redirect(a)},500))})},comm.autoLogin=function(){var e=comm.getpara(),a=e&&e.loginType,i=e&&e.signature,t=e&&e.account,o=(e&&e.password,"");if(a&&"weixin"==a&&t&&""!=t){var n=customer.execute("checkSession");if(n.responseStatus&&!n.responseMessage.status){o="weixin",e={j_username:"weixin;"+t+";allin;"+i,j_password:"allin"},e.rememberMe=1;var s=customer.urlList.userLogin.url;$.ajax({url:s,cache:!1,async:!1,data:e,dataType:"json",type:"POST"})}}},comm.getFileSize=function(e){var a=/msie/i.test(navigator.userAgent)&&!window.opera,i=0;return a&&!e.files||(i=e.files[0].size),i},comm.initInputFocusEvent=function(){$("input").on("focus",function(){$(this).parents(".v3-input-wrap").addClass("active"),$(this).parents(".v3-input-wrap").addClass("active-border")}),$("input").on("blur",function(){""==$.trim($(this).val())&&$(this).parents(".v3-input-wrap").removeClass("active"),$(this).parents(".v3-input-wrap").removeClass("active-border")})},comm.bindReturnBtn=function(e,a){var i="";""!=e&&"undefined"!=typeof e&&(i="#"+e),$(i+" .v3-login-return,"+i+" .v3-return-btn").on("click",function(){""!=a&&"undefined"!=typeof a?comm.redirect(a):($.mobile.loading("show"),setTimeout(function(){$.mobile.loading("hide"),history.go(-1)},600))})},comm.getResponseResult=function(e){return!($.isEmptyObject(e)||!e.responseObject||!e.responseObject.responseStatus||$.isEmptyObject(e.responseObject.responseData))&&e.responseObject.responseData},comm.showPageError=function(e,a){var i;i=void 0==a?$(".content-page"):$("#"+a),0==i.find(".errorInfo").size()&&i.prepend("<div class='errorInfo'></div>"),i.find(".errorInfo").show().empty().append('<div class="top_warning"><span><label>'+e+'<div class="close"></div></label></span></div>'),i.find(".close").on("click",function(){i.find(".errorInfo").hide()})},comm.bindWeixin=function(){customer.execute("updateWeixinUniteBind",null,null)},comm.setOpenCenter=function(e){e.css("top",$(window).scrollTop()+($(window).height()/2-e.height()/2)),document.body.style.overflow="hidden"},comm.setCenter=function(e){var a=($(window).height()-e.height())/2,i=($(window).width()-e.width())/2,t=$(window).scrollTop()+a,o=$(window).scrollLeft()+i;e.css({top:t+"px",left:o+"px"})},comm.hdlEptObj=function(e,a){return $.isEmptyObject(e)||""==e?void 0!=a?a:"":e},comm.isWeiXin=function(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},comm.getBrowseType=function(){var e=navigator.userAgent,a={trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,mac:e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")==-1};return a},comm.removeMedicalTitleNum=function(e){return e?e.replace(/\d*_/g,""):""},comm.cutDoctorTitle=function(e){var a="";if(e.length>0)for(var i=e.split(","),t=/(医师)/g,o=0;o<i.length;o++)if(t.test(i[o])){a=i[o];break}return a},comm.cutNotDoctorTitle=function(e){var a="";if(e.length>0)for(var i=e.split(","),t=/(医师)/g,o=0;o<i.length;o++)t.test(i[o])||(a+=i[o]+",");return a},comm.getToken=function(){var e=CommService.getResponseData("/mcall/token/getToken/",null);return e&&e.token?e.token:""},comm.history={setFrom:function(e){for(var a=this,i=a.getHistory(),t=!1,o=0;o<i.length;o++){var n=i[o];n[0]==window.location.href&&(t=!0)}var s;void 0!=e?s=e:null!=TempCache.getItem("location")?(s=TempCache.getItem("location"),TempCache.setItem("location",window.location.href)):s=document.referrer,null!=TempCache.getItem("location")&&""!=TempCache.getItem("location")&&TempCache.getItem("location").indexOf("app/#")>0&&(s=TempCache.getItem("location"),TempCache.setItem("location","")),TempCache.setItem("location",window.location.href)},setLocation:function(){TempCache.setItem("location",window.location.href)},back:function(){var e,a=this,i=a.getHistory(),t=!1;if(i.length){for(var o=i.length;o>0;o++){var n=i[o];if(n[0]==window.location.href){var s=n[1];i.remove(o),e=s,t=!0;break}}TempCache.setItem("history",$.toJSON(i))}t||(e="/"),window.location.href=e},getHistory:function(){var e=TempCache.getItem("history"),a=[];return void 0!=e&&(a=$.parseJSON(e)),a}},comm.showPage=function(e){$("[data-role=page]").hide(),$(e).show()},comm.attention=function(e,a,i,t){void 0==i&&(i="确定");var o='<div id="atten"><div class="jxl_mask"></div><div class="jsx_parent"><div class="jxl_want" style="top:40%"><div class="atten_title">提示</div><div class="atten_con">'+e+'</div><div class="jxl_want_bottom"><div class="ms_sure">'+i+"</div></div></div></div></div>";a.append(o),setTimeout(function(){comm.setCenter($("#atten .jxl_want"))},50),$(".ms_sure").on("click",function(){t&&t(),setTimeout(function(){$("#atten").remove()},500)})},comm.draftAttention=function(e,a){var i='<div id="attention"><div class="jxl_mask"></div><div class="jsx_parent"><div class="jxl_want"><div class="atten_title">提示</div><div class="atten_con">'+a+'</div><div class="jxl_want_bottom" style="border-top: solid #969696 1px;"><div class="jix_l" id="no_save_dra">不保存</div><div class="jix_r" id="save_dra">保存</div><div class="clear"></div></div></div></div></div>';e.append(i),setTimeout(function(){comm.setCenter($("#attention .jxl_want"))},50)},comm.equipment={IsPC:function(){for(var e=navigator.userAgent,a=new Array("Android","iPhone","SymbianOS","Windows Phone","iPod"),i=!0,t=0;t<a.length;t++)if(e.indexOf(a[t])>0){i=!1;break}return i}},comm.shareLog=function(e){var a=TempCache.getItem("userId"),i=comm.getpara().conId,t={customerId:a,shareType:3,resourceId:i,resourceType:3,refId:i,isValid:1,refUrl:window.location.href};t=$.extend(t,e),$.ajax({url:"/mcall/customer/share/createShareLog/",type:"POST",data:{paramJson:$.toJSON(t)},success:function(){}})},comm.bindLinks=function(e){$(e).on("click",function(e){window.location.href=$(this).find("a").attr("href")})},comm.releaseBox=function(){$(".al-release").on("click",function(e){e.stopPropagation(),$(".al-releasePageMask").hasClass("show")||($(".al-releasePageMask").addClass("show"),comm.browser.versions.android?$(".al-releasePageMask").addClass("al-fullBlurAndroid"):$(".al-mainInner").addClass("al-fullBlur"))}),$(".al-releaseCancel").on("click",function(e){e.stopPropagation(),$(".al-releasePageMask").hasClass("show")&&($(".al-releasePageMask").removeClass("show"),comm.browser.versions.android?$(".al-releasePageMask").removeClass("al-fullBlurAndroid"):$(".al-mainInner").removeClass("al-fullBlur"))})},comm.getURrlName=function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(a);return null!=i?unescape(i[2]):null},comm.twoFilterController=function(){$(".yd-typeFilterNavbarItem").on("click",function(e){var a=$(this).data("role");$(this).hasClass("active")?($(this).removeClass("active"),$(".yd-typeFilterMainMask[data-role="+a+"]").removeClass("active"),$(".yd-discoverMask").removeClass("show")):($(this).addClass("active").siblings().removeClass("active"),$(".yd-typeFilterMainMask").removeClass("active"),$(".yd-typeFilterMainMask[data-role="+a+"]").addClass("active"),$(".yd-discoverMask").addClass("show"))}),$(".EV-sortFilter").on("click",".yd-oneFloorFilterItem[data-role='sort']",function(e){$(this).addClass("active").siblings().removeClass("active"),$(".yd-typeFilterNavbarItem").removeClass("active"),$(".yd-typeFilterMainMask").removeClass("active"),$(".yd-typeFilterNavbarItem[data-role='sort'] span").text($(this).text()),$(".yd-discoverMask").removeClass("show")}),$(".EV-sortFilter").on("click",".yd-oneFloorFilterItem[data-role='filter']",function(e){$(this).addClass("active").siblings().removeClass("active"),$(".yd-typeFilterNavbarItem").removeClass("active"),$(".yd-typeFilterMainMask").removeClass("active"),$(".yd-typeFilterNavbarItem[data-role='filter'] span").text($(this).text()),$(".yd-discoverMask").removeClass("show")})},comm.confirmBox=function(e){if(0===$(".yd_popup").length){var a='<section class="yd_popup"><section class="popupCont"><figure class="closePopup"><img src="/image/Close@2x.png"></figure>'+(e.title?'<aside class="title">'+e.title+"</aside>":"")+(e.content?'<aside class="content">'+e.content+"</aside>":"")+'<section class="button"><button class="btnCancel">'+e.cancel+'</button><button class="btnEnter">'+e.ensure+"</button></section></section></section>";$("body").append(a),setTimeout(function(e){$(".yd_popup").addClass("show")},100),$(".closePopup").on("click",function(){$(".yd_popup").remove()}),$("body").off("click").on("click",".btnEnter",function(){return e.ensureCallback&&e.ensureCallback(),$(".yd_popup").removeClass("show").remove(),!1}).on("click",".btnCancel",function(){return e.cancelCallback&&e.cancelCallback(),$(".yd_popup").removeClass("show").remove(),!1}),e.callBack&&e.callBack()}else $(".yd_popup").addClass("show")},comm.alertBox=function(e){if(0===$(".yd-alertModalMask").length){var a='<section class="yd-confirmModalMask yd-alertModalMask" style="background-color:rgba(0,0,0,0.3); "><section class="yd-confirmModal"><article class="yd-confirmModalContent"><article>'+(e.mTitle?"<h2>"+(e.mTitle||"")+"</h2>":"")+"<p>"+(e.title||"")+'</p></article></article><footer class="yd-confirmModalBtns"><button class="yd-confirmModalEnsureBtn" style="width:100%">'+(e.ensure||"")+"</button></footer></section></section>";$("body").append(a),setTimeout(function(e){$(".yd-alertModalMask").addClass("show")},50),$("body").on("click",".yd-confirmModalEnsureBtn",function(){return e.ensureCallback&&e.ensureCallback(),$(".yd-alertModalMask").removeClass("show"),!1})}else $(".yd-alertModalMask").addClass("show")},comm.alertBoxClo=function(e){if(0===$(".yd-alertModalMask").length){var a='<section class="yd-confirmModalMask yd-alertModalMask"><section class="yd-confirmModal"><article class="yd-confirmModalContent"><article style="position:relative"><h2>'+(e.mTitle||"")+"</h2><p>"+(e.title||"")+'</p><span><img class="yd-closeBtn" style=" position:absolute; top:-30px; right:-55px; " src="/image/classes/department/login_close.png"/></span></article></article><footer class="yd-confirmModalBtns"><button class="yd-confirmModalEnsureBtn" style="width:100%">'+(e.ensure||"")+"</button></footer></section></section>";$("body").append(a),setTimeout(function(e){$(".yd-alertModalMask").addClass("show")},50),$("body").on("click",".yd-confirmModalEnsureBtn",function(){return e.ensureCallback&&e.ensureCallback(),$(".yd-alertModalMask").removeClass("show"),!1}),$("body").on("click",".yd-closeBtn",function(){return e.cancelCallback&&e.cancelCallback(),$(".yd-alertModalMask").removeClass("show"),!1})}else $(".yd-alertModalMask").addClass("show")},comm.inputFocus=function(e){e=e||{},$(".yd-searchInputBar input").on("keyup",function(a){0!==$(this).val().length?($(this).parent().find(".icon-searchCancel").show(),e.inputCallback&&e.inputCallback($(this))):($(this).parent().find(".icon-searchCancel").hide(),e.emptyCallback&&e.emptyCallback())}),$(".yd-searchInputBar input").on("click",function(){$(".yd-searchHead").addClass("yd-searchHeadShow"),$(this).addClass("focus"),$(".yd-searchHead .yd-searchCancel").addClass("show"),e.focusCallback&&e.focusCallback()}),$(".yd-searchCancel").on("click",function(a){return"icon-searchCancel"===a.target.className?($(".yd-searchInputBar").find("input").val(""),$(".icon-searchCancel").hide(),void(e.clearCallback&&e.clearCallback())):($(".yd-searchInputBar").removeClass("yd-searchHeadShow"),$(".yd-searchInputBar input").removeClass("focus"),$(".yd-searchInputBar .yd-searchCancel").removeClass("show"),e.cancelCallback&&e.cancelCallback(),void 0)}),$(".yd-searchFocusMask").on("click",function(){$(".yd-searchHead").removeClass("al-searchHeadShow"),$(".yd-searchHead input").removeClass("focus"),$(".yd-searchHead .yd-searchCancel").removeClass("show")})},comm.uploadBtn=function(e){var a='<!-- 发布 --><section class="al-releasePageMask"><figure class="al-releaseTitle"><img src="/images/img50/pages/index/release_title.png" alt=""></figure><section class="al-releaseBtn"><a href="javascript:;" _href="//m.allinmd.cn/pages/case/case_upload.html"><figure class="al-releaseItem"><img src="/images/img50/pages/index/release_case.png" alt=""><figcaption>病例</figcaption></figure></a><figure class="al-releaseItem"><a href="javascript:;" _href="//m.allinmd.cn/pages/topic/topic_upload.html"><img src="/images/img50/pages/index/release_topic.png" alt=""><figcaption>话题</figcaption></figure></a><a href="javascript:;" _href="//m.allinmd.cn/pages/personal/personal_draft.html"><figure class="al-releaseItem"><img src="/images/img50/pages/index/release_draft.png" alt=""><figcaption>草稿</figcaption></figure></a></section><figure class="al-releaseCancel"><img src="/images/img50/pages/index/release_cancel.png" alt=""></figure></section>';!$(".al-releasePageMask").length>0&&$("body").append(a),e.on("click",function(e){return comm.browser.versions.ios?($("body").css("overflow","hidden"),$(".al-releasePageMask").addClass("show"),$(".al-mainInner").addClass("al-fullBlur"),!1):($("body").css("overflow","hidden"),$(".al-mainInner").addClass("al-fullBlurAndroid"),$(".al-releasePageMask").addClass("al-fullBlurAndroid"),!1)}),$(".al-releaseBtn a").on("click",function(){var e=$(this).attr("_href");user.privExecute({operateType:"auth",callback:function(){window.location.href=e}})}),$(".al-releaseCancel").on("click",function(e){return comm.browser.versions.ios?($("body").css("overflow","auto"),$(".al-releasePageMask").removeClass("show"),$(".al-mainInner").removeClass("al-fullBlur"),void 0):($("body").css("overflow","auto"),$(".al-mainInner").removeClass("al-fullBlurAndroid"),$(".al-releasePageMask").removeClass("al-fullBlurAndroid"),!1)})},comm.footerNav=function(){function e(){var e={},a=comm.date.local_time();TempCache.getItem("userId")&&(TempCache.getItem("readCollectionTime")||TempCache.setItem("readCollectionTime",a),TempCache.getItem("readDraftTime")||TempCache.setItem("readDraftTime",a),TempCache.getItem("readTrendTime")||TempCache.setItem("readTrendTime",a),TempCache.getItem("readFansTime")||TempCache.setItem("readFansTime",a),TempCache.getItem("readPreferTime")||TempCache.setItem("readPreferTime",a)),e.readCollectionTime=TempCache.getItem("readCollectionTime"),e.readDraftTime=TempCache.getItem("readDraftTime"),e.readTrendTime=TempCache.getItem("readTrendTime"),e.readFansTime=TempCache.getItem("readFansTime"),e.readPreferTime=TempCache.getItem("readPreferTime");var i={};i.paramJson=$.toJSON(e),$.ajax({type:"post",url:M_CALL+"customer/message/getSpecialCount/",data:i,dataType:"json",success:function(e){if(e&&e.responseObject.responseData&&e.responseObject.responseData.data_list&&e.responseObject.responseData.data_list.length>0){var a=e.responseObject.responseData.data_list[0];specialCount={collectionNum:a.collectionNum,draftNum:a.draftNum,fansNum:a.fansNum,messageNum:a.messageNum,preferNum:a.preferNum,trendsNum:a.trendsNum},a.trendsNum>0&&($(".al-footerBarItem").eq(0).append('<i class="icon-newTips"></i>'),$(".al-indexRecommendItem a").eq(0).append('<i class="icon-newTips"></i>')),a.messageNum>0&&$(".al-footerBarItem").eq(3).append('<i class="al-newsNum">'+(a.messageNum<100?a.messageNum:"...")+"</i>"),(a.draftNum>0||a.fansNum>0||a.preferNum>0||a.collectionNum>0)&&$(".al-footerBarItem").eq(4).append('<i class="icon-newTips"></i>'),a.collectionNum&&$(".ev-collectIcon").append('<i class="al-newsNum">'+(a.collectionNum<100?a.collectionNum:"...")+"</i>"),a.draftNum>0&&$(".ev-draftIcon").append('<i class="al-newsNum">'+(a.draftNum<100?a.draftNum:"...")+"</i>"),a.fansNum>0?$(".al-personalSnsNum").eq(0).append('<i class="icon-newTips"></i>'):$(".al-personalSnsNum").eq(0).find("i").remove(),a.preferNum>0?$(".al-personalSnsNum").eq(2).append('<i class="icon-newTips"></i>'):$(".al-personalSnsNum").eq(2).find("i").remove()}},error:function(){}})}comm.uploadBtn($(".al-release")),TempCache.getItem("userId")&&e()},comm.getRegisterName=function(e,a){var i="";return e?i=e.substr(0,2)+"****"+e.substring(e.lastIndexOf("@")):a&&(i=a.substr(0,3)+"****"+a.substring(a.length-4)),i},comm.showAppDownload=function(e,a){if(comm.getAppLogin(),1!=localStorage.getItem("appLogin")){var i=navigator.userAgent,t=!1;i.indexOf("iPhone")>0&&(t=!0);var o=i.indexOf("MicroMessenger")>0;if("undefined"==typeof a&&(index=5),e){var n,s,l="DownAppClosed_";n=$.cookie(l),n||($("body").find(".mo-download-app").remove(),s=t?o?"http://a.app.qq.com/o/simple.jsp?pkgname=com.allin.social":"https://itunes.apple.com/cn/app/wei-yi-for-iphone/id986266583":"http://a.app.qq.com/o/simple.jsp?pkgname=com.allin.social",$("body").append('<div class="mo-download-app"><div class="app_position_close"><img src="/images/img50/app/colse.png" /></div><div class="app_position_logo"><img src="/images/img50/app/allin_logo.png" /></div><div class="app_position_text"><img src="/images/img50/app/app_text_'+e+'.png" /></div><div class="app_position_down"><a href="'+s+'" data-ajax="false">   <img src="/images/img50/app/downland.png" /></a></div></div>'),$(".mo-download-app").css("zIndex",a),$(".app_position_close").on("vclick",function(){$(".mo-download-app:last").remove(),$.cookie(l,1,{expires:1,path:"/"})}))}}},comm.getAppLogin=function(){!localStorage.getItem("appLogin")&&localStorage.getItem("userId")&&$.ajax({type:"post",url:"/mcall/log/customer/login/getIsLogin/",data:{paramJson:$.toJSON({dataFlag:2,pageIndex:1,pageSize:10})},async:!1,dataType:"json",success:function(e){e.responseObject&&e.responseObject.responseMessage&&localStorage.setItem("appLogin",e.responseObject.responseMessage.isLogin)},error:function(){}})},String.prototype.splice=function(e,a,i){return this.slice(0,e)+i+this.slice(e+Math.abs(a))},comm.recognizeAppShareLink=function(e){if(comm.getparaNew()&&comm.getparaNew().share&&"app"==comm.getparaNew().share.toLowerCase()){var a=$(".content-page");0==a.size()&&(a=$("body")),a.append("<div class='app_download_wx_jump_app'><div class='bg'></div><div class='center'><img src='/images/img50/callApp/share-app-popup.png' alt='' ></div></div>");var i=document.querySelector('meta[name="viewport"]').getAttribute("content"),t=i.match(/initial\-scale=([\d\.]+)/)||i.match(/maximum\-scale=([\d\.]+)/);if(null!=t&&1==parseInt(t[1])&&$(".app_download_wx_jump_app").addClass("viewport-small"),$("video,input,select,textarea,object").hide(),"undefined"!=typeof e)e=$.extend(e,{el:".app_download_wx_jump_app .center"});else var e={el:".app_download_wx_jump_app .center",ios:"allinmdios://",ios9:"http://app.allinmd.cn/applinks.html",android:"allin://com.allin.social:75235"};return comm.bindCallApp(e),$("body").css("overflow","hidden").on("mousemove touchmove",function(e){return!1}),!0}return!1},comm.bindCallApp=function(e){function a(){var a="";navigator.userAgent;return h&&void 0!=e.android&&(a=e.android),y&&void 0!=e.ios&&(a=e.ios),a}function i(){b.forEach(window.clearTimeout),b=[]}function t(){if(h){if(m||w)return c("android"),!1;o()}if(y)if(u){if(m||w)return c("ios"),!1;o(e.ios9)}else{if(m||w)return c("ios"),!1;o(e.ios)}}function o(e){$(v).off("click").on("click",{url:e||""},function(e){var i=e.data.url;if(f=+new Date,!i)var i=a();n(i)})}function n(e){if(e){if(u)l(e);else{var a=e;setTimeout(function(){g?l(a):s(a)},0)}r()}}function s(e){var a=document.createElement("iframe");a.src=e,a.style.display="none",document.body.appendChild(a),setTimeout(function(){document.body.removeChild(a),a=null},0)}function l(e){window.location.href=e}function c(e){var a;a="android"==e?"/image/android.png":"/image/ios.png";var i=$(".content-page");i.length>0?i.append("<div class='app_download_wx'><img src='"+a+"' /></div>"):$("body").append("<div class='app_download_wx'><img src='"+a+"' /></div>"),$("body").css("overflow","hidden").bind("touchmove",function(e){e.preventDefault()}),$(".app_download_wx").on("click",function(){$(this).remove(),$("body").css("overflow","auto").unbind("touchmove")})}function r(){h?b.push(window.setTimeout(function(){+new Date-f<3100&&(window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=cn.net.yiding")},3e3)):b.push(window.setTimeout(function(){Date.now()-f<3100&&(m?window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=cn.net.yiding":window.location.href="https://itunes.apple.com/cn/app/yi-ding/id1127209482?mt=8")},3e3))}function d(){}if("object"!=typeof e)return void d();if(!e.hasOwnProperty("ios")&&!e.hasOwnProperty("android"))return void d();var p=window.navigator.userAgent,m=/MicroMessenger/.test(p),u=!1,g=!1;u=Boolean(navigator.userAgent.match(/OS ([9]_[0-9]|[10|11][_\d])[_\d]* like Mac OS X/i)),g=Boolean(navigator.userAgent.match(/OS ([9]_[0-1])[_\d]* like Mac OS X/i));var f,v,h=p.indexOf("Android")>-1||p.indexOf("Linux")>-1,y=p.indexOf("iPhone")>-1||p.indexOf("Mac")>-1,w=p.indexOf("weibo")>-1||p.indexOf("Weibo")>-1,b=(p.indexOf("QQ")>-1&&p.indexOf("NetType")>-1,[]),k=a();$(window).on("blur pagehide beforeunload",i),"undefined"!=typeof comm.getparaNew().ios9&&n(k),"boolean"==typeof e.runAtOnce&&e.runAtOnce&&(f=+new Date,u?m||w||l(e.ios9):m||w||n(k)),"string"==typeof e.el&&(v=e.el,t())},comm.bindNav=function(e,a,i){function t(){$("#selector_top").remove();var i="";switch(a&&(i=' <div class="app_iphone" id="callAppBtn">                <a href="javascript:void(0)" data-ajax="false">                    <div class="app_iphone_text">打开APP</div>                </a>           </div>'),n=$("header"),n.size()||($(".content-page").prepend('<header class="al-indexHeader"></header>'),n=$("header")),e){case 1:title="病例",s=TempCache.getItem("prevCaseHref");break;case 2:title="视频";break;case 5:title="文库";break;case 6:title="话题",s=TempCache.getItem("prevTopicHref");break;default:title=""}n.html(i+'<figure class="al-indexHeaderItem"><a href="javascript:;" data-ajax="false"><img src="/images/img50/pages/personal/arrow_back.png" alt=""></a></figure><figure class="al-indexHeaderItem"><h1>'+title+'</h1></figure><figure class="al-indexHeaderItem"><a href="javascript:void(0)"></a></figure>')}function o(){t(),$(".al-indexHeaderItem a").on("click",function(){return s?(location.href=s,1==e&&TempCache.removeItem("prevCaseHref"),6==e&&TempCache.removeItem("prevTopicHref")):document.referrer.lastIndexOf("/passport/")>-1||document.referrer.indexOf("seminar")>-1||!document.referrer?window.location.href="//m.allinmd.cn":history.back(),!1})}var n,s="";o()},comm.appWakeUp=function(e,a){function i(e){if("undefined"!=typeof t.callAppOptions)var a=$.extend(t.callAppOptions,{el:e});else var a={el:e,ios:"allinmdios://",ios9:"http://app.allinmd.cn/applinks.html",android:"allin://com.allin.social:75235"};comm.bindCallApp(a)}var t=this;this.callAppOptions=a;var o='    <section class="al-appWakeUpFigure">        <figure class="al-appWakeUpImg">            <img src="/images/img50/pages/index/logo.png" alt="">            <figcaption>                <h2>唯医APP</h2>                <p>打开唯医APP浏览医学资源，更省流量</p>            </figcaption>        </figure>        <button class="al-appWakeUpFigureBtn ev-openAppBtn">            打开APP        </button>    </section>',n='<button class="al-appWakeUpBtn icon-appWakeUp ev-openAppBtn"><span>打开APP</span></button>';"figure"===e?($("body").prepend(o),i(".ev-openAppBtn")):"btn"===e?($(".al-indexHeaderItem").filter(":last").append(n),i(".ev-openAppBtn")):"confirm"===e&&(comm.confirmBox({title:'在"唯医应用"中打开链接吗？',cancel:"取消",ensure:"打开",callBack:function(){i(".al-confirmModalEnsureBtn")},cancelCallback:function(){return!1}}),$(".al-confirmModal").css({width:"30rem",marginLeft:"-15rem"}),$(".al-confirmModalContent").css({fontSize:"2em"}),$(".al-confirmModalCancelBtn").css({border:"none",borderRight:"1px solid #e4e9ed"}))},comm.authFail=function(){var e='<section class="al-authFailBox"><header class="al-authFailTitle"><h2>认证拒绝</h2></header><article class="al-authFailText"><p>很抱歉！您提交的认证资料不符合要求，为了保证您的权益，请重新认证！</p></article><section class="al-authFailBtn"><button class="btn-primary-lg" id="now_goAuth">现在认证</button><span class="al-authGiveUp">暂不认证</span></section></section>';0===$(".al-authFailBox").size()?($("body").append(e),setTimeout(function(){comm.browser.versions.ios?($(".al-authFailBox").addClass("show"),$(".al-mainInner").addClass("al-fullBlur"),0!==$(".content-page").size()&&$(".content-page").addClass("al-fullBlur")):($(".al-authFailBox").addClass("al-fullBlurAndroid"),$(".al-mainInner").addClass("al-fullBlurAndroid"),0!==$(".content-page").size()&&$(".content-page").addClass("al-fullBlurAndroid")),0!==$(".al-releasePageMask").size()&&$(".al-releasePageMask").removeClass("show")},200)):(comm.browser.versions.ios?($(".al-authFailBox").addClass("show"),$(".al-mainInner").addClass("al-fullBlur"),0!==$(".content-page").size()&&$(".content-page").addClass("al-fullBlur")):($(".al-authFailBox").addClass("al-fullBlurAndroid"),$(".al-mainInner").addClass("al-fullBlurAndroid"),0!==$(".content-page").size()&&$(".content-page").addClass("al-fullBlurAndroid")),0!==$(".al-releasePageMask").size()&&$(".al-releasePageMask").removeClass("al-fullBlurAndroid"))},comm.hoverSidebarChange=function(){$(".Ev-sidebarHelp").css("marginTop","500px"),$("#al-mainSidebarList li").on("click",function(){$(this).addClass("active").siblings().removeClass("active")}),$(".al-collapseLogo").css("display","none"),$(".al-collapseItem").css("display","none"),$(".al-mainSidebarItem figcaption").css("display","block"),$("#al-mainSidebar").on("mouseenter",function(){$("#al-mainSidebarWide").css("width","152px"),$(".al-mainSidebarItem figcaption").css("display","none"),$(".al-collapseLogo").css("display","block"),$(".al-collapseItem").css("display","inline-block"),$(".al-mainLogo").css("display","none"),$(".al-mainSidebarItem").addClass("leftnavHover"),$(".al-mainSidebarItem").removeClass("leftnavNarmal")}),$("#al-mainSidebar").on("mouseleave",function(){$("#al-mainSidebarWide").css("width","80px"),$(".al-mainSidebarItem").addClass("leftnavNarmal"),$(".al-mainSidebarItem").removeClass("leftnavHover"),$(".al-mainSidebarItem figcaption").css("display","block"),$(".al-collapseLogo").css("display","none"),$(".al-collapseItem").css("display","none"),$(".al-mainLogo").css("display","block")})},comm.isPC=function(){for(var e=navigator.userAgent,a=new Array("Android","iPhone","SymbianOS","Windows Phone","iPod"),i=!0,t=0;t<a.length;t++)if(e.indexOf(a[t])>0){i=!1;break}return i},comm.isIe8=function(){var e=navigator.appName,a=navigator.appVersion,i=a.split(";"),t=i[1].replace(/[ ]/g,""),o=parseInt(t.substring(4));
return"Microsoft Internet Explorer"===e&&o<10},comm.changeUrl=function(e){var a="",i="";return comm.isPC()?(i=/\/\/www.yi-ding.net.cn\/call\//g,a=i.test(e)?e.replace(/\/\/www.yi-ding.net.cn\/call\//,"//www.yi-ding.net.cn/call/"):e.replace(/\/\/m.yi-ding.net.cn\/mcall\//,"//www.yi-ding.net.cn/call/")):(i=/\/\/m.yi-ding.net.cn\/mcall\//g,a=i.test(e)?e.replace(/\/\/m.yi-ding.net.cn\/mcall\//,"//m.yi-ding.net.cn/mcall/"):e.replace(/\/\/www.yi-ding.net.cn\/call\//,"//m.yi-ding.net.cn/mcall/")),a},comm.guideUser=function(e){$(".guideModel").remove();var a="",i=!1;switch(e){case 0:i=!localStorage.getItem("testWrong"),a='<section class="yd-confirmModalMask show  guideModel" style="background-color:rgba(0,0,0,.6)"><div class="pcErrorQuestions"><div class="guideCont"><img src="/image/guide/errorTi.png"></div><div class="guideBut"><img src="/image/guide/button.png"></div></div></section>\n';break;case 1:i=!localStorage.getItem("collectQue"),a='<section class="yd-confirmModalMask show  guideModel" style="background-color:rgba(0,0,0,.6)"><div class="pcQuestionsCollect"><div class="guideCont"><img src="/image/guide/questionsCollect.png"></div><div class="guideBut"><img src="/image/guide/button.png"></div></div></section>\n';break;case 2:i=!localStorage.getItem("collectCourse"),a='<section class="yd-confirmModalMask show  guideModel" style="background-color:rgba(0,0,0,.6)"><div class="pcCourseCollect"><div class="guideCont"><img src="/image/guide/courseCollect.png"></div><div class="guideBut"><img src="/image/guide/button.png"></div></div></section>\n';break;case 3:}if(i){switch(e){case 0:localStorage.setItem("testWrong","true");break;case 1:localStorage.setItem("collectQue","true");break;case 2:localStorage.setItem("collectCourse","true")}$("body").append(a),$(".guideBut").unbind("click").bind("click",function(){$(".guideModel").remove()})}},comm.pcSideModule=function(e){$(".yd-mainInner").removeClass("none"),0===$(".al-header").size()?($(".yd-mainInner").prepend('<header class="al-header al-indexHeader pcModule" style="margin-left: 0px;">            <section class="al-headerContainer">                <ul class="al-headerTopNav" id="al-headerTopNav" data-alcode-mod="11">'+function(e){var a="";return $(e).each(function(e,i){a+='<li class="'+(i.active?"active":"")+'"><a href="'+i.href+'">'+i.item+"</a></li>"}),a}(e)+'                </ul>                <div class="al-se-lo-re">                    <div class="al-search">                        <div  class="icon-search" data-url="//www.yi-ding.net.cn/pages/search/search.html">                        </div>                    </div>                    <div class="al-lo-re notLogin" id="notLogin">                        <div class="al-login">登录</div>                        <div class="al-register">注册</div>                    </div>                    <div class="al-lo-re isLogin" id="isLogin">                        <div class="user-header"><img src="" style="width:40px;height:40px;"></div>                        <div class="user-name"><a href="//www.yi-ding.net.cn/pages/personal/personal_index.html">黄志强</a></div>                    </div>                </div>            </section>        </header><section id="al-mainSidebar" class="pcModule" style="width: auto; height: 1000px;position: fixed; left: 0;top: 0; z-index: 4;">            <!--左侧导航栏-->            <aside class="al-mainSidebar al-mainSidebarCollapse pcModule" style="width: 80px;" id="al-mainSidebarWide">                <header class="al-collapseLogo" style="display: none;">                    <img src="/image/index/bigLogo.png" alt="">                </header>                <header class="al-mainLogo" style="display: block;">                    <img src="/image/index/logo.png" alt="" style="box-shadow: rgb(51,51,51) 0px 0px 2px;">                </header>                <section class="al-mainSidebarList" id="al-mainSidebarList" data-alcode-mod="6">                    <ul>                        <li class="al-mainSidebarItem active Ev-sidebarIndex">                            <a href="//www.yi-ding.net.cn">                                <i class="icon-home"></i>                                <figcaption style="display: block;">首页</figcaption>                                <article class="al-collapseItem" style="display: none;">                                    <p class="al-collapseItemText">                                    </p>                                    <h4>首页</h4>                                    <p>HOME</p>                                    <p></p>                                </article>                            </a>                        </li>                        <li class="al-mainSidebarItem Ev-sidebarMessage">                            <a href="/pages/message/message_discuss.html">                                <i class="icon-message"></i>                                <figcaption style="display: block;">消息</figcaption>                                <article class="al-collapseItem" style="display: none;">                                    <p class="al-collapseItemText">                                    </p>                                    <h4>消息</h4>                                    <p>MESSAGE</p>                                    <p></p>                                </article>                            </a>                        </li>                        <li class="al-mainSidebarItem Ev-sidebarHelp">                            <a href="/pages/help_feedback/help_feedback.html">                                <i class="icon-feedback"></i>                                <figcaption style="display: block;">帮助与反馈</figcaption>                                <article class="al-collapseItem" style="display: none;">                                    <p class="al-collapseItemText">                                    </p>                                    <h4>帮助与反馈</h4>                                    <p>Q & A</p>                                    <p></p>                                </article>                            </a>                        </li>                    </ul>                </section>            </aside>        </section>'),$(".icon-search").unbind("click").bind("click",function(){function e(){var e=location.href,a=e.split("/"),i=a.slice(a.length-1,a.length).toString(String).split(".");return i.slice(0,1)}switch(e()[0]){case"question":commLog.creatEvent({id:34,url:location.href,keyword:"习题页搜索",browseType:"3"});break;case"message_discuss":commLog.creatEvent({id:35,url:location.href,keyword:"消息讨论点击搜索",browseType:"29"});break;case"message_like":commLog.creatEvent({id:36,url:location.href,keyword:"消息赞了点击搜索",browseType:"30"});break;case"message_index":commLog.creatEvent({id:37,url:location.href,keyword:"系统消息点击搜索",browseType:"27"});break;case"exercise_order_begin":commLog.creatEvent({id:49,url:location.href,keyword:"顺序练习首页点击搜索",browseType:"32"});break;case"exercise_order":commLog.creatEvent({id:50,url:location.href,keyword:"顺序练习答题点击搜索",browseType:"34"});break;case"exercise_order_result":commLog.creatEvent({id:34,url:location.href,keyword:"习题-顺序练习答题结果页",browseType:"35"});break;case"exercise_suit_wrong":commLog.creatEvent({id:34,url:location.href,keyword:"习题-习题资源页",browseType:"34"});break;case"exercise_suit_exhibition":commLog.creatEvent({id:34,url:location.href,keyword:"习题-习题资源页",browseType:"34"});break;case"exercise_project_begin":commLog.creatEvent({id:47,url:location.href,keyword:"专项练习首页点击搜索",browseType:"31"});break;case"exercise_project":commLog.creatEvent({id:48,url:location.href,keyword:"专项练习答题点击搜索",browseType:"34:"});break;case"exercise_project_result":commLog.creatEvent({id:34,url:location.href,keyword:"习题-专项练习答题结果页",browseType:"35"});break;case"personal_index":commLog.creatEvent({id:39,url:window.location.href,keyword:"个人中心点击搜索",browseType:"42"});break;case"personal_wrongList":commLog.creatEvent({id:40,url:window.location.href,keyword:"错题本点击搜索",browseType:"33"});break;case"personal_myDiscuss":commLog.creatEvent({id:41,url:window.location.href,keyword:"我的讨论点击搜索",browseType:"43"});break;case"personal_collection":commLog.creatEvent({id:42,url:window.location.href,keyword:"收藏点击搜索",browseType:"47"});break;case"personal_learnHistory":commLog.creatEvent({id:43,url:window.location.href,keyword:"学习历史点击搜索",browseType:"49"});break;case"personal_setting":commLog.creatEvent({id:44,url:window.location.href,keyword:"设置点击搜索",browseType:"52"});break;case"personal_introConfig":commLog.creatEvent({id:45,url:window.location.href,keyword:"编辑资料点击搜索",browseType:"50"});break;case"personal_qualification":commLog.creatEvent({id:46,url:window.location.href,keyword:"认证资料点击搜索",browseType:"51"});break;case"":commLog.creatEvent({id:31,url:window.location.href,keyword:"首页点击搜索",browseType:"24"})}window.location.href=$(this).attr("data-url")})):$("#al-headerTopNav li").each(function(a,i){$(i).removeClass(),e[a]&&$(i).addClass(e[a].active?"active":"").find("a").attr("href",e[a].href).text(e[a].item)}),0===$(".al-rightNav").size()&&($("body").append('<aside class="pcModule al-rightNav" id="al-rightNav">           <div class="toTop rightNav" id="toTop">               <i class="icon-toTop" style="display: block;"></i>               <p style="display: none;">回到<br>顶部</p>           </div>           <div class="code rightNav" id="code">               <i class="icon-code" style="display: block;"></i>               <p style="display: none;">二维码</p>               <p class="codePic" style="display: none;">                   <img src="/image/1486539881.png">               </p>           </div>           <div class="suggestion rightNav" id="suggestion">               <i class="icon-suggestion"></i>               <p style="display: none;">意见<br>反馈</p>           </div>           <section class="yd-suggestionBox">                <button class="yd-suggestionBoxClose">X</button>               <article class="yd-suggestionText">                   <textarea name="" id="Ev-suggestionText" cols="30" rows="10" placeholder="请输入反馈，我们将不断为您改进"></textarea>                    <span>500</span>               </article>               <figure class="yd-suggestionBtn">                   <button>提交</button>               </figure>           </section>        </aside>'),$("#toTop").on("click",function(){return $("html,body").animate({scrollTop:0},500),!1}),$("#al-rightNav").on("mouseenter","div",function(){$(this).children("i").css("display","none"),$(this).children("p").css("display","block")}),$("#al-rightNav").on("mouseleave","div",function(){$(this).children("i").css("display","block"),$(this).children("p").css("display","none")}),0==$("#course-main").length&&$(window).on("scroll",function(){var e=$("#al-headerTopNav").innerHeight(),a=$(window).scrollTop();a>=e?$("#toTop").fadeIn(500):$("#toTop").fadeOut(500)}))},comm.bottomSelector=function(){0===$(".yd-bottomSelectorBox").size()?($("body").append('<footer class="yd-bottomSelectorBox">        <footer class="yd-bottomSelector">            <section class="yd-bottomSelectorItemBox">                <section class="yd-bottomSelectorItem">保存</section>                <section class="yd-bottomSelectorItem">放弃</section>            </section>            <section class="yd-bottomSelectorItemBox cancel">                <section class="yd-bottomSelectorItem">取消</section>            </section>        </footer>    </footer>'),setTimeout(function(){$(".yd-bottomSelectorBox").addClass("on")})):$(".yd-bottomSelectorBox").addClass("on")},comm.pcFooterModule=function(){0===$(".yd-mainFooter").size()&&$(".yd-mainInner").append('<footer class="yd-mainFooter pcModule">        <section class="yd-mainFooterInner" data-alcode-mod="12">            <section class="yd-mainFooterContent">                <section class="yd-mainFooterLinks">                    <a href="/pages/help/statement.html" class="yd-mainFooterLinkItem" style="padding-left: 0;">隐私声明</a>                    <a href="/pages/help/service.html" class="yd-mainFooterLinkItem">服务条款</a>                    <a href="/pages/help/about_us.html" class="yd-mainFooterLinkItem">关于我们</a>                    <a href="/pages/help/contact.html" class="yd-mainFooterLinkItem" style="padding-right: 0;border-right: none;">联系我们</a>                </section>                <article class="yd-mainFooterMsg">                    <figure class="yd-mainFooterMsgImg marginR">                        <a id="___szfw_logo___" href="https://credit.szfw.org/CX20160321018165560180.html" target="_blank">                            <img src="//img10.allinmd.cn/v3/common/icon/site_1.png" alt="">                        </a>                    </figure>                    <figure class="yd-mainFooterMsgImg">                        <a href="http://www.anquan.org/authenticate/cert/?site=www.allinmd.cn&amp;at=business">                            <img src="//img10.allinmd.cn/v3/common/icon/site_2.png" alt="">                        </a>                    </figure>                </article>                <article class="yd-mainFooterRecordMsg">                    <p>京ICP备14007118号-3 京公网安备 11010502031779号京卫计网审[2014] 第0378号 </p>                    <p>Copyright@2017 Yi-ding.net.cn All Rights Reserved.版权所有@北京欧应科技有限公司</p>                    <p>地址：北京市朝阳区光华路9号光华路SOHO2期D座802    <span>电话：010-59007121</span></p>                </article>            </section>        </section>    </footer>')},comm.maskBackground={show:function(e){console.log("进入蒙层"),0===$(".yd-maskBackground").size()?$(".yd-mainInner").append("<section class='yd-maskBackground' style='background-color:"+(e?e:"rgba(0,0,0,0)")+"; '></section>"):$(".yd-maskBackground").show()},hide:function(){$(".yd-maskBackground").hide()}},Array.prototype.forEach||(Array.prototype.forEach=function(e,a){var i,t;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),n=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=a),t=0;t<n;){var s;t in o&&(s=o[t],e.call(i,s,t,o)),t++}});var loginAbout={};loginAbout.init=function(e){$.ajax({url:"//www.yi-ding.net.cn/call/yiding/web/user/getWebUser/",dataType:"json",async:!1,data:{paramJson:$.toJSON({customerId:localStorage.getItem("userId")})},type:"POST",beforeSend:function(){comm.loading.show()},success:function(a){comm.loading.hide(),a.responseObject.responseStatus?(localStorage.setItem("userId",a.responseObject.responseMessage.userId),localStorage.setItem("userState","true"),(localStorage.getItem("allinUrl")||localStorage.getItem("weiUrl"))&&(localStorage.removeItem("allinUrl"),localStorage.removeItem("weiUrl")),loginAbout.changeHead(),$(window).unload(function(){localStorage.setItem("unActive","0"),localStorage.removeItem("allLogin")}),window.onbeforeunload=function(){localStorage.setItem("unActive","0"),localStorage.removeItem("allLogin")},localStorage.getItem("allLogin")&&comm.alertBox({title:"成功使用唯医登录<br/>之后您可以使用手机快捷登录医鼎",ensure:"好的",ensureCallback:function(){localStorage.removeItem("allLogin")}})):($(".notLogin").show(),$(".isLogin").hide(),loginAbout.login.init({ele:$(".al-login"),before:function(){e&&e.failed&&e.failed()},success:function(){loginAbout.changeHead(),loginAbout.login.exit(),localStorage.setItem("userState","true"),e&&e.loginPass&&e.loginPass()}}),loginAbout.register.init({ele:$(".al-register"),before:function(){e&&e.failed&&e.failed()},success:function(){loginAbout.register.exit(),loginAbout.changeHead(),localStorage.setItem("userState","true"),e&&e.registerPass&&e.registerPass()}}))},complete:function(){},error:function(){}})},loginAbout.changeHead=function(){$.ajax({url:"//www.yi-ding.net.cn/call/yiding/web/user/getMapById/",dataType:"json",async:!1,data:{paramJson:$.toJSON({customerId:localStorage.getItem("userId"),visitSiteId:13})},type:"POST",beforeSend:function(){comm.loading.show()},success:function(e){if(e.responseObject.responseStatus&&e.responseObject.responseData&&(comm.loading.hide(),e.responseObject.responseData.data_list)){var a=e.responseObject.responseData.data_list[0];a.customerLogoUrl.length>0&&$(".user-header").find("img").attr("src",a.customerLogoUrl),a.customerName.length>0&&$(".user-name").find("a").html(a.customerName),$(".notLogin").hide(),$(".isLogin").css({display:"inline-block",cursor:"pointer"}),$(".user-header").on("click",function(){window.location.href="//www.yi-ding.net.cn/pages/personal/personal_index.html"})}}})},loginAbout.register={init:function(e){var a=this;e.ele.on("click",function(){commLog.creatEvent({id:148,url:window.location.href,keyword:"头部点击的注册按钮",browseType:"",browseTypeSourceUrl:window.location.href}),e.before&&e.before(),a.show(e)})},show:function(e){commLog.createBrowse(9,"登录注册-注册页"),$("body").addClass("yd_overflow"),comm.maskBackground.show("rgba(0,0,0,.6)");var a='<section class="loginMain">    <section class="loginCont">        <section class="authorityCommon">        <!--关闭-->        <section class="experiencePo reg-experiencePo"><img src="/image/authority/login/login_close.png"> </section>        <!--错误提示-->        <section class="errorTip"><i></i> <span>密码错误</span></section>        <!--注册-->        <section class="loginWidth ev-register"><section class="loginFixed">                    <div class="authorityTitle">创建唯医通行证</div>                    <section class="titleInput clear marginTop">                        <div class="titleText">手机号</div>                        <input class="titleType ev-regNum" placeholder="请输入手机号"/>                    </section>                    <section class="titleInput clear marginTop">                        <div class="titleText">密码</div>                        <input class="titleType ev-regPas" type="password"  placeholder="请输入6位以上密码"/>                    </section>                    <section class="titleInput clear marginTop">                        <div class="titleText">验证码</div>                        <input class="titleType ev-regCode" placeholder="请输入验证码"/>                        <div class="validate ev-regvalidate"><!--获取验证码--><!--60s后重新获取-->获取验证码</div>                    </section>                    <section class="service"><i class="active"></i>同意<a href="/pages/help/service.html" target="_blank">医鼎服务条款</a>                    </section>                    <div class="loginBtn ev-regSave">立即创建</div>                    <div class="returnText" style="cursor: pointer;color: #546690">去登录</div>                </section>       <i class="authorityBg"></i>        <!--注册 END-->    </section>        </section></section>';console.log($(".yd-maskBackground")),$(".yd-maskBackground").html(a),$(".returnText").unbind("click").bind("click",function(){commLog.creatEvent({id:162,url:"",keyword:"PC注册去登录",browseType:"9",browseTypeSourceUrl:window.location.href}),loginAbout.register.exit(),loginAbout.login.show(e)}),$(".reg-experiencePo").unbind("click").bind("click",function(){commLog.creatEvent({id:14,url:"",keyword:"注册关闭",browseType:"",browseTypeSourceUrl:window.location.href}),comm.confirmBox({title:"确定放弃注册吗?",content:"放弃注册,将无法拥有以下权限:浏览完整系列课程,参与课程问答,",cancel:"放弃",ensure:"继续注册",ensureCallback:function(){},cancelCallback:function(){loginAbout.login.exit()}})}),console.log(a),registerFn.init(e)},exit:function(e){$("body").removeClass("yd_overflow"),loginAbout.login.status().state||($(".notLogin").css("display","inline-block"),$(".isLogin").css("display","none")),$(".yd-maskBackground").remove(),e&&e()}},loginAbout.login={init:function(e){var a=this;e.ele.on("click",function(){commLog.creatEvent({id:1,url:"",keyword:"医鼎登录",browseType:"",browseTypeSourceUrl:window.location.href}),e.before&&e.before(),a.show(e)})},show:function(e){var a=window.location.href.substring(window.location.href.indexOf("/"),window.location.href.length),i="//www.yi-ding.net.cn/pages/authority/weixinBindLogin.html",t="//www.yi-ding.net.cn/pages/authority/allinAuthority.html",o="//www.yi-ding.net.cn/pages/authority/changePhone.html";a!=i&&a!=t&&a!=o&&commLog.createBrowse(4,"登录注册-登录页"),$("body").addClass("yd_overflow"),comm.maskBackground.show("rgba(0,0,0,.6)");var n='<section class="loginMain">    <section class="loginCont">        <section class="authorityCommon">            <!--关闭-->            <section class="experiencePo log-experiencePo"><img src="/image/authority/login/login_close.png"> </section>            <!--错误提示-->            <section class="errorTip"><i></i> <span>密码错误</span></section>        <!--登录状态--><section class="loginWidth ev-login"><div class="yd_logo"><img src="/image/authority/login/yiding_logo.png"></div><aside class="loginUsername marginTop"><input type="text" class="ev-phoneNum" placeholder="请输入唯医通行证"><div class="phone"><i class="close"></i></div><div class="allinPass ev-permit"><i></i><a href="/pages/help/allin_pass.html" target="_blank"><span>什么是唯医通行证？</span></a></div></aside><ul class="history"></ul><aside class="loginUsername clear"><input type="password" class="ev-passWord" placeholder="请输入6位以上密码"><div class="password"><i class="close"></i> <i class="eyeClose"></i> <i class="eyeOpen"></i></div></aside><div class="phoneFind clear"><div class="phoneLogin isJump">手机快捷登录<div class="prompt">点击这里使用手机快捷登录</div></div><div class="findPassword isJump">找回密码</div></div><div class="loginBtn ev-loginBtn">登录</div><div class="goOnregister">创建唯医通行证</div><div class="wechatLogin weixin"><i></i>微信登录</div></section>\n        <!--登录状态 END-->        <!--找回密码-->        <section class="loginWidth ev-findPassword" style="display: none;">            <section class="loginFixed">                <div class="authorityTitle">找回密码</div>                <section class="titleInput clear marginTop">                    <div class="titleText">账号</div>                    <input class="titleType ev-findNum" placeholder="请输入手机号">                    <div class="phone"> \t            \t\t<i class="close"></i>\t            \t</div>                </section>                <section class="titleInput clear">                    <div class="titleText">验证码</div>                    <input class="titleType ev-fidCode" placeholder="请输入验证码">                    <div class="validate ev-finValidate">获取验证码<!--60s后重新获取--><!--重新获取--></div>                </section>                <div class="loginBtn ev-fidNext">下一步</div>                <a class="returnText ev-findReturn isJump" href="javaScript:;">返回上一步</a>            </section>        </section>        <!--找回密码 END-->        <!--验证手机号-->        <section class="loginWidth" style="display: none; ">            <section class="loginFixed">                <div class="authorityTitle">验证手机号</div>                <section class="titleInput clear marginTop">                    <div class="titleText">账号</div>                    <input class="titleType" placeholder="请输入手机号">                </section>                <section class="titleInput clear">                    <div class="titleText">验证码</div>                    <input class="titleType ev-phoneNum" placeholder="请输入验证码">                    <div class="validate"><!--获取验证码--><!--60s后重新获取-->重新获取</div>                </section>                <div class="loginBtn">下一步</div>                <a class="returnText isJump" href="javaScript:;">返回上一步</a>            </section>        </section>        <!--验证手机号 END-->        <!--设置新密码-->        <section class="loginWidth ev-newPass" style="display: none;">            <section class="loginFixed">                <div class="authorityTitle">设置新密码</div>                <section class="titleInput clear marginTop">                    <div class="titleText">新密码</div>                    <input class="titleType ev-newPas" type="password" oncopy="log(\'复制被阻止!\'); return false;" placeholder="请输入6位以上密码">                    <div class="phone"> \t            \t\t<i class="close"></i>\t            \t</div>                </section>                <section class="titleInput clear">                    <div class="titleText">确认密码</div>                    <input class="titleType ev-conPas" type="password" oncopy="log(\'复制被阻止!\'); return false;" placeholder="请再次输入新密码">                    <div class="password"> \t            \t\t<i class="close"></i>\t            \t</div>                </section>                <div class="loginBtn ev-passSave">保存</div>                <a class="returnText ev-newReturn isJump" href="javaScript:;">返回上一步</a>            </section>            <section class="reset">已重置</section>        </section>        <!--设置新密码 END-->        <!--验证手机号-->        <section class="loginWidth ev-testNum" style="display:none; ">            <section class="loginFixed">                <section class="return"></section>                <div class="authorityTitle">验证手机号</div>                <section class="yanzheng">验证码已发送至：<span>15022322566</span></section>                <section class="proving"><input type="text" class="error"></section>                <section class="send"><span>9</span>秒后重新发送</section>                <section class="surplus">今天剩余<span>2</span>次</section>            </section>        </section>        <!--验证手机号 END-->        <!--手机快捷登录-->        <section class="loginWidth ev-quickLogin" style="display:none; ">            <section class="loginFixed">                <div class="authorityTitle">手机快捷登陆</div>                <section class="titleInput clear marginTop">                    <div class="titleText">账号</div>                    <input class="titleType ev-quiNum" placeholder="请输入手机号">                    <div class="phone"> \t            \t\t<i class="close"></i>\t            \t</div><div class="allinPass registerAllinmd none"><i></i><span>创建唯医通行证！!</span></div>                </section>                <section class="titleInput clear login-qui-disabled">                    <div class="titleText">验证码</div>                    <input class="titleType ev-quiCode" placeholder="请输入验证码"  disabled="disabled" >                    <div class="validate ev-quickCode"><!--获取验证码--><!--60s后重新获取-->获取验证码</div>                </section>                <div class="loginBtn ev-quiLoginBtn ">登录</div>                <a class="returnText ev-quickReturn isJump" href="javaScript:;">返回上一步</a>            </section>        </section>        <!--验证手机号 END-->        <!--绑定手机号创建账号-->        <section class="loginWidth ev-createBind" style="display: none;">            <div class="yd_logo"><img src="/image/authority/login/yiding_logo.png"></div>            <div class="createAccount">使用13033333333创建医鼎账号</div>            <div class="shortcut">之后您将可以使用手机号快捷登录医鼎</div>            <div class="loginBtn ev-createAccount activation">创建账号</div>            <div class="changeSigns ev-changeSigns">更换其他手机号</div>            <a class="returnText ev-createReturn isJump" href="javaScript:;">返回上一步</a>        </section>        <!--绑定手机号创建账号 END-->        <!--唯医绑定医鼎账号-->        <section class="loginWidth ev-bindAllin" style="display: none">            <section class="loginFixed">                <section class="return"></section>                <div class="authorityTitle">绑定医鼎账号</div>                <section class="binding">绑定医鼎账号，可用唯医登录</section>                <section class="titleInput clear marginTop">                    <div class="titleText">账号</div>                    <input class="titleType ev-bindNum" placeholder="请输入手机号">                    <div class="phone"> \t            \t\t<i class="close"></i>\t            \t</div>                </section>                <section class="titleInput clear">                    <div class="titleText">验证码</div>                    <input class="titleType ev-bindCode" placeholder="请输入验证码">                    <div class="validate ev-bindValidate"><!--获取验证码--><!--60s后重新获取-->获取验证码</div>                </section>                <div class="loginBtn ev-bindLogin">登录</div>                <a class="returnText ev-bindReturn isJump" href="javaScript:;">返回上一步</a>            </section>        </section>        <!--绑定医鼎账号 END-->        <!--微信绑定医鼎账号-->        <section class="loginWidth ev-bindWeixin" style="display: none">            <section class="loginFixed">                <section class="return"></section>                <div class="authorityTitle">绑定医鼎账号</div>                <section class="binding">绑定医鼎账号,可用微信快速登录</section>                <section class="titleInput clear marginTop">                    <div class="titleText">账号</div>                    <input class="titleType ev-bindWeixinNum" placeholder="请输入手机号">                    <div class="phone"> \t            \t\t<i class="close"></i>\t            \t</div>                </section>                <section class="titleInput clear">                    <div class="titleText">验证码</div>                    <input class="titleType ev-bindWeixinCode" placeholder="请输入验证码">                    <div class="validate ev-bindWeixinValidate"><!--获取验证码--><!--60s后重新获取-->获取验证码</div>                </section>                <div class="loginBtn ev-bindWeixinLogin">登录</div>                <a class="returnText ev-bindWeixinReturn isJump" href="javaScript:;">返回上一步</a>            </section>        </section>        <!--绑定医鼎账号 END-->       <i class="authorityBg"></i>    </section></section>    </section>';$(".yd-maskBackground").html(n),$(".log-experiencePo").unbind("click").bind("click",function(){commLog.creatEvent({id:10,url:"",keyword:"关闭登录",browseType:""}),loginAbout.login.exit()}),$(".goOnregister").unbind("click").bind("click",function(){commLog.creatEvent({id:7,url:"",keyword:"立即注册",browseType:"09"}),setTimeout(function(){$(".errorTip").css("display","none")},300),setTimeout(function(){$(".errorTip").css("display","none")},500),loginAbout.login.exit(),loginAbout.register.show(e)}),loginFn.init(e)},status:function(){var e={},a=!1,i={};if(localStorage.getItem("userState")&&(a=!0,e.userId=localStorage.getItem("userId"),localStorage.getItem("userInfo"))){i=JSON.parse(localStorage.getItem("userInfo"));var t=i.customerName,o=i.customerLogoUrl;e.userName=t,e.userLogUrl=o,e.userInfo=i}return e.state=a,e},exit:function(e,a){$("body").removeClass("yd_overflow"),e&&(localStorage.clear("userId"),localStorage.clear("userInfo"),$(".notLogin").css("display","inline-block"),$(".isLogin").css("display","none")),$(".yd-maskBackground").remove(),a&&a()}};var DONT_ENUM="propertyIsEnumerable,isPrototypeOf,hasOwnProperty,toLocaleString,toString,valueOf,constructor".split(","),hasOwn={}.hasOwnProperty;for(var i in{toString:1})DONT_ENUM=!1;Object.keys=Object.keys||function(e){var a=[];for(var i in e)hasOwn.call(e,i)&&a.push(i);if(DONT_ENUM&&e)for(var t=0;i=DONT_ENUM[t++];)hasOwn.call(e,i)&&a.push(i);return a},comm.jump=function(e,a,i){"undefined"!=typeof g_sps?g_sps.jump(e,a,i):i?window.open(a):window.location.href=a};
function popup(t){0==$(".ev-commTips").length?($("body").append('<section class="al-middleTipsBox"><section class="al-middleTipsModal ev-commTips"><figure class="al-middleTipsModalText">'+(t.hasImg?'<img src="/image/personal/loading_finish.png" alt="">':"")+'<p class="tipText">'+t.text+"</p> </figure></section></section>"),setTimeout(function(){$(".ev-commTips").addClass("show")},100)):($(".ev-commTips").addClass("show"),$(".tipText").text(t.text),t.hasImg?$(".al-middleTipsModalText img").show():$(".al-middleTipsModalText img").hide()),setTimeout(function(){$(".ev-commTips").removeClass("show")},3e3)}function sendError(t){var t=t||"当前网络环境不佳，请重新发送";0===$(".EV-sendErrorTips").length?($(".al-indexHeader").append('<section class="al-sendFailTips EV-sendErrorTips"><p>'+t+"</p></section>"),setTimeout(function(){$(".EV-sendErrorTips").addClass("show")},100)):($(".EV-sendErrorTips").addClass("show"),$(".EV-sendErrorTips").text(t)),setTimeout(function(){$(".EV-sendErrorTips").removeClass("show")},3e3)}function popupAutoDisappear(t,e){0==$("#popupBasic2").length&&$("body").append('<div data-role="popup" id="popupBasic2" data-dismissible="false">                    <p></p>            </div>').enhanceWithin(),$("#popupBasic2 p").text(t),$("#popupBasic2").popup("open",{overlayTheme:"b"}),setTimeout(function(){$("#popupBasic2").popup("close")},e)}function changeSize(t,e,i){var r=fgetRealWH(e,i,t.width,t.height);$(t).animate({width:r.width,height:r.height})}function fgetRealWH(t,e,i,r){if(!i||!r)return{width:t,height:e};var n,o,s=t/i,a=e/r;return s=s<a?s:a,n=Math.ceil(i*s),o=Math.ceil(r*s),{width:n,height:o}}function getpara(t){var e,i,r=document.URL,n={};if(r.lastIndexOf(t?t:"?")>0){e=r.substring(r.lastIndexOf(t?t:"?")+1,r.length);for(var o=e.split("&"),s=0;s<o.length;s++)i=o[s].split("="),n[i[0]]=decodeURI(i[1])}return n}function popupClose(){$("#popupBasic2").popup("close")}function checkAccountType(t){var e="";return/^(13[0-9]|14[0-9]|15[0-9]|18[0-9]|17[0-9])\d{8}$/.test(t)&&(e="mobile"),/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(t)&&(e="email"),e}function twoStar(t){var e="",i=t.split("@");return e=i[0].substr(0,1)+"**"+i[0].substr(i[0].length-1,1)+"@"+i[1]}function DrawImage(t,e,i){var r=new Image;r.src=t.src,r.width>0&&r.height>0&&(r.width/r.height>=e/i?r.width>e?(t.width=e,t.height=r.height*e/r.width):(t.width=r.width,t.height=r.height):r.height>i?(t.height=i,t.width=r.width*i/r.height):(t.width=r.width,t.height=r.height))}function DrawImageLarge(t,e,i){var r=new Image;r.src=t.src,r.width>0&&r.height>0&&(r.width/r.height>=e/i?(t.width=e,t.height=r.height*e/r.width):(t.height=i,t.width=r.width*i/r.height))}function reDrawImg(t,e){var i=new Image;i.src=t.src,i.width>0&&i.height>0&&(i.width/i.height>=iwidth/iheight?i.width>iwidth?(t.width=iwidth,t.height=i.height*iwidth/i.width):(t.width=i.width,t.height=i.height):i.height>iheight?(t.height=iheight,t.width=i.width*iheight/i.height):(t.width=i.width,t.height=i.height))}function toggleToPC(){var t=comm.equipment.IsPC();if(t){var e=location.href;e.indexOf("m.allinmd.cn")>-1&&(location.href=e.replace("m.allinmd.cn","www.allinmd.cn").replace("/m/","/"))}}function initTuiJian(t){var e="";$.each(tuijianList,function(t,i){e+='<div class="ui-block-'+(t%2==0?"a":"b")+' item" videoKey="'+i.key+'"><div><img src="'+i.pic+'"  /><span class="type">'+i.type+'</span><a  class="title">'+i.title+'</a><span class="author"><span class="user"></span>'+i.author+"</span></div></div>"}),$(t).html(e),$(t).find(".item").on("vclick",function(t){TempCache.setItem("videoKey",$(this).attr("videoKey")),$.mobile.changePage("video.html",{transition:"slideleft"})})}function runvote(t,e){var i={useful_type:1,up_down_type:1,ref_id:t};$.ajax({type:"POST",url:"/mcall/customer/prefer/createPrefer/",data:{paramJson:$.toJSON(i)},dataType:"json",timeout:1e4,success:function(t){null!=t&&(t.responseObject.responseStatus?alert("投票成功"):"9X0001"==t.responseObject.responseCode&&alert("您已经投过票了"),e!=window.location.href?window.location.href=e:setVideoInfo())},error:function(){alert("数据错误")}})}function getXueZuListData(){var t=[];return $.ajax({type:"POST",url:"/mcall/comm/data/tag/json_list/",data:{treeLevel:"2",pageIndex:1,pageSize:100},dataType:"json",timeout:2e4,async:!1,success:function(e){e&&e.responseObject&&(t=e.responseObject.responseMessage)},error:function(){}}),t}function initXueZu(t){var e=getXueZuListData(),i=$.map(e,function(t,e){return"<div class='tab_a'><div class='tab_b'>"+t+"</div></div>"}).join("");$("#"+t).html(i),$("#xuezu_list >div ").on("vclick",function(){window.location.href="/html/pages/video_list.html?type="+$(this).text()})}function shareFriend(){var t=location.href,e="undefined"==typeof weiXinDesc||""==weiXinDesc?t:weiXinDesc,i="undefined"==typeof weiXinTitle||""==weiXinTitle?$("title").text():weiXinTitle,r="undefined"==typeof weiXinLogo||""==weiXinLogo?"":weiXinLogo;t.indexOf("?")>0&&(t=t+"&_="+Math.random()),WeixinJSBridge.invoke("sendAppMessage",{img_url:r||"//m.allinmd.cn/images/img50weixin_video_logo.jpg",img_width:"640",img_height:"640",link:t,desc:e||"",title:i||$("title").text()},function(t){})}function shareTimeline(){var t=location.href,e="undefined"==typeof weiXinDesc||""==weiXinDesc?t:weiXinDesc,i="undefined"==typeof weiXinTitle||""==weiXinTitle?$("title").text():weiXinTitle,r="undefined"==typeof weiXinLogo||""==weiXinLogo?"":weiXinLogo;t.indexOf("?")>0&&(t=t+"&_="+Math.random()),WeixinJSBridge.invoke("shareTimeline",{img_url:r||"//m.allinmd.cn/images/img50weixin_video_logo.jpg",img_width:"640",img_height:"640",link:t,desc:e,title:i||$("title").text()},function(t){})}function shareWeibo(){WeixinJSBridge.invoke("shareWeibo",{content:descContent,url:lineLink},function(t){_report("weibo",t.err_msg)})}function goBack(t,e){window.location.href=t}function rem(t){var e=parseInt(t);return e/75+"rem"}function htmlToString(t){return t.replace(/[<>&]/g,function(t){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[t]})}function escapeReplace(t){return t.replace(/[+\/?#&=!%]/g,function(t){return{"+":"%2B","/":"%2F","?":"%3F","#":"%23","&":"%26","=":"%3D","!":"%21","%":"%25"}[t]})}String.prototype.toWK=function(){return isNaN(parseInt(this))?0:parseInt(this)<1e4&&parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"千+":parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"万+":this},Number.prototype.toWK=function(){return isNaN(parseInt(this))?0:parseInt(this)<1e4&&parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},String.prototype.toInt=function(){return parseInt(this)},String.prototype.toK=function(){return parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":this},Number.prototype.toK=function(){return parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":this},String.prototype.toW=function(){return parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},Number.prototype.toW=function(){return parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},jQuery.cookie=function(t,e,i){if(arguments.length>1&&(null===e||"object"!=typeof e)){if(i=jQuery.extend({},i),null===e&&(i.expires=-1),"number"==typeof i.expires){var r=i.expires,n=i.expires=new Date;n.setDate(n.getDate()+r)}return document.cookie=[encodeURIComponent(t),"=",i.raw?String(e):encodeURIComponent(String(e)),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}i=e||{};var o,s=i.raw?function(t){return t}:decodeURIComponent;return(o=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?s(o[1]):null},$.fn.extend({textareaAutoHeight:function(t){this._options={minHeight:0,maxHeight:1e3},this.init=function(){for(var e in t)this._options[e]=t[e];0==this._options.minHeight&&(this._options.minHeight=parseFloat($(this).height()));for(var e in this._options)null==$(this).attr(e)&&$(this).attr(e,this._options[e]);$(this).keydown(this.resetHeight).keyup(this.resetHeight).change(this.resetHeight).focus(this.resetHeight),$(this)[0].onpaste=this.resetHeight},this.resetHeight=function(){var t=parseFloat($(this).attr("minHeight")),e=parseFloat($(this).attr("maxHeight"));$.browser.msie||$(this).height(0);var i=parseFloat(this.scrollHeight);i=i<t?t:i>e?e:i,$(this).height(i).scrollTop(i),i>=e?$(this).css("overflow-y","scroll"):$(this).css("overflow-y","hidden"),$(this).parents(".case_title").css("height",$(this).parent().next().outerHeight(!0)+$(this).height()+12),$(this).parents(".case_title_more_p").css("height",$(this).parent().next().outerHeight(!0)+$(this).height()+12)},this.init()}}),String.prototype.cutString=function(t){if(2*this.length<=t)return this;for(var e=0,i="",r=0;r<this.length;r++)if(i+=this.charAt(r),this.charCodeAt(r)>128){if(e+=2,e>=t)return i.substring(0,i.length-1)+"..."}else if(e+=1,e>=t)return i.substring(0,i.length-2)+"...";return i};var TempCache={cache:function(t){localStorage.setItem("EasyWayTempCache",t)},getCache:function(){return localStorage.getItem("EasyWayTempCache")},setItem:function(t,e){localStorage.setItem(t,e)},getItem:function(t){var e=localStorage.getItem(t);return t&&"fromPage"==t&&localStorage.removeItem(t),e},removeItem:function(t){return localStorage.removeItem(t)},clear:function(){var t=localStorage.getItem("wxBrowseAccessLockOn");localStorage.clear(),localStorage.setItem("wxBrowseAccessLockOn",t)}};Array.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if($.trim(this[e])==$.trim(t))return e;return-1}),Array.remove||(Array.prototype.remove=function(t,e){var i=this.slice((e||t)+1||this.length);return this.length=t<0?this.length+t:t,this.push.apply(this,i)});var isIE=!!window.ActiveXObject,isIE6=isIE&&!window.XMLHttpRequest,isIE8=isIE&&!!document.documentMode,isIE7=isIE&&!isIE6&&!isIE8;isIE8||isIE7?document.attachEvent("WeixinJSBridgeReady",function(){location.pathname.indexOf("login")<0&&location.pathname.indexOf("regist")<0&&(WeixinJSBridge.on("menu:share:appmessage",function(t){shareFriend()}),WeixinJSBridge.on("menu:share:timeline",function(t){shareTimeline()}))},!1):document.addEventListener("WeixinJSBridgeReady",function(){location.pathname.indexOf("login")<0&&location.pathname.indexOf("regist")<0&&(WeixinJSBridge.on("menu:share:appmessage",function(t){shareFriend()}),WeixinJSBridge.on("menu:share:timeline",function(t){shareTimeline()}))},!1),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){if(t!==Object(t))throw TypeError("Object.getPrototypeOf called on non-object");return t.__proto__||t.constructor.prototype||Object.prototype}),"function"!=typeof Object.getOwnPropertyNames&&(Object.getOwnPropertyNames=function(t){if(t!==Object(t))throw TypeError("Object.getOwnPropertyNames called on non-object");var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i}),"function"!=typeof Object.create&&(Object.create=function(t,e){function i(){}if("object"!=typeof t)throw TypeError();i.prototype=t;var r=new i;if(t&&(r.constructor=i),void 0!==e){if(e!==Object(e))throw TypeError();Object.defineProperties(r,e)}return r}),function(){if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()){var t=Object.defineProperty;Object.defineProperty=function(e,i,r){if(t)try{return t(e,i,r)}catch(t){}if(e!==Object(e))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in r&&Object.prototype.__defineGetter__.call(e,i,r.get),Object.prototype.__defineSetter__&&"set"in r&&Object.prototype.__defineSetter__.call(e,i,r.set),"value"in r&&(e[i]=r.value),e}}}(),"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(t,e){if(t!==Object(t))throw TypeError("Object.defineProperties called on non-object");var i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&Object.defineProperty(t,i,e[i]);return t}),Object.keys||(Object.keys=function(t){if(t!==Object(t))throw TypeError("Object.keys called on non-object");var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw TypeError("Bind must be called on a function");var e=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(r.prototype=this.prototype),n.prototype=new r,n}),Array.isArray=Array.isArray||function(t){return Boolean(t&&"[object Array]"===Object.prototype.toString.call(Object(t)))},Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if(0===i)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),isNaN(r)?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=i)return-1;for(var n=r>=0?r:Math.max(i-Math.abs(r),0);n<i;n++)if(n in e&&e[n]===t)return n;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if(0===i)return-1;var r=i;arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));for(var n=r>=0?Math.min(r,i-1):i-Math.abs(r);n>=0;n--)if(n in e&&e[n]===t)return n;return-1}),Array.prototype.every||(Array.prototype.every=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError();var r,n=arguments[1];for(r=0;r<i;r++)if(r in e&&!t.call(n,e[r],r,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError();var r,n=arguments[1];for(r=0;r<i;r++)if(r in e&&t.call(n,e[r],r,e))return!0;return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError();var r,n=arguments[1];for(r=0;r<i;r++)r in e&&t.call(n,e[r],r,e)}),Array.prototype.map||(Array.prototype.map=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError();var r=[];r.length=i;var n,o=arguments[1];for(n=0;n<i;n++)n in e&&(r[n]=t.call(o,e[n],n,e));return r}),Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError();var r,n=[],o=arguments[1];for(r=0;r<i;r++)if(r in e){var s=e[r];t.call(o,s,r,e)&&n.push(s)}return n}),Array.prototype.reduce||(Array.prototype.reduce=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError();if(0===i&&1===arguments.length)throw TypeError();var r,n=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(n in e){r=e[n++];break}if(++n>=i)throw TypeError()}for(;n<i;)n in e&&(r=t.call(void 0,r,e[n],n,e)),n++;return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError();if(0===i&&1===arguments.length)throw TypeError();var r,n=i-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(n in this){r=this[n--];break}if(--n<0)throw TypeError()}for(;n>=0;)n in e&&(r=t.call(void 0,r,e[n],n,e)),n--;return r}),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s+/,"").replace(/\s+$/,"")}),Date.now||(Date.now=function(){return Number(new Date)}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){function t(t){return("00"+t).slice(-2)}function e(t){return("000"+t).slice(-3)}return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+e(this.getUTCMilliseconds())+"Z"}),"function"!=typeof window.getComputedStyle&&(window.getComputedStyle=function(t,e){var i={},r=t.currentStyle||{};for(var n in r)i[n]=r[n];return i.styleFloat=i.cssFloat,i.getPropertyValue=function(e){var i=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),i.test(e)&&(e=e.replace(i,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},i}),"function"!=typeof Array.prototype.map&&(Array.prototype.map=function(t,e){var i=[];if("function"==typeof t)for(var r=0,n=this.length;r<n;r++)i.push(t.call(e,this[r],r,this));return i});
var customer={urlList:{getBaseinfoList:{url:"/mcall/customer/baseinfo/getList/",desc:"获取会员基本信息列表 参数 ：{pageIndex:1,pageSize:5,[refIdList:'139758114,13975865']......}"},getBaseInfo:{url:"/mcall/customer/baseinfo/getBaseInfo/",desc:"获取会员基本信息"},updateCustomerBaseinfo:{url:"/mcall/customer/baseinfo/updateCustomerBaseinfo/",desc:"更新会员基本信息 参数 ：{......}"},baseinfoUploadImg:{url:"/mcall/customer/baseinfo/uploadImg/",desc:"上传头像 参数 ：{file......}"},getCustomerUniteList:{url:"/mcall/customer/unite/getList/",desc:"获取会员列表 参数 ：{pageIndex:1,pageSize:5......}"},uniteJsonList:{url:"/mcall/customer/unite/json_list/",desc:"用户列表 参数 ：{pageIndex:1,pageSize:10, searchParam:,tagId:,sortType:,,}"},getUniteCount:{url:"/mcall/customer/unite/getCount/",desc:"用户统计数 参数 ：{pageIndex:1,pageSize:10, searchParam:,tagId:,sortType:,,}"},getCustomerUnite:{url:"/mcall/customer/unite/getCustomerUnite/",desc:"获取会员信息 参数 ［email、mobile］"},updateCustomerUnite:{url:"/mcall/customer/unite/updateCustomerUnite/",desc:"更新会员基本信息 参数 ：{......}"},updateMobile:{url:"/mcall/customer/unite/updateMobile/",desc:"更新会员基本信息 参数 ：{mobile:,siteId:,validCode:}"},createUserCaosBind:{url:"/mcall/customer/unite/createUserCaosBind/",desc:"唯医与caos用户绑定 参数 ：{caosCustoemrId:}"},validPasspord:{url:"/mcall/customer/unite/validPasspord/",desc:"验证用户密码 参数 ：{password:}"},updatePasspord:{url:"/mcall/customer/unite/updatePasspord/",desc:"修改用户密码 参数 ：{password:,passwd:}"},validateAccount:{url:"/mcall/customer/unite/validateAccount/",desc:"验证账号是否存在 参数 ：{account: type:'email/mobile'}"},validateCustomerAccount:{url:"/mcall/customer/unite/validateCustomerAccount/",desc:"判断除登录人之外是否存在该账号 参数 ：{account: type:'email/mobile'}"},getCustomerAuth:{url:"/mcall/customer/auth/getCustomerAuth/",desc:"查询用户认证信息，如果为空，表示未认证过"},getAuthAttachments:{url:"/mcall/customer/auth/getAuthAttachments/",desc:"GET 获取认证信息附件 参数：{dataFlag:2}"},createAuth:{url:"/mcall/customer/auth/createAuth/",desc:"创建认证 参数 ：{firstame:''，lastName:''，attType:''，attCode:'',attPath:''......}"},getCollectionList:{url:"/mcall/customer/collection/getCollectionList/",desc:"获取本人收藏列表  参数 ：{pageIndex:1,pageSize:5,collectionType:''}"},getCollection:{url:"/mcall/customer/collection/getCollection/",desc:"获取一条收藏信息 参数 ：{collectionType:'',refId:''}"},isAlsoCollection:{url:"/mcall/customer/collection/isAlsoCollection/",desc:"是否已经收藏 参数 ：{collectionType:'',refId:''}"},createCollection:{url:"/mcall/customer/collection/createCollection/",desc:"会员添加收藏 参数 ：{collectionType:'',refId:''} 表：customer_collection (*collection_type,*ref_id,+ref_customer_id,+ref_name,*ref_url)"},cancelCollection:{url:"/mcall/customer/collection/cancelCollection/",desc:"会员取消收藏 参数 ：{collectionType:'',refId:''}"},getReviewList:{url:"/mcall/customer/review/getList/",desc:"获取评论列表 参数 ：{pageIndex:1,pageSize:5,reviewType:'',refId:'',+sortType:'(0/1)'}"},createReview:{url:"/mcall/customer/review/createReview/",desc:"添加评论 参数 ：{reviewType:'',refId:''......}  表：customer_review (*review_type,*review_status,*ref_id,*ref_url,+ref_customer_id,*review_content,*if_anonymous)"},createReviewAttachment:{url:"/mcall/customer/reviewattachment/createReviewAttachment/",desc:"添加评论 参数 ：{reviewId:'',reviewAttUrl:''......}  表：customer_review_attachment "},getPrefer:{url:"/mcall/customer/prefer/getPrefer/",desc:"获取一条关注信息 参数 ：{usefulType:'',upDownType:'',refId:''}"},createPrefer:{url:"/mcall/customer/prefer/createPrefer/",desc:"添加关注 参数 ：{usefulType:'',upDownType:'',refId:''}"},cancelPrefer:{url:"/mcall/customer/prefer/cancelPrefer/",desc:"取消关注 参数 ：{usefulType:'',upDownType:'',refId:''}"},validCaosUserLogin:{url:"/mcall/customer/infocaos/validCaosUserLogin/",desc:"验证caos用户登录 参数 ：{email:'',password:''}"},getCaosUserById:{url:"/mcall/customer/infocaos/getCaosUserById/",desc:"获取caos用户信息 参数 ：{customerId:''}"},getCustomerVerification:{url:"/mcall/customer/verification/getCustomerVerification/",desc:"获取发送信息 参数 ：{siteId:'',typeId:'',*customerId:''}"},sendSms:{url:"/mcall/customer/verification/sendSms/",desc:"短信发送 参数 ：{siteId:'',account:'',*customerId:''}"},validSms:{url:"/mcall/customer/verification/validSms/",desc:"验证短信 参数 ：{validCode:'',type:'customer_reset_password/customer_verification'}"},sendPasswordEmail:{url:"/mcall/customer/reset/password/sendPasswordEmail/",desc:"发送密码邮件 参数 ：{resetSite:'2',email:''}"},sendPasswordMobile:{url:"/mcall/customer/reset/password/sendPasswordMobile/",desc:"发送密码短信验证码 参数 ：{resetSite:'2',siteId:'',account:''}"},updatePassword:{url:"/mcall/customer/reset/password/updatePassword/",desc:"更改密码 参数 ：{resetSite:'',password:''}"},createFollowResource:{url:"/mcall/customer/follow/resource/create/",desc:"添加关注 参数 ：{refId:'1,2,3...',followType:'1-视频 2-文库 3-会议 4-话题 5-笔记 6-tag'......}"},cancelFollowResource:{url:"/mcall/customer/follow/resource/delete/",desc:"取消关注 参数 ：{id:'1,2,3...',......}"},followResourceJsonList:{url:"/mcall/customer/follow/resource/json_list/",desc:"关注列表 参数 ：{pageIndex:1,pageSize:10, }"},followResourceCount:{url:"/mcall/customer/follow/resource/getCount/",desc:"关注数 参数 ：{pageIndex:1,pageSize:10, }"},customerMessageJsonList:{url:"/mcall/customer/message/json_list/",desc:"消息列表 参数 ：{pageIndex:1,pageSize:10, messageType:}"},createWeixinUniteBind:{url:"/mcall/wx/customer/createWeixinUniteBind/",desc:"绑定微信账号 参数 ：{signature:'',uniteNameWeixin:''......}"},checkWeixinUniteBind:{url:"/mcall/wx/customer/checkWeixinUniteBind/",desc:"校验是否绑定过微信账号,参数:{email:''}"},getEncUrl:{url:"/mcall/wx/customer/getEncUrl/",desc:"获取跳转链接 参数 ：{ref:'',}"},updateWeixinUniteBind:{url:"/mcall/wx/customer/updateWeixinUniteBind/",desc:"绑定微信账号（已登录） 参数 ：{}"},checkIfBind:{url:"/mcall/wx/customer/checkIfBind/",desc:"校验此账号是否绑定过了"},testOpenId:{url:"/mcall/wx/customer/testOpenId/",desc:""},getWebUser:{url:"/mcall/web/user/getWebUser/",desc:"获取登录用户登录信息"},getWebCustomer:{url:"/mcall/web/user/getWebCustomer/",desc:"获取登录用户信息"},userValidAndBind:{url:"/mcall/web/user/userValidAndBind/",desc:"验证用户信息并绑定caos账号 参数 ：{email:'',passwd:'',caosCustomerId:''}"},checkSession:{url:"/mcall/web/user/checkSession/",desc:"判断用户是否在线"},userRegist:{url:"/mcall/web/user/userRegist/",desc:"用户注册 参数：{account:,type:'email/mobile',passwd:''}"},logout:{url:"/mcall/web/user/logout/",desc:"退出系统"},userLogin:{url:"/mcall/passport/securitycheck",desc:"用户登录"},uploadCase:{url:"/mcall/case/baseinfo/create/",desc:"发布病例"},updataCase:{url:"/mcall/case/baseinfo/update/",desc:"发布病例"},getImg:{url:"/mcall/case/attachment/info/",desc:"获取图片信息"},saveImgInfo:{url:"/mcall/case/attachment/update/",desc:"获取图片信息"},deleteImg:{url:"/mcall/case/attachment/delete/",desc:"删除图片"},updateBaseInfo:{url:"/mcall/customer/unite/update/",desc:"更新用户的基本信息"},occCreate:{url:"/mcall/customer/occupation/create/",desc:"工作经历添加信息服务"},occInfo:{url:"/mcall/customer/occupation/info/",desc:"工作经历查询信息服务"},occUpdate:{url:"/mcall/customer/occupation/update/",desc:"工作经历修改信息服务"},cEduCreate:{url:"/mcall/customer/continue/education/create/",desc:"继续教育添加信息服务"},cEduInfo:{url:"/mcall/customer/continue/education/info/",desc:"继续教育查询信息服务"},cEduUpdate:{url:"/mcall/customer/continue/education/update/",desc:"继续教育修改信息服务"},honorCreate:{url:"/mcall/customer/honor/create/",desc:"获得荣誉添加信息服务"},honorInfo:{url:"/mcall/customer/honor/info/",desc:"获得荣誉查询信息服务"},honorUpdate:{url:"/mcall/customer/honor/update/",desc:"获得荣誉修改信息服务"},eduCreate:{url:"/mcall/customer/education/create/",desc:"教育背景添加信息服务"},eduInfo:{url:"/mcall/customer/education/info/",desc:"教育背景查询信息服务"},eduUpdate:{url:"/mcall/customer/education/update/",desc:"教育背景修改信息服务"},fundCreate:{url:"/mcall/customer/fund/create/",desc:"科研基金添加信息服务"},fundInfo:{url:"/mcall/customer/fund/info/",desc:"科研基金查询信息服务"},fundUpdate:{url:"/mcall/customer/fund/update/",desc:"科研基金修改信息服务"},socCreate:{url:"/mcall/customer/social/create/",desc:"社会任职添加信息服务"},socInfo:{url:"/mcall/customer/social/info/",desc:"社会任职查询信息服务"},socUpdate:{url:"/mcall/customer/social/update/",desc:"学术专著修改信息服务"},opusCreate:{url:"/mcall/customer/opus/create/",desc:"学术专著添加信息服务"},opusInfo:{url:"/mcall/customer/opus/info/",desc:"学术专著查询信息服务"},opusUpdate:{url:"/mcall/customer/opus/update/",desc:"学术专著修改信息服务"},patCreate:{url:"/mcall/customer/patent/create/",desc:"发明专利添加信息服务"},patInfo:{url:"/mcall/customer/patent/info/",desc:"发明专利查询信息服务"},patUpdate:{url:"/mcall/customer/patent/update/",desc:"发明专利修改信息服务"}},getData:function(e,c){var t=this,s=t.urlList[e].url,l=null,r={};return c&&""!=c&&(r.paramJson=$.toJSON(c)),$.ajax({type:"POST",url:s,data:r,async:!1,dataType:"json",cache:!1,timeout:1e4,success:function(e){l=e.responseObject?e.responseObject.responseMessage:e},error:function(){}}),l},getResponseData:function(e,c){var t=this,s=t.urlList[e].url,l=null,r={};return c&&""!=c&&(r.paramJson=$.toJSON(c)),$.ajax({type:"POST",url:s,data:r,async:!1,dataType:"json",timeout:1e4,success:function(e){l=e.responseObject?e.responseObject.responseData:e},error:function(){}}),l},execute:function(e,c){var t=this,s=t.urlList[e].url,l=null,r={};return c&&""!=c&&(r.paramJson=$.toJSON(c)),$.ajax({type:"POST",url:s,data:r,async:!1,dataType:"json",timeout:1e4,success:function(e){l=e&&e.responseObject?e.responseObject:e},error:function(){}}),l},asyncExecute:function(e,c,t){var s=this,l=s.urlList[e].url,r={};c&&""!=c&&(r.paramJson=$.toJSON(c)),$.ajax({type:"POST",url:l,data:r,dataType:"json",timeout:1e4,success:function(e){e&&e.responseObject&&t&&t(e.responseObject)}})},cback:function(){}};
var commdata={urlList:{getDataTags:{url:"/mcall/comm/data/tag/getDataTags/",desc:"获取标签列表 参数 ：{treeLevel:'',tagName:'......}"},tagJsonList:{url:"/mcall/comm/data/tag/json_list/",desc:"获取标签列表 参数 ：{treeLevel:'',tagName:'......}  多级查询treeLevel:'2_3'"},getDataTagsText:{url:"/mcall/comm/data/tag/getDataTagsText/",desc:"获取标签列表（标签名称） 参数 ：{treeLevel:'',tagName:''......}"},getDataLogoUrl:{url:"/mcall/comm/data/logourl/getDataLogoUrl/",desc:"获取图片列表 参数 ：{refId:'1397586888114',logoSpec:'',logoType:''}"},getDataLogoUrlList:{url:"/mcall/comm/data/logourl/getDataLogoUrlList/",desc:"获取单张图片 参数 ：{refIdList:'1397586888114,1397586888435',logoSpec:'',logoType:''}"},getDataRoleConfigs:{url:"/mcall/comm/data/roleconfig/getDataRoleConfigs/",desc:"获取会员证件类型 参数 ：{siteId:'',roleId:'',typeId:''}"},uploadLogo:{url:"/mcall/comm/upload/uploadLogo/",desc:"上传图片 参数 ：{file:文件,imageType:'',preSign:''}  imageType（1:头像 2认证图片）"},sendMobileValidateCode:{url:"/mcall/comm/sms/sendMobileValidateCode/",desc:"发送短信验证码 参数 ：{mobile：''}"},getVideoByVideoId:{url:"/mcall/cms/video/info/",desc:"获取视频信息 参数 ：{videoId：''}"},getSearchVideo:{url:"/mcall/cms/video/getSearchVideo/",desc:"视频搜索列表 参数 ：{pageIndex:1,pageSize:5,keyword:'脊柱'}"},getVideoList:{url:"/mcall/cms/video/getVideoList/",desc:"视频搜索列表 参数 ：{pageIndex:1,pageSize:5,videoIds:'',videoName:''......}"},getlistVideoInTag:{url:"/mcall/cms/video/listInTag/",desc:"视频搜索列表 参数 ：{pageIndex:1,pageSize:5,refId:''}"},updateVideoNum:{url:"/mcall/cms/video/updateVideoNum/",desc:"更新视频统计数 参数 ：{propertyKey:'属性名',type:'(plus/minus)',videoId:'视频ID'}"},updateDocNum:{url:"/mcall/cms/doc/updateDocNum/",desc:"更新文库统计数 参数 ：{propertyKey:'属性名',type:'(plus/minus)',docId:'ID'}"},updateTopicNum:{url:"/mcall/cms/topic/base/updateTopicNum/",desc:"更新话题统计数 参数 ：{propertyKey:'属性名',type:'(plus/minus)',topicId:'ID'}"},updateCaseNum:{url:"/mcall/case/baseinfo/updateCaseNum/",desc:"更新病例统计数 参数 ：{propertyKey:'属性名',type:'(plus/minus)',caseId:'ID'}"},getVideoAttachment:{url:"/mcall/cms/video_/attachment/getVideoAttachment/",desc:"获取视频附件 参数 ：{videoId:1,videoAttType:5,videoAttFormat:'',videoAttSpec:'',videoAttHeight:'',videoAttWidth:''......}"},getConferenceList:{url:"/mcall/conference/index/getConferenceList/",desc:"年会列表 参数 ：{pageIndex:1,pageSize:5}"},getConferenceSubList:{url:"/mcall/conference/index/getConferenceSubList/",desc:"年会－分会列表 参数 ：{pageIndex:1,pageSize:5,conId:}"},getAgendaVideoList:{url:"/mcall/conference/index/getAgendaVideoList/",desc:"获取年会－日程、视频列表 参数 ：{pageIndex:1,pageSize:5,conSubId:,conId:}"},getRecommendVideoList:{url:"/mcall/recommend/resource/video/getRecommendVideoList/",desc:"获取推荐视频列表 参数 ：{pageIndex:1,pageSize:10,＊videoId:}"},caseJsonList:{url:"/mcall/case/baseinfo/json_list/",desc:"病例列表 参数 ：{pageIndex:1,pageSize:10, searchParam:,tagId:,sortType:,,}"},getCaseCount:{url:"/mcall/case/baseinfo/getCount/",desc:"病例记录数 参数 ：{pageIndex:1,pageSize:10, searchParam:,tagId:,,,}"},topicJsonList:{url:"/mcall/cms/topic/base/json_list/",desc:"话题列表 参数 ：{pageIndex:1,pageSize:10, searchParam:,tagId:,sortType:,,}"},getTopicCount:{url:"/mcall/cms/topic/base/getCount/",desc:"话题记录数 参数 ：{pageIndex:1,pageSize:10, searchParam:,tagId:,,,}"},videoJsonList:{url:"/mcall/cms/video/json_list/",desc:"视频列表 参数 ：{pageIndex:1,pageSize:10, searchParam:,tagId:,sortType:,,}"},getVideoCount:{url:"/mcall/cms/video/getCount/",desc:"视频记录数 参数 ：{pageIndex:1,pageSize:10, searchParam:,tagId:,,,}"},docJsonList:{url:"/mcall/cms/doc/json_list/",desc:"文档列表 参数 ：{pageIndex:1,pageSize:10, searchParam:,tagId:,sortType:,,}"},getDocCount:{url:"/mcall/cms/doc/getCount/",desc:"文库记录数 参数 ：{pageIndex:1,pageSize:10, searchParam:,tagId:,,,}"},logBrowseJsonList:{url:"/mcall/log/customer/browse/json_list/",desc:"浏览记录数 参数 ：{pageIndex:1,pageSize:10,dataFlag:, groupType:,,,}"},logCreateKeyword:{url:"/mcall/log/customer/keyword/createKeyword/",desc:"搜索记录数 参数 ：{keyword:,searchUrl:,,,}"},jaRequestSerial:{url:"/mcall/ja/statistics/jaRequestSerial/",desc:"百度统计 参数 ：{domain:}"},getWxAccessToken:{url:"/mcall/wx/api/getAccessToken/",desc:"微信授权 参数 ：{}"},getJSTicket:{url:"/mcall/wx/api/getJSTicket/",desc:"微信授权 参数 ：{}"},getJSConfig:{url:"/mcall/wx/api/getJSConfig/",desc:"微信授权 参数 ：{}"}},getData:function(e,a){var t=this,o=t.urlList[e].url,s=null,c={};return a&&""!=a&&(c.paramJson=$.toJSON(a)),$.ajax({type:"POST",url:o,data:c,async:!1,dataType:"json",timeout:1e4,success:function(e){s=e.responseObject?e.responseObject.responseMessage:e},error:function(){}}),s},getResponseData:function(e,a){var t=this,o=t.urlList[e].url,s=null,c={};return a&&""!=a&&(c.paramJson=$.toJSON(a)),$.ajax({type:"POST",url:o,data:c,async:!1,dataType:"json",timeout:1e4,success:function(e){s=e.responseObject?e.responseObject.responseData:e},error:function(){}}),s},execute:function(e,a){var t=this,o=t.urlList[e].url,s=null,c={};return a&&""!=a&&(c.paramJson=$.toJSON(a)),$.ajax({type:"POST",url:o,data:c,async:!1,dataType:"json",timeout:1e4,success:function(e){s=e&&e.responseObject?e.responseObject:e},error:function(){}}),s},asyncExecute:function(e,a,t){var o=this,s=o.urlList[e].url,c={};a&&""!=a&&(c.paramJson=$.toJSON(a)),$.ajax({type:"POST",url:s,data:c,dataType:"json",timeout:1e4,success:function(e){e&&e.responseObject&&t&&t(e.responseObject)}})},cback:function(){}};
comm.file={},comm.file.getFileSize=function(e){var i=/msie/i.test(navigator.userAgent)&&!window.opera,t=0;return e&&(i&&!e.files||(t=e.files[0].size)),t},comm.file.getName=function(e){var i=e,t=i.lastIndexOf("/"),n=i.lastIndexOf("\\"),s=Math.max(t,n),a=i.lastIndexOf("."),f=i.substring(s+1,a),l=i.substring(a+1,i.length);return{fileName:f,suffixName:l}};
var CommService={getResponseData:function(e,n){var s=null,t={};return n&&""!=n&&(t.paramJson=$.toJSON(n)),e&&$.ajax({type:"POST",url:e,data:t,async:!1,dataType:"json",timeout:1e4,success:function(e){s=e&&e.responseObject?e.responseObject.responseData:e},error:function(){}}),s},getResponseMessage:function(e,n){var s=null,t={};return n&&""!=n&&(t.paramJson=$.toJSON(n)),e&&$.ajax({type:"POST",url:e,data:t,async:!1,dataType:"json",timeout:1e4,success:function(e){s=e.responseObject?e.responseObject.responseMessage:e},error:function(){}}),s},execute:function(e,n){var s=null,t={};return n&&""!=n&&(t.paramJson=$.toJSON(n)),e&&$.ajax({type:"POST",url:e,data:t,async:!1,dataType:"json",timeout:1e4,success:function(e){s=e&&e.responseObject?e.responseObject:e},error:function(){}}),s},asyncExecute:function(e,n,s){var t={};n&&""!=n&&(t.paramJson=$.toJSON(n)),e&&$.ajax({type:"POST",url:e,data:t,dataType:"json",timeout:1e4,success:function(e){e&&e.responseObject&&s&&s(e.responseObject)}})}};
comm.cutLine=function(t,n,r){if(t){var i=t.split(","),e="";return $.each(i,function(t,i){i&&(e+=i.split(n)[1]?i.split(n)[1]+r:i+r)}),e.substring(0,e.length-1)}},comm.strHandle={cutDoctorTitle:function(t){var n="";if(t.length>0)for(var r=t.split(","),i=/(医师)/g,e=0;e<r.length;e++)if(i.test(r[e])){n=r[e];break}return n},cutNotDoctorTitle:function(t){var n="";if(t.length>0)for(var r=t.split(","),i=/(医师)/g,e=0;e<r.length;e++)i.test(r[e])||(n+=r[e]+",");return n}};
$.fn.extend({textareaAutoHeight:function(t){this._options={minHeight:0,maxHeight:1e3},this.init=function(){for(var i in t)this._options[i]=t[i];0==this._options.minHeight&&(this._options.minHeight=parseFloat($(this).height()));for(var i in this._options)null==$(this).attr(i)&&$(this).attr(i,this._options[i]);$(this).keydown(this.resetHeight).keyup(this.resetHeight).change(this.resetHeight).focus(this.resetHeight),$(this)[0].onpaste=this.resetHeight},this.resetHeight=function(){var t=parseFloat($(this).attr("minHeight")),i=parseFloat($(this).attr("maxHeight"));$.browser.msie||$(this).height(0);var s=parseFloat(this.scrollHeight);s=s<t?t:s>i?i:s,$(this).height(s).scrollTop(s),s>=i?$(this).css("overflow-y","scroll"):$(this).css("overflow-y","hidden")},this.init()}});
!function(e,n){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return n(e)}):n(e,!0)}(this,function(e,n){function i(n,i,t){e.WeixinJSBridge?WeixinJSBridge.invoke(n,o(i),function(e){c(n,e,t)}):d(n,t)}function t(n,i,t){e.WeixinJSBridge?WeixinJSBridge.on(n,function(e){t&&t.trigger&&t.trigger(e),c(n,e,i)}):t?d(n,t):d(n,i)}function o(e){return e=e||{},e.appId=V.appId,e.verifyAppId=V.appId,e.verifySignType="sha1",e.verifyTimestamp=V.timestamp+"",e.verifyNonceStr=V.nonceStr,e.verifySignature=V.signature,e}function r(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function c(e,n,i){var t,o,r;switch(delete n.err_code,delete n.err_desc,delete n.err_detail,t=n.errMsg,t||(t=n.err_msg,delete n.err_msg,t=s(e,t,i),n.errMsg=t),i=i||{},i._complete&&(i._complete(n),delete i._complete),t=n.errMsg||"",V.debug&&!i.isInnerInvoke&&alert(JSON.stringify(n)),o=t.indexOf(":"),r=t.substring(o+1)){case"ok":i.success&&i.success(n);break;case"cancel":i.cancel&&i.cancel(n);break;default:i.fail&&i.fail(n)}i.complete&&i.complete(n)}function s(e,n){var i,t,o,r;if(n){switch(i=n.indexOf(":"),e){case m.config:t="config";break;case m.openProductSpecificView:t="openProductSpecificView";break;default:t=n.substring(0,i),t=t.replace(/_/g," "),t=t.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),t=t.substring(0,1).toLowerCase()+t.substring(1),t=t.replace(/ /g,""),-1!=t.indexOf("Wcpay")&&(t=t.replace("Wcpay","WCPay")),o=g[t],o&&(t=o)}r=n.substring(i+1),"confirm"==r&&(r="ok"),"failed"==r&&(r="fail"),-1!=r.indexOf("failed_")&&(r=r.substring(7)),-1!=r.indexOf("fail_")&&(r=r.substring(5)),r=r.replace(/_/g," "),r=r.toLowerCase(),("access denied"==r||"no permission to execute"==r)&&(r="permission denied"),"config"==t&&"function not exist"==r&&(r="ok"),n=t+":"+r}return n}function a(e){var n,i,t,o;if(e){for(n=0,i=e.length;i>n;++n)t=e[n],o=m[t],o&&(e[n]=o);return e}}function d(e,n){if(V.debug&&!n.isInnerInvoke){var i=g[e];i&&(e=i),n&&n._complete&&delete n._complete,console.log('"'+e+'",',n||"")}}function u(){if(!("6.0.2">T||k.systemType<0)){var e=new Image;k.appId=V.appId,k.initTime=v.initEndTime-v.initStartTime,k.preVerifyTime=v.preVerifyEndTime-v.preVerifyStartTime,x.getNetworkType({isInnerInvoke:!0,success:function(n){k.networkType=n.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+k.version+"&o="+k.isPreVerifyOk+"&s="+k.systemType+"&c="+k.clientVersion+"&a="+k.appId+"&n="+k.networkType+"&i="+k.initTime+"&p="+k.preVerifyTime+"&u="+k.url;e.src=i}})}}function p(){return(new Date).getTime()}function l(n){_&&(e.WeixinJSBridge?n():h.addEventListener&&h.addEventListener("WeixinJSBridgeReady",n,!1))}function f(){x.invoke||(x.invoke=function(n,i,t){e.WeixinJSBridge&&WeixinJSBridge.invoke(n,o(i),t)},x.on=function(n,i){e.WeixinJSBridge&&WeixinJSBridge.on(n,i)})}var m,g,h,y,S,_,w,I,T,v,k,V,M,b,x;if(!e.jWeixin)return m={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},g=function(){var e,n={};for(e in m)n[m[e]]=e;return n}(),h=e.document,y=h.title,S=navigator.userAgent.toLowerCase(),_=-1!=S.indexOf("micromessenger"),w=-1!=S.indexOf("android"),I=-1!=S.indexOf("iphone")||-1!=S.indexOf("ipad"),T=function(){var e=S.match(/micromessenger\/(\d+\.\d+\.\d+)/)||S.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),v={initStartTime:p(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},k={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:I?1:w?2:-1,clientVersion:T,url:encodeURIComponent(location.href)},V={},M={_completes:[]},b={state:0,res:{}},l(function(){v.initEndTime=p()}),x={config:function(e){V=e,d("config",e),l(function(){i(m.config,{verifyJsApiList:a(V.jsApiList)},function(){M._complete=function(e){v.preVerifyEndTime=p(),b.state=1,b.res=e},M.success=function(){k.isPreVerifyOk=0},M.fail=function(e){M._fail?M._fail(e):b.state=-1};var e=M._completes;return e.push(function(){V.debug||u()}),M.complete=function(n){for(var i=0,t=e.length;t>i;++i)e[i](n);M._completes=[]},M}()),v.preVerifyStartTime=p()}),V.beta&&f()},ready:function(e){0!=b.state?e():(M._completes.push(e),!_&&V.debug&&e())},error:function(e){"6.0.2">T||(-1==b.state?e(b.res):M._fail=e)},checkJsApi:function(e){var n=function(e){var n,i,t=e.checkResult;for(n in t)i=g[n],i&&(t[i]=t[n],delete t[n]);return e};i("checkJsApi",{jsApiList:a(e.jsApiList)},function(){return e._complete=function(e){if(w){var i=e.checkResult;i&&(e.checkResult=JSON.parse(i))}e=n(e)},e}())},onMenuShareTimeline:function(e){t(m.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:e.title||y,desc:e.title||y,img_url:e.imgUrl,link:e.link||location.href},e)}},e)},onMenuShareAppMessage:function(e){t(m.onMenuShareAppMessage,{complete:function(){i("sendAppMessage",{title:e.title||y,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){t(m.onMenuShareQQ,{complete:function(){i("shareQQ",{title:e.title||y,desc:e.desc||"",img_url:e.imgUrl,link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){t(m.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:e.title||y,desc:e.desc||"",img_url:e.imgUrl,link:e.link||location.href},e)}},e)},startRecord:function(e){i("startRecord",{},e)},stopRecord:function(e){i("stopRecord",{},e)},onVoiceRecordEnd:function(e){t("onVoiceRecordEnd",e)},playVoice:function(e){i("playVoice",{localId:e.localId},e)},pauseVoice:function(e){i("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){i("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){t("onVoicePlayEnd",e)},uploadVoice:function(e){i("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){i("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){i("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){i("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"]},function(){return e._complete=function(e){if(w){var n=e.localIds;n&&(e.localIds=JSON.parse(n))}},e}())},previewImage:function(e){i(m.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){i("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){i("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getNetworkType:function(e){var n=function(e){var n,i,t,o=e.errMsg;if(e.errMsg="getNetworkType:ok",n=e.subtype,delete e.subtype,n)e.networkType=n;else switch(i=o.indexOf(":"),t=o.substring(i+1)){case"wifi":case"edge":case"wwan":e.networkType=t;break;default:e.errMsg="getNetworkType:fail"}return e};i("getNetworkType",{},function(){return e._complete=function(e){e=n(e)},e}())},openLocation:function(e){i("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},i(m.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){i("hideOptionMenu",{},e)},showOptionMenu:function(e){i("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},i("closeWindow",{immediate_close:e.immediateClose||0},e)},hideMenuItems:function(e){i("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){i("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){i("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){i("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},i("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){var n,i;I&&(n=e.resultStr,n&&(i=JSON.parse(n),e.resultStr=i&&i.scan_code&&i.scan_code.scan_result))},e}())},openProductSpecificView:function(e){i(m.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0},e)},addCard:function(e){var n,t,o,r,c=e.cardList,s=[];for(n=0,t=c.length;t>n;++n)o=c[n],r={card_id:o.cardId,card_ext:o.cardExt},s.push(r);i(m.addCard,{card_list:s},function(){return e._complete=function(e){var n,i,t,o=e.card_list;if(o){for(o=JSON.parse(o),n=0,i=o.length;i>n;++n)t=o[n],t.cardId=t.card_id,t.cardExt=t.card_ext,t.isSuccess=!!t.is_succ,delete t.card_id,delete t.card_ext,delete t.is_succ;e.cardList=o,delete e.card_list}},e}())},chooseCard:function(e){i("chooseCard",{app_id:V.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){var n,t,o,r,c=e.cardList,s=[];for(n=0,t=c.length;t>n;++n)o=c[n],r={card_id:o.cardId,code:o.code},s.push(r);i(m.openCard,{card_list:s},e)},chooseWXPay:function(e){i(m.chooseWXPay,r(e),e)}},n&&(e.wx=e.jWeixin=x),x});
var commLog={},commLogPageId=[{id:1,desc:"启动页"},{id:2,desc:"分类-课程（9大系列课)"},{id:3,desc:"分类-题库（题库入口)"},{id:4,desc:"登录注册-登录页"},{id:5,desc:"登录注册-找回密码页"},{id:6,desc:"登录注册-验证接收页"},{id:7,desc:"登录注册-重置密码页"},{id:8,desc:"登录注册-手机快捷登录页"},{id:9,desc:"登录注册-注册页"},{id:10,desc:"登录注册-唯医账号登录页"},{id:11,desc:"微信登录-账号绑定"},{id:12,desc:"登录注册-唯医登录-账号绑定"},{id:13,desc:"登录注册-账号授权页"},{id:14,desc:"医师认证-认证基本信息页（认证第一步)"},{id:15,desc:"医师认证-认证类型页（认证第二步)"},{id:16,desc:"医师认证-职称选择页"},{id:17,desc:"医师认证-专业选择页"},{id:18,desc:"医师认证-选择页-省"},{id:19,desc:"医师认证-选择页-市"},{id:20,desc:"医师认证-选择页-医院"},{id:21,desc:"医师认证-选择页-基地"},{id:22,desc:"医师认证-医院添加页"},{id:23,desc:"医师认证-认证拒绝页"},{id:24,desc:"首页-首页"},{id:25,desc:"首页-精品课程列表页"},{id:26,desc:"搜索-(输入、结果页)"},{id:27,desc:"消息-消息列表页（消息主页）"},{id:28,desc:"消息-通知详情页"},{id:29,desc:"消息-讨论列表页"},{id:30,desc:"消息-赞了我的列表页"},{id:31,desc:"习题-专项练习列表页"},{id:32,desc:"习题-顺序练习列表页"},{id:33,desc:"习题-错题本列表页"},{id:34,desc:"习题-习题资源页"},{id:35,desc:"习题-答题结果页"},{id:36,desc:"系列课-系列课简介页"},{id:37,desc:"系列课-系列课目录页"},{id:38,desc:"课程终端页-课程页"},{id:39,desc:"课程终端页-讨论输入页"},{id:40,desc:"课程终端页-讨论对话页"},{id:41,desc:"课程终端页-课件浏览页"},{id:42,desc:"我的-用户主页"},{id:43,desc:"我的-我的讨论"},{id:44,desc:"我的-下载-已下载"},{id:45,desc:"我的-已下载列表页"},{id:46,desc:"我的-下载-正在下载"},{id:47,desc:"我的-收藏-课程"},{id:48,desc:"我的-课程-习题"},{id:49,desc:"我的-学习历史"},{id:50,desc:"我的-编辑简介"},{id:51,desc:"我的-个人简介编辑页"},{id:52,desc:"我的-设置页"},{id:53,desc:"我的-账号安全"},{id:54,desc:"我的-账号绑定-微信"},{id:55,desc:"我的:账号绑定-唯医"},{id:56,desc:"我的-账号绑定-手机"},{id:57,desc:"我的-账号绑定-邮箱"},{id:58,desc:"我的-修改密码"},{id:59,desc:"我的-消息设置"},{id:60,desc:"我的-字号设置"},{id:61,desc:"我的-意见反馈"},{id:62,desc:"我的-关于我们"},{id:63,desc:"我的-添加头像提示"},{id:64,desc:"我的-个人头像-大图"},{id:65,desc:"他人主页-他人主页"}];commLog.pc=function(){for(var e=navigator.userAgent,n=new Array("Android","iPhone","SymbianOS","Windows Phone","iPod"),t=!0,i=0;i<n.length;i++)if(e.indexOf(n[i])>0){t=!1;break}return t},commLog.changeUrl=function(e){var n="",t="";return commLog.pc()?(t=/\/\/www.yi-ding.net.cn\/call\//g,n=t.test(e)?e.replace(/\/\/www.yi-ding.net.cn\/call\//,"//www.yi-ding.net.cn/call/"):e.replace(/\/\/m.yi-ding.net.cn\/mcall\//,"//www.yi-ding.net.cn/call/")):(t=/\/\/m.yi-ding.net.cn\/mcall\//g,n=t.test(e)?e.replace(/\/\/m.yi-ding.net.cn\/mcall\//,"//m.yi-ding.net.cn/mcall/"):e.replace(/\/\/www.yi-ding.net.cn\/call\//,"//m.yi-ding.net.cn/mcall/")),n},commLog.urlList={createBrowse:commLog.changeUrl("//www.yi-ding.net.cn/call/log/yiding/customer/browse/create/"),updateLeave:"//www.yi-ding.net.cn/call/log/yiding/customer/browse/update/"},commLog.logId="",commLog.isClose=!1,commLog.baiduPCLog=function(){!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6f821f9b68f7d9af379b68d75dd5262f";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}()},commLog.baiduH5Log=function(){!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?42f17d9256d954c97b08666bff0b296b";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}()},commLog.pc()?commLog.baiduPCLog():commLog.baiduH5Log(),commLog.execute=function(e,n){var t=commLog,i=t.urlList[e],r=null,c={};return n&&""!=n&&(c.paramJson=$.toJSON(n)),$.ajax({type:"POST",url:i,data:c,dataType:"json",async:!0,success:function(e){r=e&&e.responseObject?e.responseObject:e,r&&(commLog.logId=r.responsePk)},error:function(){}}),r},commLog.getCookie=function(e){var n=encodeURIComponent(e)+"=",t="",i=document.cookie.indexOf(n),r=null;return i>-1&&(r=document.cookie.indexOf(";",i),r==-1&&(r=document.cookie.length),t=decodeURIComponent(document.cookie.substring(i+n.length,r))),t},commLog.getPage=function(e){for(var n=commLogPageId.length,t=null,i=0;i<n;i++){var r=commLogPageId[i];null!=r&&null!=r.id&&r.id==e&&(t=r)}return t},commLog.getBrowserInfo=function(){var e=navigator.userAgent.toLowerCase(),n=/msie [\d.]+;/gi,t=/firefox\/[\d.]+/gi,i=/chrome\/[\d.]+/gi,r=/safari\/[\d.]+/gi;return e.indexOf("msie")>0?e.match(n):e.indexOf("firefox")>0?e.match(t):e.indexOf("chrome")>0?e.match(i):e.indexOf("safari")>0&&e.indexOf("chrome")<0?e.match(r):void 0},commLog.checkUrl=function(e,n){var t=[{regx:/curriculum/g,type:"2",name:"分类-课程（9大系列课)",urlLink:"https://www.yi-ding.net.cn/pages/curriculum/curriculum.html"},{regx:/question/g,type:"3",name:"分类-题库",urlLink:"https://www.yi-ding.net.cn/pages/category/question.html"},{regx:/one_exercise/g,type:"34",name:"习题-习题资源页",urlLink:"https://www.yi-ding.net.cn/"},{regx:/niceClass/g,type:"25",name:"首页-精品课程列表页",urlLink:"https://www.yi-ding.net.cn/pages/index/niceClass.html"},{regx:/search/g,type:"26",name:"搜索-(输入、结果页)",urlLink:"https://www.yi-ding.net.cn/pages/search/search.html"},{regx:/message_discuss/g,type:"29",name:"消息-讨论列表页（消息主页）",urlLink:"https://www.yi-ding.net.cn/pages/message/message_discuss.html"},{regx:/message_like/g,type:"30",name:"消息-赞了我的列表页",urlLink:"https://www.yi-ding.net.cn/pages/message/message_like.html"},{regx:/message_information/g,type:"",name:"",urlLink:"https://www.yi-ding.net.cn/pages/message/message_information.html"},{regx:/message_index/g,type:"27",name:"消息-消息列表页（消息主页）",urlLink:"https://www.yi-ding.net.cn/pages/message/message_index.html"},{regx:/help_feedback/g,type:"",name:"",urlLink:"https://www.yi-ding.net.cn/pages/help_feedback/help_feedback.html"},{regx:/www.yi-ding.net.cn\/course/g,type:"38",name:"课程终端页-课程页",urlLink:"https://www.yi-ding.net.cn/"},{regx:/www.yi-ding.net.cn\/message/g,type:"",name:"",urlLink:"https://www.yi-ding.net.cn/"},{regx:/www.yi-ding.net.cn\/series/g,type:"36",name:"系列课-系列课简介页",urlLink:"https://www.yi-ding.net.cn/"},{regx:/exercise_order_begin/g,type:"32",name:"习题-顺序练习列表页",urlLink:"https://www.yi-ding.net.cn/pages/exercises/exercise_order_begin.html"},{regx:/exercise_order.html/g,type:"34",name:"习题-习题资源页",urlLink:"https://www.yi-ding.net.cn/pages/exercises/exercise_order.html"},{regx:/exercise_order_result/g,type:"35",name:"习题-答题结果页",urlLink:"https://www.yi-ding.net.cn/pages/exercises/exercise_order_result.html"},{regx:/exercise_project_begin/g,type:"31",name:"习题-专项练习列表页",urlLink:"https://www.yi-ding.net.cn/pages/exercises/exercise_project_begin.html"},{regx:/exercise_project.html/g,type:"34",name:"习题-习题资源页",urlLink:"https://www.yi-ding.net.cn/pages/exercises/exercise_project.html"},{regx:/exercise_project_result/g,type:"35",name:"习题-答题结果页",urlLink:"https://www.yi-ding.net.cn/pages/exercises/exercise_project_result.html"},{regx:/personal_wrongList/g,type:"33",name:"习题-错题本列表页",urlLink:"https://www.yi-ding.net.cn/pages/personal/personal_wrongList.html"},{regx:/exercise_error_status/g,type:"73",name:"错题本习题页",urlLink:"https://www.yi-ding.net.cn/pages/exercises/exercise_error_status.html"},{regx:/personal_index/g,type:"42",name:"我的-用户主页",urlLink:"https://www.yi-ding.net.cn/"},{regx:/others_index/g,type:"65",name:"他的-用户主页",urlLink:"https://www.yi-ding.net.cn/pages/personal/others_index.html"},{regx:/personal_myDiscuss/g,type:"43",name:"我的-我的讨论",urlLink:"https://www.yi-ding.net.cn/pages/personal/personal_index.html"},{regx:/personal_collection/g,type:"47",name:"我的-收藏-课程",urlLink:"https://www.yi-ding.net.cn/pages/personal/personal_collection.html"},{regx:/personal_learnHistory/g,type:"49",name:"我的-学习历史",urlLink:"https://www.yi-ding.net.cn/pages/personal/personal_learnHistory.html"},{regx:/personal_setting/g,type:"52",name:"我的-设置页",urlLink:"https://www.yi-ding.net.cn/pages/personal/personal_setting.html"},{regx:/personal_introConfig/g,type:"51",name:"我的-个人简介编辑页",urlLink:"https://www.yi-ding.net.cn/pages/personal/personal_introConfig.html"},{regx:/personal_qualification/g,type:"",name:"",urlLink:"https://www.yi-ding.net.cn/pages/personal/personal_qualification.html"},{regx:/allinAuthority/g,type:"12",name:"登录注册-唯医登录-账号绑定",urlLink:"https://www.yi-ding.net.cn/pages/authority/allinAuthority.html"},{regx:/changePhone/g,type:"12",name:"登录注册-唯医登录-账号绑定",urlLink:"https://www.yi-ding.net.cn/pages/authority/changePhone.html"},{regx:/weixinBindLogin/g,type:"11",name:"微信登录-账号绑定",urlLink:"https://www.yi-ding.net.cn/pages/authority/weixinBindLogin.html"}],i=!0,r=/^(https|http):\/\/www.yi-ding.net.cn\/$/;if("type"==e){for(var c=0;c<t.length;c++)if(t[c].regx.test(n))return i=!1,t[c].type;if(i&&r.test(n))return"24"}else{for(var s=0;s<t.length;s++)if(t[s].type==n)return t[s].urlLink;if("24"==n&&r.test(n))return"https://www.yi-ding.net.cn"}},commLog.creatEvent=function(e){var n;n=e.url?e.url:window.location.href.substr(0,250);var t=commLog.getBrowserInfo(),i="",r="";t&&(i=(t+"").replace(/[^0-9.]/gi,""),r=(t+"").replace(/[^a-zA-Z]/gi,"")+","+i);var c=e.trackLocation?e.trackLocation:"",s=comm.getURrlName("sourceType")?comm.getURrlName("sourceType"):commLog.checkUrl("type",document.referrer),o=document.referrer?document.referrer:commLog.checkUrl("url",s),d=e.browseType?e.browseType:commLog.checkUrl("type",window.location.href),g={customerId:localStorage.getItem("userId")||0,trackLocation:c,browseTypeUrl:n,trackId:e.id,keyWord:e.keyword,browseTypeSourceUrl:o,opIp:returnCitySN.cip,browseTypeSource:s,opSource:"网站",opAddress:returnCitySN.cname,opNetwork:"",browseType:d,opAdvice:r},a={};a.paramJson=$.toJSON(g),$.ajax({type:"POST",url:"//www.yi-ding.net.cn/call/log/yiding/track/create/",data:a,dataType:"json",async:!0,success:function(e){},error:function(){}})},commLog.createBrowse=function(e,n,t){var i,r=commLog;i=void 0!=t?t:window.location.href.substr(0,250);var c=commLog.getBrowserInfo(),s="",o="";c&&(s=(c+"").replace(/[^0-9.]/gi,""),o=(c+"").replace(/[^a-zA-Z]/gi,"")+","+s);var d=(new Date,new Date),g=d.getFullYear(),a=d.getMonth()+1,m=d.getDate(),l=d.getHours(),p=d.getMinutes(),w=d.getSeconds(),u=g+"-"+a+"-"+m+" "+l+":"+p+":"+w,y={customerId:localStorage.getItem("userId")||0,browseUrl:i,browseType:e,opDesc:n,openTime:u,opIp:returnCitySN.cip,opAddress:returnCitySN.cname,opAdvice:o};r.execute("createBrowse",y)},commLog.updateLeave=function(){if(commLog.logId&&""!=commLog.logId){var e={id:commLog.logId};commLog.execute("updateLeave",e),commLog.logId=""}};
var Log={},LogPageId=[{id:1,desc:"浏览首页"},{id:2,desc:"浏览视频应用页"},{id:3,desc:"浏览文库应用页"},{id:4,desc:"浏览视频内容页"},{id:5,desc:"浏览文库内容页"},{id:6,desc:"浏览个人主页"},{id:7,desc:"浏览个人首页"},{id:8,desc:"浏览个人资料页"},{id:9,desc:"浏览话题内容页"},{id:10,desc:"浏览病例内容页"}];Log.urlList={createBrowse:"/mcall/log/customer/browse/createBrowse/",updateLeave:"/mcall/log/customer/browse/updateLeave/"},Log.logId="",Log.isClose=!1,Log.execute=function(e,o){var n=Log,t=n.urlList[e],d=null,c={};return o&&""!=o&&(c.paramJson=$.toJSON(o)),$.ajax({type:"POST",url:t,data:c,dataType:"json",async:!0,timeout:1e4,success:function(e){d=e&&e.responseObject?e.responseObject:e,d&&(Log.logId=d.responsePk)},error:function(){}}),d},Log.getCookie=function(e){var o=encodeURIComponent(e)+"=",n="",t=document.cookie.indexOf(o),d=null;return t>-1&&(d=document.cookie.indexOf(";",t),d==-1&&(d=document.cookie.length),n=decodeURIComponent(document.cookie.substring(t+o.length,d))),n},Log.getPage=function(e){for(var o=LogPageId.length,n=null,t=0;t<o;t++){var d=LogPageId[t];null!=d&&null!=d.id&&d.id==e&&(n=d)}return n},Log.createBrowse=function(e,o,n){var t,d=Log;t=void 0!=n?n:window.location.href.substr(0,250);var c={browseUrl:t,browseType:e,opDesc:o},r=d.getCookie("openPage");if(null==r||""==r){d.execute("createBrowse",c);var i=new Date;i.setTime(i.getTime()+2e4),document.cookie="openPage=on;expires="+i.toGMTString()}},Log.updateLeave=function(){if(Log.logId&&""!=Log.logId){var e={id:Log.logId,async:!1};Log.execute("updateLeave",e),Log.logId=""}},window.onbeforeunload=function(e){Log.updateLeave()};
!function(o){var e=function(o){this.init(o)};e.prototype={init:function(e){var i={url:window.location.href,title:document.title,pic:"",hasH5:!0,hasWeiboImg:!0,hasQzoneImg:!0,hasQfriendImg:!0};this.options=o.extend(i,e),this.layout()},layout:function(){0!=o(".share").size()&&o(".share").remove();var e=this;setTimeout(function(){o(".al-rightNav").append('<div class="share rightNav" id="share"><i class="icon-share" style="display: block;"></i><p class="shareTxt" style="display: none;">分享</p><article class="sharePic" id="yd-shareBox" style="display: none;">'+(e.options.hasH5?'<b class="yd-weixin"><i class="icon-weixin"></i><em>微信</em></b>':"<section></section>")+'<section class="Ev-shareWeixinCode" style="display: none;position: absolute;bottom: 100%;"><h3>使用微信扫描二维码</h3></section><b class="yd-qqFriends"><i class="icon-qq"></i><em>QQ</em></b><b class="yd-qZone"><i class="icon-zone"></i><em>QQ空间</em></b><b class="yd-weibo"><i class="icon-weibo"></i><em>微博</em></b></article></div>'),o(".share").on("click",function(){o(".Ev-shareWeixinCode canvas").remove(),o(".Ev-shareWeixinCode").hide(),o("#yd-shareBox").is(":visible")?(o("#yd-shareBox").hide(),commLog.creatEvent({id:99,url:location.href,keyword:"取消分享"})):(o("#yd-shareBox").show(),e.options.clickCallback&&e.options.clickCallback())}),e.container=o("#yd-shareBox"),e.qZone(),e.weibo(),e.qFriends(),e.weixin()},10)},qZone:function(){var o=this;this.container.on("click",".yd-qZone",function(){commLog.creatEvent({id:103,url:window.location.href,keyword:"QQ空间分享"});var e="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+encodeURIComponent(o.options.qqZoneTitle?o.options.qqZoneTitle:o.options.title)+"&url="+encodeURIComponent(o.options.url)+(o.options.qqZoneSummary?"&summary="+encodeURIComponent(comm.getStrLen(o.options.qqZoneSummary,50)):"")+(o.options.hasQzoneImg&&o.options.pic?"&pics="+encodeURIComponent(o.options.pic?o.options.pic:""):"");return window.open(e),o.options.qZoneCallback&&o.options.qZoneCallback(),!1})},weibo:function(){var o=this;this.container.find(".yd-weibo").on("click",function(){commLog.creatEvent({id:104,url:window.location.href,keyword:"微博分享"});var e="http://service.weibo.com/share/share.php?title="+encodeURIComponent(o.options.sinaTitle)+"&url="+encodeURIComponent(o.options.url)+(o.options.sinaSummary?"&summary="+encodeURIComponent(comm.getStrLen(o.options.sinaSummary,50)):"")+(o.options.hasWeiboImg&&o.options.pic?"&pic="+encodeURIComponent(o.options.pic):"");return window.open(e),o.options.weiboCallback&&o.options.weiboCallback(),!1})},qFriends:function(){var o=this;this.container.find(".yd-qqFriends").on("click",function(){commLog.creatEvent({id:102,url:window.location.href,keyword:"QQ分享"});var e="http://connect.qq.com/widget/shareqq/index.html?title="+encodeURIComponent(o.options.qqTitle?o.options.qqTitle:o.options.title)+"&url="+encodeURIComponent(o.options.url)+(o.options.qqSummary?"&summary="+encodeURIComponent(comm.getStrLen(o.options.qqSummary,50)):"")+(o.options.hasWeiboImg&&o.options.pic?"&pics="+encodeURIComponent(o.options.pic?o.options.pic:""):"");return window.open(e),o.options.qqCallback&&o.options.qqCallback(),!1})},weixin:function(){var e=this;this.container.find(".yd-weixin").on("click",function(){commLog.creatEvent({id:100,url:window.location.href,keyword:"微信分享"}),e.weixingup=0,e.options.h5Url||(e.options.h5Url=e.options.url);var i=o(".Ev-shareWeixinCode");if(0===e.weixingup)e.weixingup=1,document.createElement("canvas").getContext?0!==o(".Ev-shareWeixinCode canvas").size()?o(".Ev-shareWeixinCode").is(":visible")?o(".Ev-shareWeixinCode").hide():o(".Ev-shareWeixinCode").show():(i.show().qrcode({text:e.options.h5Url}),i.find("canvas").css({width:"150px",height:"150px"})):(i.show().find(".qrcodeTable").qrcode({render:"table",text:e.options.h5Url}),o("canvas",e.parent).css({"margin-left":"62px",position:"absolute",width:"150px",height:"150px",left:"0"}));else{e.weixingup=0,i.hide();var n=o(this).find("table");n.length>0?(n.remove(),o(".qrcodeTable",e.parent).removeAttr("style")):o("canvas",e.parent).remove()}return!1})}},window.ShareAll=e}(jQuery);
comm.date={local_time:function(){var r=new Date,t=r.getFullYear(),e=r.getMonth()+1;e<10&&(e="0"+e);var a=r.getDate();a<10&&(a="0"+a);var s=r.toTimeString().substr(0,8),n=t+"-"+e+"-"+a+" "+s;return n},am_pm_data:function(r){var r,t=r.substr(0,4),e=r.substr(5,2),a=r.substr(8,2),s=r.substr(11,2);s<12?day_ampm="上午 ":12==s?day_ampm="中午 ":s>12&&(day_ampm="下午 ");var n=r.substr(14,2);return r=day_ampm+s+":"+n+" "+t+"年"+e+"月"+a+"日"},cut_date_msec:function(r){return r=r.substr(0,19)},isSameDay:function(r,t){return r.substr(0,10)==t.substr(0,10)},diffDay_one:function(r,t){var e=r.substr(0,10),a=t.substr(0,10),s=e.replace(/\-/g,"/"),n=a.replace(/\-/g,"/"),u=864e5,i=Date.parse(s),b=Date.parse(n);if(isNaN(i))return NaN;if(isNaN(b))return NaN;var f=(b-i)/u;if(e.substring(0,4)!==n.substring(0,4))return s;if(f<1){r=r.slice(0,r.length-2);var g=new Date(r.replace(/\-/g,"/")),p=new Date(t.replace(/\-/g,"/")),c=(p.getTime()-g.getTime())/1e3;if(c<60)return"刚刚";if(c=parseInt(c/60),c<60)return c+"分钟前";if(c=parseInt(c/60),c<60)return c+"小时前"}else{if(f<2)return"昨天";if(f<365)return r.replace(/\-/g,"/").substring(5,10)}},diffDay_two:function(r,t){var e=r.substr(0,10),a=t.substr(0,10),s=e.replace(/\-/g,"/"),n=a.replace(/\-/g,"/"),u=864e5,i=Date.parse(s),b=Date.parse(n);if(isNaN(i))return NaN;if(isNaN(b))return NaN;var f=(b-i)/u;return f>7?r.substr(0,10):"7天前"},date_word:function(r){var t=r.substr(0,4),e=r.substr(5,2),a=r.substr(8,2);return e<10&&(e=e.substr(1,1)),a<10&&(a=a.substr(1,1)),r=t+"年"+e+"月"+a+"日"},datafomat:function(r){var t,e=r;e.each(function(r){t=date_word(e.eq(r).html()),e.eq(r).html(t.substring(t.indexOf("年")+1))})},dateJoint:function(r,t,e,a){var s,n=void 0!=e&&""!=e?e:".",u=void 0!=a&&""!=a?a:"-",i=r.substring(0,10).replace(/-/g,n),b=i.toString().split(n),f=t.substring(0,10).replace(/-/g,n),g=f.toString().split(n);return s=parseInt(g[0])>parseInt(b[0])?i+u+f:parseInt(g[1])>parseInt(b[1])?i+u+f.substring(5,10):i+u+f.substring(8,10)}};
var authentication={};$(document).ready(function(){authentication={isImg:!1,iputObj:null,customer:null,init:function(t){1!=localStorage.getItem("unActive")&&"trigger"!=t.type||(authentication.keyState(),localStorage.getItem("userId")&&authentication.show(t))},enterCertification:function(t){authentication.customer=localStorage.getItem("userId"),authentication.callBack=t,authentication.firstSubmit(),authentication.secondSubmit(),authentication.third()},callBack:{},keyState:function(){var t="";if(localStorage.getItem("userId"))if(localStorage.getItem("approveInfo"))t=JSON.parse(localStorage.getItem("approveInfo"));else{var e={customerId:localStorage.getItem("userId"),isValid:"1"};e={paramJson:$.toJSON(e)},$.ajax({url:"//www.yi-ding.net.cn/call/yiding/customer/auth/getMapById/",type:"GET",dataType:"json",async:!1,data:e,success:function(e){e.responseObject.responseStatus?(localStorage.setItem("approveInfo",JSON.stringify(e.responseObject.responseData.data_list[0].customerAuth)),t=JSON.parse(localStorage.getItem("approveInfo"))):(localStorage.setItem("approveInfo",JSON.stringify({state:"-1"})),t=JSON.parse(localStorage.getItem("approveInfo")))},error:function(t,e,a){}})}return t},show:function(t){var e=authentication.keyState().state;switch(parseInt(e)){case-1:if(authentication.keyState().fullName){var a=authentication.keyState().baseName,i=a.length>0;i||(authentication.rejectPage(),t&&t.before&&t.before(),authentication.enterCertification(t)),i&&(authentication.rejectPage(),t&&t.before&&t.before(),authentication.enterCertification(t))}else authentication.rejectPage(),t&&t.before&&t.before(),authentication.enterCertification(t);break;case 0:return void comm.alertBox({title:"很抱歉！我们正在加紧审核您的认证信息，请耐心等待...",ensure:"好的",ensureCallback:function(){localStorage.setItem("unActive",0),localStorage.getItem("allinUrl")?(window.location.href=localStorage.getItem("allinUrl"),localStorage.removeItem("allinUrl")):t.reload&&t.reload&&window.location.reload()}});case 1:return;case 2:return;case 3:return authentication.rejectPage(!0),t&&t.before&&t.before(),authentication.enterCertification(t),!1;case 4:return void comm.alertBox({title:"很抱歉！我们正在加紧审核您的认证信息，请耐心等待...",ensure:"好的",ensureCallback:function(){localStorage.setItem("unActive",0),localStorage.getItem("allinUrl")?(window.location.href=localStorage.getItem("allinUrl"),localStorage.removeItem("allinUrl")):t.reload&&window.location.reload()}})}},rejectPage:function(t){function e(t){if(t.length>0)for(var e=t.split(","),a=[],i=0;i<e.length;i++)a[i]={},a[i].title=e[i].substring(e[i].indexOf("_")+1),a[i].id=e[i].substring(0,e[i].indexOf("_"));return a}comm.maskBackground.show("rgba(0,0,0,.6)");var a=$(".yd-maskBackground"),i='<section class="authentication-out">    <!--验证默认-->    <section class="authentication authentication1" style="display: display:none;">        <section class="width">            <aside class="Jurisdiction">                <div class="userNormal"><img src="/image/authority/authentication/renzheng.png"></div>                <div class="rz-after">认证后<br>                    你将拥有全部课程观看、讨论、下载权限</div>                <div class="authNone">暂不认证</div>            </aside>         <section class="authorityCommon">            <header class="title">                <div class="authorityTitle">医师认证</div>            </header>            <aside class="rzInput">                <div class="titleInput clear marginTop">                    <div class="titleText">姓名</div>                    <input class="titleType input-name" placeholder="请输入姓名">                </div>                <!--专业选中-->                <div class="titleInput clear marginTop" style="display: none;">                    <div class="titleText">专业</div>                    <ul class="checkboxXl input-checkbox">                        <!--<li><span style="margin:0;">小儿骨科</span><i class="ev-tagClose" tagid="5">X</i></li>-->                    </ul>                    <section class="yd-tagSelectorBox hide al-header-pcModule Ev-professionalBox">                        <header class="yd-tagSelectorBoxTitle">选择专业领域<span class="yd-tagSelectorBoxCloseBtn">X</span></header>                        <section class="yd-tagSelectorItem">                            <!--<button>关节</button>-->                        </section>                        <footer class="yd-tagSelectorBoxFootBtn">                            <button class="yd-personalAdviceSubmit Ev-professionalSure">确定</button>                            <button class="yd-personalAdviceCancel Ev-professionalCancel">取消</button>                        </footer>                    </section>                </div>                <!--专业选中 end-->                <!--专业默认-->                <div class="titleInput clear marginTop">                    <div class="titleText">专业</div>                    <input class="titleType" placeholder="请选择专业">                </div>                <!--专业默认 end-->                <!--下拉列表参考 //www.allinmd.cn/pages/personal/customerInfo.html-->                <!--职称选中-->                <div class="titleInput clear marginTop" style="display: none;">                    <div class="titleText title-technical">职称</div>                    <div class="technical input-technical"></div>                    <section class="al-tagSelectorBox ev-medicalBox" style="display: none;">                        <header class="al-tagSelectorBoxTitle">选择职称<span class="al-tagSelectorBoxCloseBtn ev-medCancel">X</span></header>                        <section class="al-tagSelectorItem ev-medicalConList al-tagSelectorItem1">                            <article class="al-tagSelectorList tagSelectorList1">                            </article>                            <article class="al-tagSelectorList hide tagSelectorList2" style="display: none;">                            </article>                            <article class="al-tagSelectorList hide tagSelectorList3" style="display: none;">                            </article>                        </section>                        <footer class="al-tagSelectorBoxFootBtn">                            <button class="al-personalAdviceSubmit ev-medSave">确定</button>                            <button class="al-personalAdviceCancel ev-medCancel">取消</button>                        </footer>                    </section>                </div>                <!--职称选中 end-->                <!--职称默认-->                <div class="titleInput clear marginTop">                    <div class="titleText">职称</div>                    <input class="titleType" placeholder="请选择职称">                </div>                <!--职称默认 end-->                <div class="titleInput clear marginTop hospital">                    <div class="titleText">就职医院</div>                    <input class="titleType input-hospital" placeholder="请输入就职医院">                    <ul class="set-down hospitalDown" style="display: none;"></ul>                </div>                <div class="titleInput clear base">                    <div class="titleText">住培基地</div>                    <input class="titleType input-base" placeholder="请输入住培基地">                    <ul class="set-down baseDown" style="display: none;"></ul>                </div>            </aside>            <!--激活按钮添加 类名 （activation）-->            <div class="loginBtn">继续</div>        </section>    </section>    </section>    <!--验证默认 END-->    <!--认证工作表-->    <section class="authentication authentication-Style2" style="display:none ;">        <section class="width">         <section class="authorityCommon">            <header class="title" style="display: none;">                <div class="authorityTitle">医师认证</div>                <div class="errortipHeader"><span>当前网络环境不佳，上传失败</span></div>            </header>            <aside class="authenticationStyle">                <div class="clear">                    <div class="styleTitle">认证类型：</div>                    <figure class="selectBorder"><span class="authenticationType"></span>                        <ul class="authenticationList"></ul>                    </figure>                </div>                <div class="pitchOn" style="visibility: hidden;">工作证</div>                <section class="titleInput clear marginTop authenticationNum1">                    <div class="titleText authenticationNum">证件编号</div>                    <input class="titleType" placeholder="请输入证件编号（选填）">                </section>                <div class="uploadPhoto clear">                    <div class="leftNormalImg" id="file"><img src="/image/authority/authentication/auth_uploadphoto.png"> <span>上传认证照片</span>                        <div class="againPopup" style="display: none;">                            <div class="againPopupBg"></div>                            <div class="againPopupText">重新上传</div>                        </div>                        <form class="uploadIcon uploadPic" method="POST" enctype="multipart/form-data">                            <input type="file" name="file" class="authenticationFile" multiple="" id="myfile">                        </form>                    </div>                    <div class="rightNormalImg"><img src="/image/authority/authentication/sample_degree.png"> <span>示例</span></div>                </div>            </aside>            <!--激活按钮添加 类名 （activation）-->            <div class="loginBtn">提交</div>        </section>    </section>    </section>    <!--认证工作表 END-->    <!--认证拒绝-->    <section class="authentication authentication3" style="display:none ;">        <section class="width">         <section class="authorityCommon">            <header class="refuseTitle">认证拒绝</header>            <aside class="refuseText">您提交的认证资料未通过审核，请修改后重新提交</aside>            <div class="loginBtn activation">重新认证</div>            <div class="authenticationNone">暂不认证</div>        </section>    </section>   </section>    <!--认证拒绝 end--></section>';a.html(i),$(".authentication1").hide(),authentication.iputObj=$(".yd-maskBackground .titleInput");var n=authentication.keyState();if(n.fullName){$(".input-name").val(n.fullName),$(".input-hospital").val(n.company),n.baseName?($(".input-base").val(n.baseName),t?($(".authentication3").show(),commLog.createBrowse(23,"医师认证-认证拒绝页",window.location.href)):($(".authentication-Style2").show(),commLog.createBrowse(15,"医师认证-认证类型页（认证第二步)",window.location.href))):($(".authentication1").show(),commLog.createBrowse(14,"医师认证-认证基本信息页（认证第一步)",window.location.href));for(var o=e(n.areasExpertise),c=e(n.medicalTitle),l="",s="",r=0;r<o.length;r++)l+='<li><span style="margin:0;">'+o[r].title+'</span><i class="ev-tagClose" tagid="'+o[r].id+'">X</i></li>';for(var r=0;r<c.length;r++)s+='<li><span style="margin:0;">'+c[r].title+'</span><i class="ev-tagClose" tagid="'+c[r].id+'">X</i></li>';$(".input-checkbox").html(l),$(".input-technical").html(s),$(".yd-maskBackground .titleInput").eq(1).show(),$(".yd-maskBackground .titleInput").eq(3).show(),$(".yd-maskBackground .titleInput").eq(2).hide(),$(".yd-maskBackground .titleInput").eq(4).hide()}else $(".authentication1").show(),commLog.createBrowse(14,"医师认证-认证基本信息页（认证第一步)",window.location.href),$(".yd-maskBackground .titleInput").eq(1).hide(),$(".yd-maskBackground .titleInput").eq(3).hide()},firstSubmit:function(){authentication.authenticationInint(),$(".authNone").off("click").on("click",function(){commLog.creatEvent({id:16,url:window.location.href,keyword:"暂不认证"}),$(".yd-confirmModalMask.yd-alertModalMask").remove(),comm.confirmBox({title:"确认放弃认证吗？",content:"放弃认证，将无法：</br>浏览完整系列课程</br>参与课程问答",cancel:"放弃",ensure:"继续认证",ensureCallback:function(){},cancelCallback:function(){$(".yd-confirmModalMask").remove(),$(".yd-maskBackground").remove(),localStorage.setItem("unActive",0),localStorage.getItem("allinUrl")?(window.location.href=localStorage.getItem("allinUrl"),localStorage.removeItem("allinUrl")):authentication.callBack.reload&&window.location.href.indexOf("course")==-1&&location.reload()}})}),$(".authentication1 .loginBtn").removeClass("activation"),$(".input-name").click(function(){authentication.hideSetDown(),authentication.medicalTitleBtn(),authentication.tagSelectorBoxCloseBtn()}),$(".input-name").blur(function(){authentication.inputName($(this))}),authentication.iputObj.eq(2).click(function(){authentication.checkBox()}),authentication.iputObj.eq(2).find("input").on("keyup",function(){authentication.checkBox()}),$(".checkboxXl").click(function(){authentication.checkBox()}),$(".yd-personalAdviceCancel").click(authentication.tagSelectorBoxCloseBtn),$(".yd-personalAdviceSubmit").click(authentication.tagSelectorBoxCloseBtn),$(".yd-tagSelectorBoxCloseBtn").click(authentication.tagSelectorBoxCloseBtn),authentication.iputObj.eq(4).find("input").on("keyup",function(){authentication.technical()}),authentication.iputObj.eq(4).click(function(){authentication.technical()}),$(".technical").off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),authentication.technical()}),$(".al-personalAdviceSubmit").click(authentication.medicalTitleBtn),$(".al-tagSelectorBoxCloseBtn").click(authentication.medicalTitleBtn),$(".al-personalAdviceCancel").click(authentication.medicalTitleBtn),authentication.inputChange(),$(".input-hospital").on("mouseout",function(){$(".hospitalDown").hide()}),$(".hospitalDown").on("mouseover",function(){$(".hospitalDown").show()}),$(".input-base").on("mouseout",function(){$(".baseDown").hide()}),$(".baseDown").on("mouseover",function(){$(".baseDown").show()}),authentication.loginBtn()},authenticationInint:function(){var t={isValid:"1",treeLevels:"1,2",platformId:"1",firstResult:"0",maxResult:"20"};t={paramJson:$.toJSON(t)},authentication.ajaxRequest("//www.yi-ding.net.cn/call/comm/data/baseinfo/getTagList/",t,"GET",function(t){for(var e=t.responseObject.responseData.data_list,a=0;a<e.length;a++){var i=$("<button></button>");i.text(e[a].tagName),i.attr("tagid",e[a].id),$(".yd-tagSelectorItem").append(i)}});var e={isValid:"1",typeId:"2",roleId:"7",visitSiteId:"13"};e={paramJson:$.toJSON(e)},authentication.ajaxRequest("//www.yi-ding.net.cn/call/comm/data/baseinfo/getRoleConfigList/",e,"GET",function(t){for(var e=t.responseObject.responseData.data_list,a="",i="",n="",o=0;o<e.length;o++)1==e[o].sortId?a+='<span class="ev-medicalLiList" select-status="false" medicalid="'+e[o].refId+'">'+e[o].refValue+"</span>":2==e[o].sortId?i+='<span class="ev-medicalLiList" select-status="false" medicalid="'+e[o].refId+'">'+e[o].refValue+"</span>":3==e[o].sortId&&(n+='<span class="ev-medicalLiList" select-status="false" medicalid="'+e[o].refId+'">'+e[o].refValue+"</span>");a+='<span class="ev-medicalLiList" select-status="false" medicalid="0">其他</span>',$(".authentication1 .tagSelectorList1").html(a),$(".authentication1 .tagSelectorList2").html(i),$(".authentication1 .tagSelectorList3").html(n)})},inputName:function(t){var e=t.val();if(e.length>0)if(/^\s|^\.|^\▪|^\·|\s$|\.$|\▪$|\·$/.test(e)){$(".authentication1 .errortipHeader1").remove();var a="<div class='errortipHeader1'><span>请输入正确的名字</span></div>";$(".authentication1").append(a),$(".authentication1 .loginBtn").removeClass("activation")}else if(/^[\u4e00-\u9fa5\s\.\▪\·]{1,25}$|^[A-Za-z\s\.\▪\·]{1,50}$|^([A-Za-z\s\.\▪\·]|[\u4e00-\u9fa5\s\.\▪\·]){1,50}$/.test(e)){for(var i=0;i<e.length;i++)if(" "==e[i]&&" "==e[i+1]){$(".authentication1 .errortipHeader1").remove();var a="<div class='errortipHeader1'><span>请输入正确的名字</span></div>";return $(".authentication1").append(a),void $(".authentication1 .loginBtn").removeClass("activation")}$(".authentication1 .errortipHeader1").remove(),authentication.loginBtnActive()}else{$(".authentication1 .errortipHeader1").remove();var a="<div class='errortipHeader1'><span>请输入正确的名字</span></div>";$(".authentication1").append(a),$(".authentication1 .loginBtn").removeClass("activation")}else $(".authentication1 .errortipHeader1").remove(),$(".authentication1 .loginBtn").removeClass("activation")},checkBox:function(){if(authentication.hideSetDown(),authentication.medicalTitleBtn(),"none"==$(".ev-medicalBox").css("display")){authentication.iputObj.eq(1).show(),authentication.iputObj.eq(2).hide();var t=$(".al-header-pcModule .yd-tagSelectorItem button");t.removeClass("active");for(var e=$(".input-checkbox li"),a=0;a<e.length;a++)for(var i=0;i<t.length;i++)t.eq(i).text()==e.eq(a).find("span").text()&&t.eq(i).addClass("active");$(".al-header-pcModule").show();for(var n=0,a=1;a<t.length;a++)t.eq(a).hasClass("active")&&n++;n==t.length-1&&t.eq(0).addClass("active"),t.each(function(){$(this).unbind("click").bind("click",function(){$(this).toggleClass("active");var t=$(this).hasClass("active"),e="1"==$(this).attr("tagid");if(t){var a=$(".yd-tagSelectorItem button");if(e)a.addClass("active");else{for(var i=0,n=1;n<a.length;n++)a.eq(n).hasClass("active")&&i++;i==a.length-1&&a.eq(0).addClass("active")}}else if(e){var o=$(".yd-tagSelectorItem button");$(".yd-tagSelectorItem button").removeClass("active")}else{var o=$(".yd-tagSelectorItem button");o.eq(0).removeClass("active")}})}),$(".al-header-pcModule .yd-personalAdviceCancel").off("click").on("click",function(){commLog.creatEvent({id:22,url:window.location.href,keyword:"专业返回",browseType:"17",browseTypeSourceUrl:window.location.href}),$(".al-header-pcModule").hide(),$(".al-header-pcModule .yd-tagSelectorItem button").removeClass("active");for(var e=$(".input-checkbox li"),a=0;a<e.length;a++)for(var i=0;i<t.length;i++)t.eq(i).text()==e.eq(a).find("span").text()&&t.eq(i).addClass("active");authentication.tagSelectorBoxCloseBtn()}),$(".al-header-pcModule .yd-personalAdviceSubmit").off("click").on("click",function(){commLog.creatEvent({id:23,url:window.location.href,keyword:"专业保存",browseType:"17",browseTypeSourceUrl:window.location.href}),$(".al-header-pcModule").hide();var e="";$("#professionalName01").val("");for(var a=0;a<t.length;a++)if(t.eq(a).hasClass("active")&&0!=a){var i=t.eq(a).text(),n=t.eq(a).attr("tagid");e+='<li><span style="margin:0;">'+i+'</span><i class="ev-tagClose" tagid="'+n+'">X</i></li>'}$(".input-checkbox").html(e),$(".input-checkbox li .ev-tagClose").off("click").on("click",function(){$(this).parents("li").remove();for(var e=$(this).parents("li").find("span").text(),a=0;a<t.length;a++)t.eq(a).text()==e&&t.eq(a).removeClass("active");t.eq(0).removeClass("active"),authentication.tagSelectorBoxCloseBtn()}),authentication.tagSelectorBoxCloseBtn()}),$(".al-header-pcModule .yd-tagSelectorBoxCloseBtn").off("click").on("click",function(){commLog.creatEvent({id:22,url:window.location.href,keyword:"专业返回",browseType:"17",browseTypeSourceUrl:window.location.href}),$(".al-header-pcModule").hide(),$(".al-header-pcModule .yd-tagSelectorItem button").removeClass("active");for(var e=$(".input-checkbox li"),a=0;a<e.length;a++)for(var i=0;i<t.length;i++)t.eq(i).text()==e.eq(a).find("span").text()&&t.eq(i).addClass("active");authentication.tagSelectorBoxCloseBtn()})}},technical:function(){if(authentication.hideSetDown(),"none"==$(".al-header-pcModule").css("display")){authentication.iputObj.eq(3).show(),authentication.iputObj.eq(4).hide();var t=$(".al-tagSelectorBox .ev-medicalLiList"),e=$(".al-tagSelectorBox .tagSelectorList1 .ev-medicalLiList"),a=$(".al-tagSelectorBox .tagSelectorList2 .ev-medicalLiList"),i=$(".al-tagSelectorBox .tagSelectorList3 .ev-medicalLiList");t.removeClass("active");for(var n=$(".input-technical li span"),o=0;o<t.length;o++)for(var c=0;c<n.length;c++)n.eq(c).text()==t.eq(o).text()&&t.eq(o).addClass("active");$(".ev-medicalBox").show(),e.each(function(){$(this).unbind("click").bind("click",function(){"其他"!=$(this).text()?$(this).hasClass("active")?$(this).removeClass("active"):("医学生"==$(this).text()||"住院医师"==$(this).text()||"主治医师"==$(this).text()?(t.removeClass("active"),$(".al-tagSelectorBox .tagSelectorList2").hide(),$(".al-tagSelectorBox .tagSelectorList3").hide()):(e.removeClass("active"),$(".al-tagSelectorBox .tagSelectorList2").show(),$(".al-tagSelectorBox .tagSelectorList3").show()),$(this).addClass("active")):($(".al-tagSelectorBox .tagSelectorList2").show(),$(".al-tagSelectorBox .tagSelectorList3").show())})}),a.each(function(){$(this).unbind("click").bind("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):(a.removeClass("active"),$(this).addClass("active"))})}),i.each(function(){$(this).unbind("click").bind("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):(i.removeClass("active"),$(this).addClass("active"))})}),$(".al-tagSelectorBox .al-personalAdviceSubmit").off("click").on("click",function(){commLog.creatEvent({id:21,url:window.location.href,keyword:"职称保存",browseType:"16",browseTypeSourceUrl:window.location.href}),$(".ev-medicalBox").hide();for(var e="",a=0;a<t.length;a++)t.eq(a).hasClass("active")&&(e+='<li><span style="margin:0;">'+t.eq(a).text()+'</span><i class="ev-tagClose" tagid="'+t.eq(a).attr("medicalid")+'">X</i></li>');$(".input-technical").html(e),authentication.medicalTitleBtn()}),$(".al-tagSelectorBox .al-personalAdviceCancel").off("click").on("click",function(){commLog.creatEvent({id:20,url:window.location.href,keyword:"职称返回",browseType:"16",browseTypeSourceUrl:window.location.href}),$(".ev-medicalBox").hide(),t.removeClass("active");for(var e=$(".input-technical li span"),a=0;a<t.length;a++)for(var i=0;i<e.length;i++)e.eq(i).text()==t.eq(a).text()&&t.eq(a).addClass("active");authentication.medicalTitleBtn()}),$(".al-tagSelectorBox .al-tagSelectorBoxCloseBtn").off("click").on("click",function(){commLog.creatEvent({id:20,url:window.location.href,keyword:"职称返回",browseType:"16",browseTypeSourceUrl:window.location.href}),$(".ev-medicalBox").hide(),t.removeClass("active");for(var e=$(".input-technical li span"),a=0;a<t.length;a++)for(var i=0;i<e.length;i++)e.eq(i).text()==t.eq(a).text()&&t.eq(a).addClass("active");authentication.medicalTitleBtn()}),$(".input-technical li .ev-tagClose").off("click").on("click",function(){$(this).parents("li").remove();for(var e=$(this).parents("li").find("span").text(),a=0;a<t.length;a++)t.eq(a).text()==e&&t.eq(a).removeClass("active");authentication.medicalTitleBtn()})}},secondSubmit:function(){authentication.renzheng(),$(".authentication-Style2 .title").hide(),$(".pitchOn").css("visibility","hidden"),$(".pitchOn").html(""),$(".authentication-Style2 .againPopup").hide(),$(".pitchOn").click(function(){$(".authentication-Style2 .selectBorder").show()}),$(".authentication-Style2 .loginBtn").removeClass("activation"),authentication.imgLoad(),$(".authenticationNum1 .titleType").unbind("keyup").bind("keyup",function(){var t=$(this).val();if(t.length>0)if(/^[A-Za-z0-9]{1,50}$/.test(t)){$(".authentication-Style2  .errortipHeader1").remove();var e=$(".pitchOn").text();authentication.isImg&&""!=e&&$(".authentication-Style2 .loginBtn").addClass("activation")}else{$(".authentication-Style2  .errortipHeader1").remove();var a="<div class='errortipHeader1'><span>请输入正确的证件编号</span></div>";$(".authentication-Style2  ").append(a),$(".authentication-Style2 .loginBtn").removeClass("activation")}else{var e=$(".pitchOn").text();authentication.isImg&&""!=e&&$(".authentication-Style2 .loginBtn").addClass("activation"),$(".authentication-Style2  .errortipHeader1").remove()}})},third:function(){$(".authentication3 .loginBtn").on("click",function(){commLog.creatEvent({id:27,url:window.location.href,keyword:"重新认证",browseType:"23",browseTypeSourceUrl:window.location.href}),$(".authentication3").hide(),$(".authentication1").show(),commLog.createBrowse(14,"医师认证-认证基本信息页（认证第一步)",window.location.href),authentication.iputObj.eq(1).show(),authentication.iputObj.eq(3).show(),authentication.iputObj.eq(2).hide(),authentication.iputObj.eq(4).hide(),authentication.loginBtnActive()}),$(".authentication3 .authenticationNone").off("click").on("click",function(){comm.confirmBox({title:"确认放弃认证吗？",content:"放弃认证，将无法：</br>浏览完整系列课程</br>参与课程问答",cancel:"放弃",ensure:"继续认证",ensureCallback:function(){},cancelCallback:function(){commLog.creatEvent({id:16,url:window.location.href,keyword:"暂不认证"}),$(".yd-confirmModalMask").remove(),$(".yd-maskBackground").remove(),localStorage.setItem("unActive",0),localStorage.getItem("allinUrl")?(window.location.href=localStorage.getItem("allinUrl"),localStorage.removeItem("allinUrl")):authentication.callBack.reload&&window.location.href.indexOf("course")==-1&&location.reload()}})})},imgLoad:function(){$("#myfile").unbind("change").bind("change",function(){var t=$(this).val().split(".")[1].toUpperCase();if("BMP"==t||"PNG"==t||"GIF"==t||"JPG"==t||"JPEG"==t){var e=commLog.getBrowserInfo(),a="",i="";if(e&&(a=(e+"").replace(/[^0-9.]/gi,""),i=(e+"").replace(/[^a-zA-Z]/gi,"")+","+a),"msie,8.0"==i){var n="<figure class='yd-loading1'><img src='/image/personal/loading_big@2x.png' alt=''><p>上传中</p></figure>";$(".authentication-Style2").css({position:"relative"}),$(".authentication-Style2").append(n);var o=($(".authentication-Style2 .titleType").val(),$(".authenticationFile").val(),{imageType:"2",customerId:authentication.customer,visitSiteId:"13"});o={paramJson:$.toJSON(o)},$(this).parent().ajaxSubmit({url:"//www.yi-ding.net.cn/call/yiding/upload/attachment/upload/",dataType:"text",data:o,type:"post",clearForm:!0,success:function(t){authentication.uploadImg(t)},error:function(){$(".yd-loading1").remove(),authentication.isImg=!1,$(".againPopup").show(),$(".authentication-Style2 .loginBtn").removeClass("activation")}})}else{var c=this.files[0].size/1048576;if(c<5){var n="<figure class='yd-loading1'><img src='/image/personal/loading_big@2x.png' alt=''><p>上传中</p></figure>";$(".authentication-Style2").css({position:"relative"}),$(".authentication-Style2").append(n);var o=($(".authentication-Style2 .titleType").val(),$(".authenticationFile").val(),{imageType:"2",customerId:authentication.customer,visitSiteId:"13"});o={paramJson:$.toJSON(o)},$(this).parent().ajaxSubmit({url:"//www.yi-ding.net.cn/call/yiding/upload/attachment/upload/",dataType:"text",data:o,type:"post",clearForm:!0,success:function(t){authentication.uploadImg(t)},error:function(){$(".yd-loading1").remove(),authentication.isImg=!1,$(".againPopup").show(),$(".authentication-Style2 .loginBtn").removeClass("activation")}})}else popup({text:"图片不能大于5MB"})}}else popup({text:"图片限于bmp,png,gif,jpg,jpeg格式"})})},uploadImg:function(t){$(".yd-loading1").remove(),popup({hasImg:!0,text:"上传成功"});var e=$.parseJSON(t.replace(/<.*?>/gi,""));if(e.responseObject.responseStatus){authentication.isImg=!0;var a=$(".pitchOn").text(),i=$(".authentication-Style2 .errortipHeader1").length;authentication.isImg&&""!=a&&0==i&&$(".authentication-Style2 .loginBtn").addClass("activation");var n=e.responseObject.responseMessage.url;$(".leftNormalImg>img").attr({src:n}),$(".authenticationFile").attr("filePathAth",e.responseObject.responseMessage.path),$(".authentication-Style2 .loginBtn").click(function(){commLog.creatEvent({id:19,url:window.location.href,keyword:"认证第二步提交"});var t=$(".authentication-Style2 .errortipHeader1").length,e=$(".pitchOn").attr("pitchonid"),a=$(".pitchOn").text(),i=$(".authentication-Style2 .titleType").val(),n=$(".authenticationFile").attr("filepathAth"),o={customerId:authentication.customer,attType:e,attCode:i,attPath:n,visitSiteId:"0",opflag:"2"},c={paramJson:$.toJSON(o)};if(authentication.isImg&&""!=a&&0==t){var l="//www.yi-ding.net.cn/call/yiding/customer/auth/createAuth/";authentication.ajaxRequest(l,c,"post",function(t){authentication.saveSucess(t.responseObject)})}else $(".authentication-Style2 .loginBtn").removeClass("activation")})}else $(".authentication-Style2 .title").show(),$(".againPopup").show()},loginBtnActive:function(){var t=$(".input-name").val(),e=($(".input-checkbox").text(),$(".input-technical li").length),a=$(".input-hospital").val(),i=$(".input-base").val(),n=$(".authentication1 .errortipHeader1").length,o=$(".input-checkbox li").length;""!=t&&o>0&&0!=e&&""!=a&&""!=i&&0==n?$(".authentication1 .loginBtn").addClass("activation"):$(".authentication1 .loginBtn").removeClass("activation")},loginBtn:function(){$(".authentication1 .loginBtn").click(function(){commLog.creatEvent({id:17,url:window.location.href,keyword:"认证第一步提交"});for(var t=$(".authentication1 .errortipHeader1").length,e=$(".input-name").val(),a=($(".input-checkbox").text(),""),i=0;i<$(".input-checkbox li").length;i++){var n=$(".input-checkbox li i")[i].getAttribute("tagid")+"_"+$(".input-checkbox li span")[i].innerText+",";a+=n}for(var o=a.slice(0,a.length-1),c=$(".input-technical li").length,l="",i=0;i<c;i++){var s=$(".input-technical li i")[i].getAttribute("tagid")+"_"+$(".input-technical li span")[i].innerText;"_"!=s&&(l+=s+",")}var r=l.slice(0,l.length-1),u=$(".input-hospital").val(),d=$(".input-base").val(),h=$(".input-checkbox li").length,p=$(".input-hospital").attr("tagid")||0,g=$(".input-base").attr("tagId")||0,v=authentication.keyState().state,m={customerId:authentication.customer,fullName:e,areasExpertise:o,medicalTitle:r,companyId:p,company:u,baseId:g,baseName:d,state:v,visitSiteId:"0",opflag:"1"};localStorage.setItem("keyNext",JSON.stringify(m));var f={paramJson:$.toJSON(m)};if(""!=e&&h>0&&0!=c&&""!=u&&""!=d&&0==t){var y="//www.yi-ding.net.cn/call/yiding/customer/auth/createAuth/";authentication.ajaxRequest(y,f,"post",function(t){authentication.nextSubmit(t.responseObject,f)})}else $(this).removeClass("activation")})},ajaxRequest:function(t,e,a,i){$.ajax({url:t,type:a,dataType:"json",data:e,success:function(t){i(t)},error:function(t,e,a){}})},renzheng:function(){var t={visitSiteId:"13",isValid:"1",roleId:"6"};t={paramJson:$.toJSON(t)};var e=$(".authenticationList"),a="//www.yi-ding.net.cn/call/comm/data/baseinfo/getRoleConfigList/";authentication.ajaxRequest(a,t,"GET",function(t){for(var a=t.responseObject.responseData.data_list,i="",n=0;n<a.length;n++){var o=a[n].refValue;i+="<li ydauthenId="+a[n].refId+">"+o+"</li>"}e.html(i),authentication.clickInput("renzheng")})},creatCheckboxLi:function(t,e,a){var i=$("<li><span style='margin:0;'></span><i class='ev-tagClose' tagid=''>X</i></li>");a?(i.find("span").text(e.split("_")[1]),i.find("i").attr("tagid",e.split("_")[0])):i.find("span").text(e),t.append(i),authentication.creatActive()},hideSetDown:function(){$(".baseDown").hide(),$(".hospitalDown").hide()},medicalTitleBtn:function(){$(".ev-medicalBox").hide(),""==$(".technical").text()?(authentication.iputObj.eq(4).show(),authentication.iputObj.eq(4).find("input").val(""),authentication.iputObj.eq(3).hide(),$(".authentication1 .loginBtn").removeClass("activation")):authentication.loginBtnActive()},tagSelectorBoxCloseBtn:function(){$(".al-header-pcModule").hide(),0==$(".checkboxXl li").length?(authentication.iputObj.eq(2).show(),authentication.iputObj.eq(2).find("input").val(""),authentication.iputObj.eq(1).hide(),$(".authentication1 .loginBtn").removeClass("activation")):authentication.loginBtnActive()},clickInput:function(t){switch(t){case"base":$(".baseDown li").each(function(){$(this).unbind("click").bind("click",function(){var t=$(this).html();if(t.length>0){$(".baseDown").hide();$(".input-base").attr("tagId",$(this).attr("tagid"));$(this).parent().prev().val(t)}})});break;case"hospital":$(".hospitalDown li").each(function(){$(this).unbind("click").bind("click",function(){commLog.creatEvent({id:25,url:window.location.href,keyword:"医院选择"});var t=$(this).html();if(t.length>0){$(".hospitalDown").hide();$(".input-hospital").attr("tagId",$(this).attr("tagid"));$(this).parent().prev().val(t)}})});break;case"renzheng":$(".authenticationList li").each(function(){$(this).unbind("click").bind("click",function(){var t=$(this).html(),e=$(this).attr("ydauthenid");if(t.length>0){$(".authentication-Style2 .selectBorder").hide();var a=$(".authentication-Style2 .errortipHeader1").length;switch($(".pitchOn").html(t),authentication.isImg&&0==a&&$(".authentication-Style2 .loginBtn").addClass("activation"),$(".pitchOn").attr("pitchOnId",e),$(".pitchOn").css("visibility","visible"),"工作证"==$(".pitchOn").text()||"学生证"==$(".pitchOn").text()?($(".authenticationNum1").hide(),$(".authenticationNum1 input").val(""),$(".authentication-Style2  .errortipHeader1").remove()):$(".authenticationNum1").show(),
$(".pitchOn").text()){case"工作证":$(".rightNormalImg img").attr("src","/image/authority/authentication/sample_employee.png");break;case"学生证":$(".rightNormalImg img").attr("src","/image/authority/authentication/sample_student.png");break;case"医师执业证":$(".rightNormalImg img").attr("src","/image/authority/authentication/sample_Doctor.png");break;case"医师资格证":$(".rightNormalImg img").attr("src","/image/authority/authentication/sample_Doctor.png");break;case"医学学位证":$(".rightNormalImg img").attr("src","/image/authority/authentication/sample_degree.png");break;case"医学学历证":$(".rightNormalImg img").attr("src","/image/authority/authentication/sample_degree.png")}}})})}},inputChange:function(){var t=$(".input-hospital"),e=$(".hospitalDown"),a=$(".baseDown"),i=$(".input-base");t.unbind("keyup").bind("keyup",function(){authentication.loginBtnActive();var t=$(this).val();t=encodeURI(t);var a={hospitalName:t,isValid:"1",firstResult:"0",maxResult:"10"};if(a={paramJson:$.toJSON(a)},e.show(),t.length>0){var i="//www.yi-ding.net.cn/call/comm/data/baseinfo/getHospitalList/";authentication.ajaxRequest(i,a,"GET",function(t){if(t.responseObject.responseStatus){var a=t.responseObject.responseData.data_list;if(""==t.responseObject.responseMessage){for(var i="",n=0;n<a.length;n++){var o=a[n].hospitalName;i+="<li tagId='"+a[n].id+"'>"+o+"</li>"}e.html(i),authentication.clickInput("hospital"),e.show()}else e.hide()}})}else e.hide()}),i.unbind("keyup").bind("keyup",function(){authentication.loginBtnActive();var t=$(this).val();t=encodeURI(t);var e={baseName:t,isValid:"1",firstResult:"0",maxResult:"10"};if(e={paramJson:$.toJSON(e)},a.show(),t.length>0){var i="//www.yi-ding.net.cn/call/comm/data/baseinfo/getBaseList/";authentication.ajaxRequest(i,e,"GET",function(t){if(t.responseObject.responseStatus){var e=t.responseObject.responseData.data_list;if(""==t.responseObject.responseMessage){for(var i="",n=0;n<e.length;n++){var o=e[n].baseName;i+="<li tagId='"+e[n].id+"'>"+o+"</li>"}a.html(i),authentication.clickInput("base"),a.show()}else a.hide()}})}else a.hide()})},nextSubmit:function(t,e){t.responseStatus?1==t.responseData.registType&&1==t.responseData.state?(authentication.exit(),loginAbout.changeHead(),authentication.callBack.success&&authentication.callBack.success()):($(".authentication1 .loginBtn").addClass("activation"),$(".authentication").eq(0).hide(),$(".authentication").eq(1).show(),commLog.createBrowse(15,"医师认证-认证类型页（认证第二步)",window.location.href)):($(".authentication3").show(),$(".authentication1").hide())},saveSucess:function(t,e){if(t.responseStatus){if(localStorage.getItem("approveInfo")){var a=authentication.keyState().state;authentication.saveReqState(a)}authentication.exit(),loginAbout.changeHead(),authentication.callBack.success&&authentication.callBack.success()}},saveReqState:function(t){switch(t){case"-1":break;case"0":break;case"1":break;case"2":break;case"3":comm.alertBox({mTitle:"",title:"我们已经收到您的认证资料，审核周期为3-5个工作日，请耐心等待!<br>谢谢您的配合",ensure:"好的",ensureCallback:function(){}});break;case"4":}},exit:function(t){$(".yd-maskBackground").remove();var e={customerId:localStorage.getItem("userId"),isValid:"1"};e={paramJson:$.toJSON(e)},$.ajax({url:"//www.yi-ding.net.cn/call/yiding/customer/auth/getMapById/",type:"GET",dataType:"json",async:!1,data:e,success:function(t){t.responseObject.responseStatus?(localStorage.setItem("approveInfo",JSON.stringify(t.responseObject.responseData.data_list[0].customerAuth)),userApproveInfo=JSON.parse(localStorage.getItem("approveInfo"))):(localStorage.setItem("approveInfo",JSON.stringify({state:"-1"})),userApproveInfo=JSON.parse(localStorage.getItem("approveInfo")))},error:function(t,e,a){}}),t&&t()}},authentication.init({type:""}),authentication.keyState()});
var loginFn={isValid:{phone:!0,pass:!0,code:!0,quiPhone:!0,quiCode:!0,fidPhone:!0,fidCode:!0,bidWeiPhone:!0,bidWeiCode:!0,rightPhone:!1,rightEmail:!1,restPass:!0,restPass2:!0,weiBtnReg:!1,caosPhone:!0,caosPas:!0,caosNum:!0,caosCode:!0,fidcodeKey:0,fidCustomerId:0,quicodeKey:0,quiCustomerId:0,quiValidCode:0,quiCrePass:0,bidValidCode:0,bidcodeKey:0,bidWeiPass:0,userId:0,logCliNum:0,fidPhoneNum:0,fidSendCodeNum:0,quiPhoneNum:0,quiSendCodeNum:0,regcodeKey:0,bidWeiNum:0,sendBinWei:0,weiUrl:1,weixinCusId:""},path:{isExist:"//www.yi-ding.net.cn/call/yiding/web/user/isExist/",login:"//www.yi-ding.net.cn/call/passport/securitycheck",sendCode:"//www.yi-ding.net.cn/call/yiding/customer/send/code/create/",checkCode:"//www.yi-ding.net.cn/call/yiding/customer/send/code/update/",updataPass:"//www.yi-ding.net.cn/call/yiding/web/user/update_passwd/",mobLogin:"//www.yi-ding.net.cn/call/yiding/web/user/userLogin/",weixinBind:"//www.yi-ding.net.cn/call/yiding/interact/loginBind/",userId:"//www.yi-ding.net.cn/call/yiding/web/user/getWebUser/",islogin:"//www.yi-ding.net.cn/call/yiding/web/user/checkSession/",allinLogin:"//www.yi-ding.net.cn/call/yiding/web/user/bindAllin/",register:"//www.yi-ding.net.cn/call/yiding/web/user/userRegist/"},init:function(e){var i=this;i.objFn=e,i.checkLoginNum(),i.clearNum($(".ev-phoneNum")),i.clearPass($(".ev-passWord")),i.eyeOpen(),i.finPas(),i.quiLog(),i.allinBingLogin(),i.returnText(),i.hisPhone(),i.checkLogin(),i.weixin(),i.checkBidLogin(),i.close()},checkLoginNum:function(){var e=localStorage.getItem("loginNum")?localStorage.getItem("loginNum"):0,i=parseInt(e),n=$(".ev-permit");i>2?n.hide():n.show()},ajaxFn:function(e){$.ajax({type:e.type,url:e.url,data:{paramJson:$.toJSON(e.param)},async:e.async,dataType:"json",jsonp:"callback",success:function(i){comm.loading.hide(),i&&e.fn(i)},error:function(e){},beforeSend:function(){comm.loading.show()}})},toast:function(e,i,n){setTimeout(function(){$(".errorTip").fadeIn(),$(".errorTip span").text(e),setTimeout(function(){$(".errorTip").fadeOut(),setTimeout(function(){$(".errorTip").removeClass("errorTipLong")},1e3)},n)},i)},clearNum:function(e){e.on("focus",function(){var i=$(this).val();$(".password").css("display","none"),i?($(".phone").css("display","inline-block"),$(".phone .close").on("click",function(){var i=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(i)},1e3)},100);e.attr("value",""),$(".phone").css("display","none"),$(".ev-loginBtn").removeClass("activation"),$(".ev-quiLoginBtn").removeClass("activation"),$(".ev-fidNext").removeClass("activation"),$(".ev-passSave").removeClass("activation"),$(".ev-bindWeixinLogin").removeClass("activation")})):$(this).on("keyup",function(){$(this).val()?($(".phone").css("display","inline-block"),$(".phone .close").on("click",function(){e.attr("value",""),$(".phone").css("display","none"),$(".ev-loginBtn").removeClass("activation"),$(".ev-quiLoginBtn").removeClass("activation"),$(".ev-fidNext").removeClass("activation"),$(".ev-passSave").removeClass("activation"),$(".ev-bindWeixinLogin").removeClass("activation")})):$(".phone").css("display","none")})}),e.on("blur",function(){function i(){var i=!1;$(".phone .close").on("click",function(){return i=!0}),setTimeout(function(){i?(e.attr("value",""),$(".phone").css("display","none"),setTimeout(function(){$(".errorTip").css("display","none")},400),$(".ev-loginBtn").removeClass("activation"),$(".ev-quiLoginBtn").removeClass("activation"),$(".ev-fidNext").removeClass("activation"),$(".ev-passSave").removeClass("activation"),$(".ev-bindWeixinLogin").removeClass("activation")):$(".phone").css("display","none")},200)}i(),function(){$(".isJump").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},100)}),$(".phone .close").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},100)}),$(".password .close").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},100)})}()})},clearPass:function(e){e.on("focus",function(){var i=$(this).val();$(".password").css("display","inline-block"),i?($(".password").css("display","inline-block"),$(".password .close").on("click",function(){setTimeout(function(){$(".errorTip").css("diaplay","none")},500),e.attr("value",""),$(".password").css("display","none"),$(".ev-loginBtn").removeClass("activation"),$(".ev-quiLoginBtn").removeClass("activation"),$(".ev-fidNext").removeClass("activation"),$(".ev-passSave").removeClass("activation"),$(".ev-bindWeixinLogin").removeClass("activation")})):($(".password .close").css("height","0"),$(this).on("keyup",function(){$(this).val()?($(".password").css("display","inline-block"),$(".close").css("height",""),$(".password .close").on("click",function(){e.attr("value",""),$(".password").css("display","none"),$(".ev-loginBtn").removeClass("activation"),$(".ev-quiLoginBtn").removeClass("activation"),$(".ev-fidNext").removeClass("activation"),$(".ev-passSave").removeClass("activation"),$(".ev-bindWeixinLogin").removeClass("activation")})):$(".password .close").css("height","0")}))}),e.on("blur",function(){function i(){var i=!1,n=!1;$(".password .close").on("click",function(){return i=!0}),$(".password .eyeClose").on("click",function(){n=!0}),$(".password .eyeOpen").on("click",function(){n=!0}),setTimeout(function(){i?(setTimeout(function(){$(".errorTip").css("diaplay","none")},500),e.attr("value",""),$(".password").css("display","none"),$(".ev-loginBtn").removeClass("activation"),$(".ev-quiLoginBtn").removeClass("activation"),$(".ev-fidNext").removeClass("activation"),$(".ev-passSave").removeClass("activation")):n?$(".password").css("display","inline-block"):$(".password").css("display","none")},200),$(".password .close").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)}),$(".password .eyeClose").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)}),$(".password .eyeOpen").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)})}i()})},eyeOpen:function(){$(".eyeOpen").on("click",function(){$(".password").css("display","inline-block"),$(this).css("display","none"),$(".eyeClose").css("display","inline-block"),$(".ev-passWord").prop("type","text"),$(".ev-caosPas").prop("type","text")}),$(".eyeClose").on("click",function(){$(".password").css("display","inline-block"),$(this).css("display","none"),$(".eyeOpen").css("display","inline-block"),$(".ev-passWord").prop("type","password"),$(".ev-caosPas").prop("type","password")})},hisPhone:function(){var e=this;if(localStorage.getItem("phoneNum"))for(var i=localStorage.getItem("phoneNum").split(","),n=i.length,o=0;o<n;o++){$(".history").css("display","block");var s="<li>"+i[o]+"</li>";$(".history").append(s),e.historyNum(),e.hisCli()}},hisCli:function(){var e=this;$(".history").on("click","li",function(){var i=$(this).text();$(".ev-phoneNum").val(i),$(".history").css("display","none"),e.hisPhone()})},historyNum:function(){$(".ev-phoneNum").on("keyup",function(){if($(this).val()&&localStorage.getItem("phoneNum"))for(var e=localStorage.getItem("phoneNum").split(","),i=0;i<e.length;i++)$(this).val()==e[i].substring(0,$(this).val().length)?($(".history").show(),$(".history li").eq(i).css("display","block")):($(".history").hide(),$(".history li").eq(i).css("display","none"))})},returnText:function(){"block"==$(".ev-login").css("display")&&$(".authorityBg").css("display","none");var e=this;$(".ev-findReturn").on("click",function(){$(".ev-login").css("display","block"),$(".ev-findPassword").css("display","none"),commLog.createBrowse(4,"登录注册-登录页"),$(".authorityBg").css("display","none")}),$(".ev-newReturn").on("click",function(){$(".ev-findPassword").css("display","block"),$(".ev-newPass").css("display","none"),commLog.createBrowse(5,"登录注册-找回密码页")}),$(".ev-quickReturn").on("click",function(){$(".ev-login").css("display","block"),$(".ev-quickLogin").css("display","none"),commLog.createBrowse(4,"登录注册-登录页"),$(".authorityBg").css("display","none")}),$(".ev-bindReturn").on("click",function(){$(".ev-createBind").css("display","block"),$(".ev-bindAllin").css("display","none"),commLog.createBrowse(10,"登录注册-唯医账号登录页")}),$(".ev-bindWeixinReturn").on("click",function(){window.location.href=localStorage.getItem("weiUrl"),loginAbout.login.exit(),comm.maskBackground.show("rgba(0,0,0,.6)");var i='<iframe src="'+e.path.weixinLogin+'" class="weixinLogin"\'>';$(".yd-maskBackground").html(i)})},sendCode:function(e,i,n){var o=this,s=60;e.off("click").on("click",function(){$(".validate").unbind("click");var t=window.location.href;"//www.yi-ding.net.cn/pages/authority/weixinBindLogin.html"==t.substring(t.indexOf("/"),t.length)&&commLog.creatEvent({id:160,url:window.location.href,keyword:"微信授权登录，微信绑定医鼎账号的发送验证码"});var a=i.val(),c=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,l=c.test(i.val());o.isValid.fidSendCodeNum=a,o.isValid.quiSendCodeNum=a,o.isValid.sendBinWei=a,o.isValid.bidCaosSend=a,l?o.ajaxFn({url:o.path.sendCode,async:!1,param:{account:a,typeId:n,codeLength:4,createPasswd:1},type:"post",fn:function(t){var a=t.responseObject.responseData.codeNum;if(a||0==a){o.isValid.fidcodeKey=t.responseObject.responsePk,o.isValid.quicodeKey=t.responseObject.responsePk,o.isValid.bidcodeKey=t.responseObject.responsePk,o.isValid.regcodeKey=t.responseObject.responsePk,o.isValid.caosCodeKey=t.responseObject.responsePk,o.isValid.quiValidCode=t.responseObject.responseData.validCode,o.isValid.bidValidCode=t.responseObject.responseData.validCode,o.isValid.quiCrePass=t.responseObject.responseData.createPasswd,o.isValid.bidWeiPass=t.responseObject.responseData.createPasswd,o.isValid.bidCaosCodeKey=t.responseObject.responsePk;var c=setInterval(function(){s--,$(".validate").text(s+"s后重新获取"),$(".validate").css("color","#ccc"),$(".validate").unbind("click"),0==s&&(clearTimeout(c),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),o.sendCode(e,i,n)),$(".reg-experiencePo").off("click").on("click",function(){clearTimeout(c),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),loginAbout.register.exit(),o.sendCode(e,i,n)}),$(".log-experiencePo").off("click").on("click",function(){clearTimeout(c),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),loginAbout.login.exit(),o.sendCode(e,i,n)}),$(".ev-quickReturn").on("click",function(){clearTimeout(c),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),o.sendCode(e,i,n),$(".ev-login").css("display","block"),$(".ev-quickLogin").css("display","none"),commLog.createBrowse(4,"登录注册-登录页")}),$(".ev-findReturn").on("click",function(){clearTimeout(c),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),$(".ev-login").css("display","block"),$(".ev-findPassword").css("display","none"),commLog.createBrowse(4,"登录注册-登录页"),o.sendCode(e,i,n)}),$(".ev-bindReturn").on("click",function(){clearTimeout(c),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),o.sendCode(e,i,n),$(".ev-createBind").css("display","block"),$(".ev-bindAllin").css("display","none"),commLog.createBrowse(10,"登录注册-唯医账号登录页")})},1e3)}else o.toast("每日最多获取3次验证码,请明天再试",300,2e3)}}):o.toast("请填写正确的手机号",300,1500)})},finPas:function(){var e=this;$(".findPassword").off("click").on("click",function(){commLog.creatEvent({id:4,url:window.location.href,keyword:"找回密码"}),$(".ev-login").css("display","none"),$(".ev-findPassword").css("display","block"),commLog.createBrowse(5,"登录注册-找回密码页"),$(".authorityBg").css("display","block")}),e.clearNum($(".ev-findNum")),e.fidCheck()},fidCheckPhone:function(){var e=this;e.isValid.fidPhone=!0;var i=$(".ev-findNum"),n=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,o=n.test(i.val());0==o?e.isValid.fidPhone=!1:e.ajaxFn({url:e.path.isExist,type:"get",async:!1,param:{account:i.val()},fn:function(n){var o=n.responseObject.responseStatus;o?e.isValid.fidPhone=!1:(e.isValid.fidCustomerId=n.responseObject.responseData.customerUnite.customerId,e.isValid.fidPhoneNum=i.val())}})},fidCheckPhone2:function(){var e=this;e.isValid.fidPhone=!0;var i=$(".ev-findNum"),n=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,o=n.test(i.val());0==o?(e.toast("请填写正确手机号",300,1500),e.isValid.fidPhone=!1):e.ajaxFn({url:e.path.isExist,type:"get",async:!1,param:{account:i.val()},fn:function(n){var o=n.responseObject.responseStatus;o?(e.toast("该账号未注册",300,1500),e.isValid.fidPhone=!1):(e.isValid.fidCustomerId=n.responseObject.responseData.customerUnite.customerId,e.sendCode($(".ev-finValidate"),$(".ev-findNum"),1),e.isValid.fidPhoneNum=i.val())}})},fidCheckCode:function(){var e=this;e.isValid.fidCode=!0,null==$(".ev-fidCode").val()&&(e.isValid.fidCode=!1)},fidCheckCode2:function(){var e=this;e.isValid.fidCode=!0,null==$(".ev-fidCode").val()&&(e.toast("验证码不能为空",300,1500),e.isValid.fidCode=!1)},fidActive:function(){var e=this,i=$(".ev-findNum").val(),n=$(".ev-fidCode").val();i&&n&&e.isValid.fidPhone&&e.isValid.fidCode?($(".ev-fidNext").addClass("activation"),e.fidNextBtn()):($(".ev-fidNext").removeClass("activation"),$(".ev-fidNext").unbind("click"))},fidCheck:function(){var e=this;$(".ev-findNum").on("blur",function(){e.fidCheckPhone2(),e.fidActive()}),$(".ev-fidCode").on("blur",function(){e.fidCheckCode2(),e.fidActive()}),$(".ev-findNum").on("keyup",function(){e.fidCheckPhone(),e.fidActive()}),$(".ev-fidCode").on("keyup",function(){e.fidCheckCode(),e.fidActive()})},fidNextBtn:function(){var e=this;$(".ev-fidNext").off("click").on("click",function(){if(commLog.createBrowse(5,"登录注册-找回密码页"),$(this).is(".activation"))if(commLog.creatEvent({id:152,url:window.location.href,keyword:"找回密码下一步"}),e.isValid.fidPhoneNum!=e.isValid.fidSendCodeNum)e.toast("验证码输入错误",300,1500);else{var i=$(".ev-fidCode").val();e.ajaxFn({url:e.path.checkCode,type:"post",async:!1,param:{validCode:i,id:e.isValid.fidcodeKey},fn:function(i){var n=i.responseObject.responseStatus,o=i.responseObject.responseCode;0==n?"1A0002"==o?e.toast("验证码错误,请重新获取",300,1500):"1A0001"==o&&e.toast("验证码已经失效,请重新获取",300,1500):($(".ev-newPass").css("display","block"),$(".ev-findPassword").css("display","none"),e.checkPas(),e.ajaxFn({url:e.path.checkCode,type:"post",async:!1,param:{validCode:o,id:e.isValid.fidcodeKey,isValid:0},fn:function(e){}}))}})}}),e.clearNum($(".ev-newPas")),e.clearPass($(".ev-conPas"))},checkPas1:function(){var e=this;e.isValid.restPass=!0;var i=/^[0-9a-zA-Z]*$/g,n=$(".ev-newPas").val(),o=n.length,s=i.test(n);s?o<6?e.isValid.restPass=!1:o>20&&(e.isValid.restPass=!1):e.isValid.restPass=!1},checkPas12:function(){var e=this,i=/^[0-9a-zA-Z]*$/g,n=$(".ev-newPas").val(),o=n.length,s=i.test(n);s?o<6?e.toast("密码长度少于6位",300,1500):o>20&&e.toast("密码长度超过20位",300,1500):e.toast("密码格式不正确",300,1500)},checkPas2:function(){var e=this;e.isValid.restPass2=!0;var i=/^[0-9a-zA-Z]*$/g,n=($(".ev-newPas").val(),$(".ev-conPas").val()),o=i.test(n),s=n.length;o?s<6?e.isValid.restPass2=!1:s>20&&(e.isValid.restPass2=!1):e.isValid.restPass2=!1},checkPas22:function(){var e=this,i=/^[0-9a-zA-Z]*$/g,n=($(".ev-newPas").val(),$(".ev-conPas").val()),o=i.test(n),s=n.length;o?s<6?e.toast("密码长度不足6位",300,1500):s>20&&e.toast("密码长度超过20位",300,1500):e.toast("密码格式不正确",300,1500)},checkPasActive:function(){var e=this,i=$(".ev-newPas").val(),n=$(".ev-conPas").val();i&&n&&e.isValid.restPass&&e.isValid.restPass2?($(".ev-passSave").addClass("activation"),e.savePass()):($(".ev-passSave").removeClass("activation"),$(".ev-passSave").unbind("click"))},checkPas:function(){var e=this;$(".ev-newPas").on("blur",function(){e.checkPas12(),e.checkPasActive()}),$(".ev-conPas").on("blur",function(){e.checkPas22(),e.checkPasActive()}),$(".ev-newPas").on("keyup",function(){e.checkPas1(),e.checkPasActive()}),$(".ev-conPas").on("keyup",function(){e.checkPas2(),e.checkPasActive()})},increment:function(){if(localStorage.getItem("loginNum")){var e=parseInt(localStorage.getItem("loginNum"));e++,localStorage.setItem("loginNum",e)}else localStorage.setItem("loginNum","1")},savePass:function(){var e=this;$(".ev-passSave").off("click").on("click",function(){if($(".ev-passSave").is(".activation")){commLog.creatEvent({id:153,url:window.location.href,keyword:"找回密码的提交"});var i=$(".ev-newPas").val(),n=$(".ev-conPas").val();if(i!=n)e.toast("两次输入密码不一致",300,1500);else{var o=$(".ev-newPas").val();e.ajaxFn({url:e.path.updataPass,type:"post",param:{customerId:e.isValid.fidCustomerId,passwd:o},fn:function(i){var n=i.responseObject.responseStatus;n&&($(".reset").css("display","block"),setTimeout(function(){$(".reset").css("display","none")},600),localStorage.setItem("userId",e.isValid.fidCustomerId),localStorage.setItem("userState","true"),loginAbout.login.exit(),loginAbout.changeHead(),e.increment(),e.objFn.success&&e.objFn.success())}})}}})},quiLog:function(){var e=this;$(".phoneLogin").off("click").on("click",function(){commLog.creatEvent({id:3,url:window.location.href,keyword:"手机快捷登录"}),$(".ev-login").css("display","none"),$(".ev-quickLogin").css("display","block"),e.quickCheck(),commLog.createBrowse(8,"登录注册-手机快捷登录页"),$(".authorityBg").css("display","block"),$(".registerAllinmd").unbind("click").bind("click",function(){commLog.creatEvent({id:7,url:"",keyword:"立即注册",browseType:"09"}),setTimeout(function(){$(".errorTip").css("display","none")},300),setTimeout(function(){$(".errorTip").css("display","none")},500),loginAbout.login.exit(),loginAbout.register.show()})}),e.clearNum($(".ev-quiNum"))},quiCheckPhone:function(){var e=this;e.isValid.quiPhone=!0;var i=$(".ev-quiNum");e.isValid.quiPhoneNum=i.val();var n=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,o=n.test(i.val());0==o&&(e.isValid.quiPhone=!1,$(".registerAllinmd").addClass("none"))},quiCheckPhone2:function(){var e=this;e.isValid.quiPhone=!0;var i=$(".ev-quiNum"),n=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,o=n.test(i.val());0==o?(e.toast("请填写正确手机号",300,1500),e.isValid.quiPhone=!1):e.ajaxFn({url:e.path.isExist,async:!1,param:{account:i.val()},type:"get",fn:function(i){var n=i.responseObject.responseStatus;0==n?(e.sendCode($(".ev-quickCode"),$(".ev-quiNum"),3),$(".ev-quiCode").attr("disabled",!1).parent().removeClass("login-qui-disabled")):(e.sendCode($(".ev-quickCode"),$(".ev-quiNum"),2),$(".registerAllinmd").removeClass("none"),$(".ev-quiCode").attr("disabled",!0).parent().addClass("login-qui-disabled"))}})},quiCheckCode:function(){var e=this;e.isValid.quiCode=!0,null==$(".ev-quiCode").val()&&(e.isValid.quiCode=!1)},quiCheckCode2:function(){var e=this;e.isValid.quiCode=!0,null==$(".ev-quiCode").val()&&(e.toast("验证码不能为空",300,1500),e.isValid.quiCode=!1)},quiActive:function(){var e=this,i=$(".ev-quiNum").val(),n=$(".ev-quiCode").val();i&&n&&e.isValid.quiPhone&&e.isValid.quiCode?($(".ev-quiLoginBtn").addClass("activation"),e.quiBtn()):($(".ev-quiLoginBtn").removeClass("activation"),$(".ev-quiLoginBtn").unbind("click"))},quickCheck:function(){var e=this;$(".ev-quiNum").on("blur",function(){e.quiCheckPhone2(),e.quiActive()}),$(".ev-quiCode").on("blur",function(){e.quiCheckCode2(),e.quiActive()}),$(".ev-quiNum").on("keyup",function(){e.quiCheckPhone(),e.quiActive()}),$(".ev-quiCode").on("keyup",function(){e.quiCheckCode(),e.quiActive()})},quiBtn:function(){var e=this;$(".ev-quiLoginBtn").off("click").on("click",function(){$(this).is(".activation")&&(e.isValid.quiPhoneNum!=e.isValid.quiSendCodeNum?e.toast("验证码输入错误",300,1500):e.ajaxFn({url:e.path.checkCode,type:"post",async:!1,param:{validCode:$(".ev-quiCode").val(),id:e.isValid.quicodeKey},fn:function(i){var n=i.responseObject.responseStatus,o=i.responseObject.responseCode;if(0==n)"1A0002"==o?e.toast("验证码错误,请重新获取",300,1500):"1A0001"==o&&e.toast("验证码已经失效,请重新获取",300,1500);else{var s=$(".ev-quiNum").val();e.ajaxFn({url:e.path.isExist,type:"get",async:!1,param:{account:s},fn:function(i){var n=i.responseObject.responseStatus;e.isValid.quiCustomerId=i.responseObject.responseData.customerUnite.customerId,e.isValid.userId=i.responseObject.responseData.customerUnite.customerId;var o=i.responseObject.responseCode;if(n)"0B0010"==o&&comm.confirmBox({content:"该手机尚未注册<br/>是否直接创建新账号？",cancel:"取消",ensure:"创建账号",ensureCallback:function(){e.createNumBtn()},cancelCallback:function(){}});else{var s=$(".ev-quiNum").val(),o=e.isValid.quiValidCode,t=e.isValid.quicodeKey;e.ajaxFn({url:e.path.mobLogin,type:"post",async:!1,param:{loginType:"quickLogin",account:s,smsId:t,validCode:o},fn:function(i){if(i){var n=i.responseObject.responseStatus;if(n){if(commLog.creatEvent({id:147,url:window.location.href,keyword:"手机号快捷登录提交"}),localStorage.getItem("phoneNum"))for(var o=localStorage.getItem("phoneNum").split(","),t=0;t<o.length;t++)s!=o[t]&&localStorage.setItem("phoneNum",s+","+o);else localStorage.setItem("phoneNum",s);localStorage.setItem("userId",e.isValid.userId),loginAbout.login.exit(),loginAbout.changeHead(),localStorage.setItem("userState","true"),e.increment(),e.objFn.success&&e.objFn.success()}else e.objFn.error&&e.objFn.error()}}})}}})}}}))})},createNumBtn:function(){var e=this,i=$(".ev-quiCode").val();e.ajaxFn({url:e.path.checkCode,type:"post",async:!1,param:{validCode:i,id:e.isValid.quicodeKey},fn:function(i){var n=i.responseObject.responseStatus,o=i.responseObject.responseCode;if(0==n)"1A0002"==o?e.toast("验证码错误,请重新获取",300,1500):"1A0001"==o&&e.toast("验证码已经失效,请重新获取",300,1500);else{var s=$(".ev-quiNum").val();e.ajaxFn({url:e.path.register,type:"get",param:{account:s,passwd:e.isValid.quiCrePass},fn:function(i){var n=i.responseObject.responseStatus,o=i.responseObject.responseCode;if(e.isValid.userId=i.responseObject.responsePk,n)switch(o){case"0B0004":if(localStorage.setItem("userId",e.isValid.userId),localStorage.getItem("phoneNum"))for(var t=localStorage.getItem("phoneNum").split(","),a=0;a<t.length;a++)s!=t[a]&&localStorage.setItem("phoneNum",s+","+t);else localStorage.setItem("phoneNum",s);loginAbout.login.exit(),localStorage.setItem("userState","true"),loginAbout.changeHead(),e.increment(),e.objFn.success&&e.objFn.success()}else switch(o){case"9X0003":break;case"0B0001":}}})}}})},checkLoginPhone:function(){var e=this;e.isValid.phone=!0;var i=$(".ev-phoneNum"),n=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,o=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,s=o.test(i.val())||n.test(i.val());o.test(i.val()),n.test(i.val());e.isValid.rightPhone=o.test(i.val()),e.isValid.rightEmail=n.test(i.val()),0==s?e.isValid.phone=!1:e.ajaxFn({url:e.path.isExist,type:"get",async:!1,param:{account:i.val()},fn:function(i){var n=i.responseObject.responseStatus;n?e.isValid.phone=!1:e.isValid.userId=i.responseObject.responseData.customerUnite.customerId}})},checkLoginPhone2:function(){var e=this;e.isValid.phone=!0;var i=$(".ev-phoneNum"),n=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,o=n.test(i.val());0==o?(e.toast("请填写正确手机号",300,1500),e.isValid.phone=!1):e.ajaxFn({url:e.path.isExist,type:"get",async:!1,param:{account:i.val()},fn:function(i){var n=i.responseObject.responseStatus;n?(e.toast("该账号未注册",300,1500),e.isValid.phone=!1):e.isValid.userId=i.responseObject.responseData.customerUnite.customerId}})},checkLoginPass:function(){var e=this;e.isValid.pass=!0;var i=$(".ev-passWord"),n=/^[0-9a-zA-Z]*$/g,o=i.val().length,s=n.test(i.val());if(s){var o=i.val().length;o<6?e.isValid.pass=!1:o>20&&(e.isValid.pass=!1)}else e.isValid.pass=!1},checkLoginPass2:function(){var e=this;e.isValid.pass=!0;var i=$(".ev-passWord"),n=/^[0-9a-zA-Z]*$/g,o=i.val().length,s=n.test(i.val());if(s){var o=i.val().length;o<6?(e.toast("密码长度不足6位",300,1500),e.isValid.pass=!1):o>20&&(e.toast("密码长度超过20位",300,1500),e.isValid.pass=!1)}else e.toast("密码格式不正确",300,1500),e.isValid.pass=!1},activeLogin:function(){var e=this,i=$(".ev-phoneNum").val(),n=$(".ev-passWord").val();i&&n&&e.isValid.phone&&e.isValid.pass?($(".ev-loginBtn").addClass("activation"),e.loginBtn()):($(".ev-loginBtn").removeClass("activation"),$(".ev-loginBtn").unbind("click"))},checkLogin:function(){var e=this;$(".ev-phoneNum").on("blur",function(){setTimeout(function(){e.checkLoginPhone2(),$(".history li").css("display","none"),e.activeLogin(),e.historyNum()},200)}),$(".ev-passWord").on("blur",function(){e.checkLoginPass2(),e.activeLogin()}),$(".ev-phoneNum").on("keyup",function(){e.checkLoginPhone(),e.activeLogin()}),$(".ev-passWord").on("keyup",function(){e.checkLoginPass(),e.activeLogin()})},loginBtn:function(){var e=this;$(".ev-loginBtn").off("click").on("click",function(){if(commLog.creatEvent({id:2,url:window.location.href,keyword:"登录提交"}),$(this).is(".activation")){var i=$(".ev-phoneNum").val(),n=$(".ev-passWord").val();$.ajax({type:"post",url:e.path.login,data:{j_username:"website;"+i+";"+n+";mobile",j_password:n,rememberMe:!0},async:!1,dataType:"json",jsonp:"callback",beforeSend:function(){comm.loading.show()},success:function(n){if(comm.loading.hide(),n){var o=n.responseObject.responseStatus,s=n.responseObject.responseData.customerAuthState;if(o){var t=$(".ev-phoneNum").val(),a=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,c=a.test(t);if(localStorage.getItem("phoneNum"))for(var l=localStorage.getItem("phoneNum").split(","),r=0;r<l.length;r++)t!=l[r]&&c&&localStorage.setItem("phoneNum",i+","+l);else localStorage.setItem("phoneNum",i);localStorage.setItem("userAuth",s),localStorage.setItem("userId",e.isValid.userId),loginAbout.login.exit(),loginAbout.changeHead(),localStorage.setItem("userState","true"),e.increment(),e.objFn.success&&e.objFn.success()}else e.objFn.error&&e.objFn.error(),e.isValid.logCliNum++,e.isValid.logCliNum>=3&&setTimeout(function(){$(".prompt").fadeIn(),setTimeout(function(){$(".prompt").fadeOut()},3e3)},300),e.toast("密码错误",300,1500)}},error:function(e){}})}})},weixin:function(){var e=this;$(".weixin").off("click").on("click",function(){commLog.creatEvent({id:5,url:window.location.href,keyword:"微信登录"}),e.isValid.weiUrl=window.location.href,localStorage.setItem("weiUrl",window.location.href),loginAbout.login.exit(),comm.maskBackground.show("rgba(0,0,0,.6)");var i="<section class='weixinCloseContent'><section class='weixinClose'></section></section><iframe src=\"//open.weixin.qq.com/connect/qrconnect?appid=wx3b347620d468cd89&redirect_uri=https%3a%2f%2fwww.yi-ding.net.cn%2fcall%2fyiding%2finteract%2fweixinLogin%2f?url="+e.isValid.weiUrl+'&response_type=code&scope=snsapi_login&state=START#wechat_redirect" class="weixinLogin" ></iframe>';$(".yd-maskBackground").html(i),$(".weixinClose").on("click",function(){$(".yd-maskBackground").remove()})}),e.sendCode($(".ev-bindWeixinValidate"),$(".ev-bindWeixinNum"),2);var i=window.location.href;"//www.yi-ding.net.cn/pages/authority/weixinBindLogin.html?isFreeze=1"==i.substring(i.indexOf("/"),i.length)&&comm.alertBox({title:"账号已被冻结，请更换账号",ensure:"好的",ensureCallback:function(){loginAbout.register.exit(),loginAbout.login.exit(),window.location.href=localStorage.getItem("weiUrl")}}),"//www.yi-ding.net.cn/pages/authority/weixinBindLogin.html"==i.substring(i.indexOf("/"),i.length)&&commLog.createBrowse(11,"微信登录-账号绑定")},bidWeiCheckPhone:function(){var e=this;e.isValid.bidWeiPhone=!0;var i=$(".ev-bindWeixinNum").val(),n=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,o=n.test(i);e.isValid.bidWeiNum=i,0==o?e.isValid.bidWeiPhone=!1:e.ajaxFn({url:e.path.isExist,type:"get",async:!1,param:{account:i},fn:function(i){var n=i.responseObject.responseStatus;n?e.isValid.bidWeiPhone=!1:e.isValid.bidWeiPhone=!0}})},bidWeiCheckPhone2:function(){var e=this;e.isValid.bidWeiPhone=!0;var i=$(".ev-bindWeixinNum"),n=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,o=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,s=n.test(i.val())||o.test(i.val());0==s?(e.toast("请输入正确的手机号或邮箱",300,1500),e.isValid.bidWeiPhone=!1):(e.ajaxFn({url:e.path.weixinBind,type:"post",async:!1,param:{account:$(".ev-bindWeixinNum").val(),isVerify:1},fn:function(i){i.responseObject.responseStatus,i.responseObject.responseCode;i.responseObject.responseStatus&&"0B0008"==i.responseObject.responseCode&&(e.toast("绑定的账号已经失效",300,1500),e.isValid.bidWeiPhone=!1)}}),e.ajaxFn({url:e.path.isExist,type:"get",async:!1,param:{account:i.val()},fn:function(i){var n=i.responseObject.responseStatus;n?(e.toast("账号不存在",300,1500),e.isValid.bidWeiPhone=!1):e.isValid.weixinCusId=i.responseObject.responseData.customerUnite.customerId}}))},bidWeiCheckCode:function(){var e=this;e.isValid.bidWeiCode=!0;var i=$(".ev-bindWeixinCode"),n=/^[0-9a-zA-Z]*$/g,o=i.val().length,s=n.test(i.val());if(s){var o=i.val().length;o<6?e.isValid.bidWeiCode=!1:o>20&&(e.isValid.bidWeiCode=!1)}else e.isValid.bidWeiCode=!1},bidWeiCheckCode2:function(){var e=this;e.isValid.bidWeiCode=!0;var i=$(".ev-bindWeixinCode"),n=/^[0-9a-zA-Z]*$/g,o=i.val().length,s=n.test(i.val());if(s){var o=i.val().length;o<6?(e.toast("密码长度不足6位",300,1500),e.isValid.bidWeiCode=!1):o>20&&(e.toast("密码长度超过20位",300,1500),e.isValid.bidWeiCode=!1)}else e.toast("密码格式不正确",300,1500),e.isValid.bidWeiCode=!1},bidWeiActive:function(){var e=this,i=$(".ev-bindWeixinNum").val(),n=$(".ev-bindWeixinCode").val();i&&n&&e.isValid.bidWeiPhone&&e.isValid.bidWeiCode?($(".ev-bindWeixinLogin").addClass("activation"),e.bidWeiBtn()):($(".ev-bindWeixinLogin").removeClass("activation"),$(".ev-bindWeixinLogin").unbind("click"))},checkBidLogin:function(){var e=this;$(".ev-bindWeixinNum").on("blur",function(){e.bidWeiCheckPhone2(),e.bidWeiActive()}),$(".ev-bindWeixinCode").on("blur",function(){e.bidWeiCheckCode2(),e.bidWeiActive()}),$(".ev-bindWeixinNum").on("keyup",function(){e.bidWeiCheckPhone(),e.bidWeiActive()}),$(".ev-bindWeixinCode").on("keyup",function(){e.bidWeiCheckCode(),e.bidWeiActive()})},bidWeiBtn:function(){var e=this;$(".ev-bindWeixinLogin").off("click").on("click",function(){$(this).is(".activation")&&(commLog.creatEvent({id:155,url:window.location.href,keyword:"微信授权登录，微信绑定医鼎账号的提交"}),e.ajaxFn({url:e.path.weixinBind,type:"post",async:!1,param:{account:$(".ev-bindWeixinNum").val(),isVerify:1},fn:function(i){var n=i.responseObject.responseStatus;i.responseObject.responseCode;if(n){var o=$(".ev-bindWeixinNum").val();e.ajaxFn({url:e.path.weixinBind,type:"post",async:!1,param:{account:o,isVerify:0},fn:function(i){var n=i.responseObject.responseStatus;i.responseObject.responseCode;n&&(localStorage.setItem("userState","true"),localStorage.setItem("userId",e.isValid.fidCustomerId),console.log(e.isValid.fidCustomerId),loginAbout.changeHead(),location.reload(),window.location.href=localStorage.getItem("weiUrl"))}})}}}))})},sendCodeCre:function(){var e=this,i=60,n=$(".ev-bindWeixinNum").val(),o=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/;o.test(n);$(".ev-bindWeixinValidate").off("click").on("click",function(){commLog.creatEvent({id:160,url:window.location.href,keyword:"微信授权登录，微信绑定医鼎账号的发送验证码"}),n?e.ajaxFn({url:e.path.sendCode,async:!1,param:{account:n,typeId:2,codeLength:4,createPasswd:1},type:"post",fn:function(n){var o=n.responseObject.responseData.codeNum;if(e.isValid.bidcodeKey=n.responseObject.responsePk,e.isValid.bidWeiPass=n.responseObject.responseData.createPasswd,o||0==o)var s=setInterval(function(){i--,$(".validate").text(i+"s后重新获取"),$(".validate").css("color","#ccc"),$(".validate").unbind("click"),0==i&&(clearTimeout(s),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e")),$(".reg-experiencePo").off("click").on("click",function(){clearTimeout(s),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),loginAbout.register.exit()}),$(".log-experiencePo").off("click").on("click",function(){clearTimeout(s),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),loginAbout.login.exit()}),$(".ev-bindWeixinReturn").off("click").on("click",function(){clearTimeout(s),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),window.location.href=localStorage.getItem("weiUrl"),loginAbout.login.exit(),comm.maskBackground.show("rgba(0,0,0,.6)");
var i='<iframe src="'+e.path.weixinLogin+'" class="weixinLogin"\'>';$(".yd-maskBackground").html(i)})},1e3);else e.toast("每日最多获取3次验证码,请明天再试",300,2e3)}}):e.toast("请填写正确的手机号",300,1500)})},weiBtnReg:function(){var e=this,i=$(".ev-bindWeixinCode").val();e.ajaxFn({url:e.path.checkCode,type:"post",async:!1,param:{validCode:i,id:e.isValid.regcodeKey},fn:function(i){var n=i.responseObject.responseStatus,o=i.responseObject.responseCode;if(0==n)"1A0002"==o?e.toast("验证码错误,请重新获取",300,1500):"1A0001"==o&&e.toast("验证码已经失效,请重新获取",300,1500);else{var s=$(".ev-bindWeixinNum").val();e.ajaxFn({url:e.path.register,type:"get",param:{account:s,passwd:e.isValid.bidWeiPass,registType:2},fn:function(i){var n=i.responseObject.responseStatus,o=i.responseObject.responseCode;if(n)switch(o){case"0B0004":e.ajaxFn({url:e.path.weixinBind,type:"post",async:!1,param:{account:s,isVerify:0},fn:function(i){var n=i.responseObject.responseStatus;n?(localStorage.setItem("userId",e.isValid.fidCustomerId),localStorage.setItem("userState","true"),loginAbout.changeHead(),window.location.href=localStorage.getItem("weiUrl")):"0B0008"==o&&e.toast("绑定的账号已经失效",300,1500)}})}}})}}})},allinBingLogin:function(){$(".allin").on("click",function(){commLog.creatEvent({id:6,url:window.location.href,keyword:"唯医登录"}),commLog.createBrowse(10,"登录注册-唯医账号登录页"),localStorage.setItem("allinUrl",window.location.href),window.location.href="//www.allinmd.cn/pages/singlePage/user/yiding_authority.html"})},isLogin:function(){var e=this;e.ajaxFn({url:e.path.islogin,type:"post",async:!1,fn:function(e){var i=e.responseObject.responseStatus;i||($("#notLogin").css("display","inline-block"),$("#isLogin").css("display","none"))}})},close:function(){$(".log-experiencePo").on("click",function(){loginAbout.login.exit()})}};
var registerFn={isValid:{customerId:"",phoneIsValid:!0,passIsValid:!0,codeIsValid:!0,server:!0,regcodeKey:0,phoneNum:0,sendCodeNum:0},path:{isExist:"//www.yi-ding.net.cn/call/yiding/web/user/isExist/",register:"//www.yi-ding.net.cn/call/yiding/web/user/userRegist/",sendCode:"//www.yi-ding.net.cn/call/yiding/customer/send/code/create/",checkCode:"//www.yi-ding.net.cn/call/yiding/customer/send/code/update/",profile:"//www.yi-ding.net.cn/call/site/profile/getMapById/"},init:function(e){var n=this;n.objFn=e,n.clearNum($(".ev-regNum")),n.clearPass($(".ev-regPas")),n.eyeOpen(),n.cancle(),n.check(),n.checkSer()},ajaxFn:function(e){$.ajax({type:e.type,url:e.url,data:{paramJson:$.toJSON(e.param)},async:e.async,dataType:"json",success:function(n){comm.loading.hide(),n&&e.fn(n)},error:function(e){},beforeSend:function(){comm.loading.show()}})},toast:function(e,n,s){$(".errorTip").fadeIn(),$(".errorTip span").text(e),setTimeout(function(){$(".errorTip").fadeOut(),$(".errorTip").removeClass("errorTipLong")},s)},clearNum:function(e){e.on("focus",function(){var n=$(this).val();$(".password").css("display","none"),n?($(".phone").css("display","inline-block"),$(".phone .close").on("click",function(){e.attr("value",""),$(".errorTip").css("display","none"),$(".phone").css("display","none")})):$(this).on("keyup",function(){$(this).val()?($(".phone").css("display","inline-block"),$(".phone .close").on("click",function(){e.attr("value",""),$(".phone").css("display","none")})):$(".phone").css("display","none")})}),e.on("blur",function(){function n(){var n=!1;$(".phone .close").on("click",function(){return n=!0}),n&&$(".errorTip").css("display","none"),setTimeout(function(){n?(e.attr("value",""),setTimeout(function(){$(".errorTip").css("display","none")},400),$(".phone").css("display","none")):$(".phone").css("display","none")},200)}n(),function(){$(".isJump").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)}),$(".phone .close").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)}),$(".password .close").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)}),$(".password .eyeClose").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)}),$(".password .eyeOpen").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)})}()})},clearPass:function(e){e.on("focus",function(){var n=$(this).val();$(".password").css("display","inline-block"),n?($(".password").css("display","inline-block"),$(".password .close").on("click",function(){e.attr("value",""),$(".password").css("display","none")})):($(".password .close").css("height","0"),$(this).on("keyup",function(){$(this).val()?($(".password").css("display","inline-block"),$(".close").css("height",""),$(".password .close").on("click",function(){e.attr("value",""),$(".password").css("display","none")})):$(".password .close").css("height","0")}))}),e.on("blur",function(){function n(){var n=!1,s=!1;$(".password .close").on("click",function(){return n=!0}),$(".password .eyeClose").on("click",function(){s=!0}),$(".password .eyeOpen").on("click",function(){s=!0}),setTimeout(function(){n?(setTimeout(function(){$(".errorTip").css("display","none")},400),e.attr("value",""),$(".password").css("display","none")):s?$(".password").css("display","inline-block"):$(".password").css("display","none")},200),$(".password .close").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)}),$(".password .eyeClose").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)}),$(".password .eyeOpen").on("click",function(){var e=setInterval(function(){$(".errorTip").hide(),setTimeout(function(){clearInterval(e)},1e3)},10)})}n()})},eyeOpen:function(){$(".eyeOpen").on("click",function(){$(this).css("display","none"),$(".eyeClose").css("display","inline-block"),$(".ev-regPas").prop("type","text")}),$(".eyeClose").on("click",function(){$(this).css("display","none"),$(".eyeOpen").css("display","inline-block"),$(".ev-regPas").prop("type","password")})},cancle:function(){$(".reg-experiencePo").on("click",function(){$(".yd-alertModalMask").css("z-index",20),comm.confirmBox({title:"确定放弃注册吗?",content:"放弃注册,将无法:<br/>浏览完整系列课程<br/>参与课程讨论",cancel:"放弃",ensure:"继续注册",ensureCallback:function(){$(".yd-confirmModalMask").removeClass("show").remove()},cancelCallback:function(){loginAbout.register.exit()}})})},checkPhone:function(){var e=this;e.isValid.phoneIsValid=!0;var n=$(".ev-regNum"),s=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,o=s.test(n.val());0==o?e.isValid.phoneIsValid=!1:e.ajaxFn({url:e.path.isExist,async:!0,param:{account:n.val()},type:"get",fn:function(n){var s=n.responseObject.responseStatus;0==s?e.isValid.phoneIsValid=!1:e.sendCode()}})},checkPhone2:function(){var e=this;e.isValid.phoneIsValid=!0;var n=$(".ev-regNum"),s=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,o=s.test(n.val());0==o?(e.toast("请填写正确手机号",300,1500),e.isValid.phoneIsValid=!1):e.ajaxFn({url:e.path.isExist,async:!0,param:{account:n.val()},type:"get",fn:function(s){var o=s.responseObject.responseStatus;s.responseObject.responseCode;0==o?($(".yd-alertModalMask").css("z-index",20),comm.confirmBox({content:"账号已存在，可直接登录",cancel:"注册新账号",ensure:"登录",ensureCallback:function(){loginAbout.register.exit(),loginAbout.login.show({success:function(){loginAbout.changeHead(),loginAbout.login.exit(),location.reload()}}),$(".ev-phoneNum").val(n.val())},cancelCallback:function(){$(".ev-regNum").attr("value","")}}),e.isValid.phoneIsValid=!1):e.sendCode()}})},checkPassword:function(){var e=this;e.isValid.passIsValid=!0;var n=$(".ev-regPas"),s=/^[0-9a-zA-Z]*$/g,o=s.test(n.val());if(o){var i=n.val().length;i<6?e.isValid.passIsValid=!1:i>20&&(e.isValid.passIsValid=!1)}else e.isValid.passIsValid=!1},checkPassword2:function(){var e=this;e.isValid.passIsValid=!0;var n=$(".ev-regPas"),s=/^[0-9a-zA-Z]*$/g,o=n.val().length,i=s.test(n.val());if(i){var o=n.val().length;o<6?(e.toast("密码长度不足6位",300,1500),e.isValid.passIsValid=!1):o>20&&(e.toast("密码长度超过20位",300,1500),e.isValid.passIsValid=!1)}else e.toast("密码格式不正确",300,1500),e.isValid.passIsValid=!1},checkValidCode:function(){var e=this;e.isValid.codeIsValid=!0,""==$(".ev-regCode").val()&&(e.isValid.codeIsValid=!1)},checkValidCode2:function(){var e=this;e.isValid.codeIsValid=!0,""==$(".ev-regCode").val()&&(e.toast("验证码不能为空",300,1500),e.isValid.codeIsValid=!1)},checkSer:function(){var e=this,n=!0;$(".service i").on("click",function(){n?($(".service i").removeClass("active"),n=!1,e.isValid.server=!1,e.active()):($(".service i").addClass("active"),n=!0,e.isValid.server=!0,e.active())}),e.active()},active:function(){var e=this,n=$(".ev-regNum").val(),s=$(".ev-regPas").val(),o=$(".ev-regCode").val();n&&s&&o&&e.isValid.phoneIsValid&&e.isValid.passIsValid&&e.isValid.codeIsValid&&e.isValid.server?($(".ev-regSave").addClass("activation"),e.regBtn()):($(".ev-regSave").removeClass("activation"),$(".ev-regSave").unbind("click"))},check:function(){var e=this,n=$(".ev-regNum"),s=$(".ev-regPas"),o=$(".ev-regCode");n.on("blur",function(){e.checkPhone2()}),s.on("blur",function(){e.checkPassword2()}),o.on("blur",function(){e.checkValidCode2()}),n.off("keyup").on("keyup",function(){e.checkPhone(),e.active()}),s.off("keyup").on("keyup",function(){e.checkPassword(),e.active()}),o.off("keyup").on("keyup",function(){e.checkValidCode(),e.active()})},sendCode:function(){var e=this;$(".ev-regvalidate").off("click").on("click",function(){var n=$(".ev-regNum").val();e.isValid.sendCodeNum=n;var s=/^(127|128|13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,o=(s.test(n),60);e.ajaxFn({url:e.path.sendCode,async:!1,param:{account:n,typeId:2,codeLength:4},type:"post",fn:function(n){var s=n.responseObject.responseData.codeNum;if(e.isValid.regcodeKey=n.responseObject.responsePk,s)var i=setInterval(function(){o--,$(".validate").text(o+"s后重新获取"),$(".validate").css("color","#ccc"),$(".validate").unbind("click"),0==o&&(clearTimeout(i),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),e.sendCode()),$(".returnText").off("click").on("click",function(){clearTimeout(i),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),loginAbout.register.show(),loginAbout.login.show(),e.sendCode()}),$(".reg-experiencePo").on("click",function(){commLog.creatEvent({id:14,url:"",keyword:"注册关闭"}),comm.confirmBox({title:"确定放弃注册吗?",content:"放弃注册,将无法拥有以下权限:浏览完整系列课程,参与课程问答。",cancel:"放弃",ensure:"继续注册",ensureCallback:function(){},cancelCallback:function(){loginAbout.login.exit(),clearTimeout(i),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e")}}),e.sendCode()}),$(".log-experiencePo").off("click").on("click",function(){clearTimeout(i),$(".validate").text("点击获取验证码"),$(".validate").css("color","#73859e"),e.sendCode()})},1e3);else e.toast("每日最多获取3次验证码,请明天再试",300,2e3)}})})},regBtn:function(){var e=this;$(".ev-regSave").off("click").on("click",function(){if(commLog.creatEvent({id:11,url:window.location.href,keyword:"注册提交"}),$(this).is(".activation")){var n=$(".ev-regNum").val(),s=$(".ev-regPas").val(),o=$(".ev-regCode").val();e.isValid.phoneNum=n,e.isValid.phoneNum!=e.isValid.sendCodeNum?e.toast("验证码输入错误",300,1500):e.ajaxFn({url:e.path.checkCode,type:"post",async:!1,param:{validCode:o,id:e.isValid.regcodeKey},fn:function(o){var i=o.responseObject.responseStatus,a=o.responseObject.responseCode;i?e.ajaxFn({url:e.path.register,type:"get",param:{account:n,passwd:s,registType:1},fn:function(s){e.isValid.customerId=s.responseObject.responsePk;var o=s.responseObject.responseStatus,i=s.responseObject.responseCode;if(o)loginAbout.register.exit(),localStorage.setItem("userId",e.isValid.customerId),loginAbout.changeHead(),localStorage.setItem("userState","true"),localStorage.setItem("phoneNum",n),localStorage.setItem("unActive","1"),comm.alertBox({mTitle:"成功创建唯医通行证",title:"您可以使用通行证登录<br/>医鼎、唯医、医栈",ensure:"知道了",ensureCallback:function(){}}),localStorage.setItem("loginNum","0"),e.objFn.success&&e.objFn.success();else{switch(i){case"9X0003":e.toast("用户名或密码为空");break;case"0B0001":e.toast("用户名已存在")}e.objFn.success&&e.objFn.success()}}}):"1A0002"==a?e.toast("验证码错误,请重新获取",300,1500):"1A0001"==a&&e.toast("验证码已经失效,请重新获取",300,1500)}})}})}};registerFn.init();